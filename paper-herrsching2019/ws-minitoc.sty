%% This is file `ws-minitoc.sty', derived from minitoc.sty (Jean-Pierre Drucbert)
\NeedsTeXFormat{LaTeX2e}[1996/06/02]%
\ProvidesPackage{ws-minitoc}%
   [2008/07/16 v60 Package minitoc (JPFD)] % message I0000
\RequirePackage{mtcmess}[2006/03/14]
\mtcPackageInfo[I0001]{minitoc}%
   {*** minitoc package, version 60 ***\@gobble}
\newwrite\tf@mtc
\newlength\mtcindent
\newskip\mtcskipamount
\setlength{\mtcskipamount}{\bigskipamount}
\def\mtcskip{{\parskip=\z@\addvspace{\mtcskipamount}}}
\def\mtcgapbeforeheads{50\p@}
\def\mtcgapafterheads{40\p@}
     \@ifundefined{part}{}{%
        \def\kernafterparttoc{\kern-1.\baselineskip\kern.5ex}%
        \def\kernafterpartlof{\kern-1.\baselineskip\kern.5ex}%
        \def\kernafterpartlot{\kern-1.\baselineskip\kern.5ex}%
                          }%
     \@ifundefined{chapter}{%
        \@ifundefined{section}{}%
                              {%
            \def\kernaftersecttoc{\kern-1.\baselineskip\kern.5ex}%
            \def\kernaftersectlof{\kern-1.\baselineskip\kern.5ex}%
            \def\kernaftersectlot{\kern-1.\baselineskip\kern.5ex}%
                              }%
                           }%
                           {%
            \def\kernafterminitoc{\kern-.5\baselineskip\kern.5ex}%
            \def\kernafterminilof{\kern-1.\baselineskip\kern0.ex}%
            \def\kernafterminilot{\kern-1.\baselineskip\kern0.ex}%
                           }%
     \@ifundefined{part}{}{%
        \def\ptcoffset{0pt}%
        \def\plfoffset{0pt}%
        \def\pltoffset{0pt}%
                          }%
     \@ifundefined{chapter}{%
        \@ifundefined{section}{}%
                              {%
            \def\stcoffset{0pt}%
            \def\slfoffset{0pt}%
            \def\sltoffset{0pt}%
                              }%
                           }%
                           {%
            \def\mtcoffset{0pt}%
            \def\mlfoffset{0pt}%
            \def\mltoffset{0pt}%
                           }%
\newif\ifinparttoc\inparttocfalse%
\newif\ifinpartlof\inpartloffalse%
\newif\ifinpartlot\inpartlotfalse%
\newif\ifinsecttoc\insecttocfalse%
\newif\ifinsectlof\insectloffalse%
\newif\ifinsectlot\insectlotfalse%
\newif\ifinminitoc\inminitocfalse%
\newif\ifinminilof\inminiloffalse%
\newif\ifinminilot\inminilotfalse%
\newif\if@mtc@hints@ \@mtc@hints@true
\newif\if@mtc@hints@w@ \@mtc@hints@w@false
\newif\if@mtc@hints@given@ \@mtc@hints@given@false
\newif\if@mtc@sect@floats@ \@mtc@sect@floats@false
\newif\if@mtc@placeinsLoaded@ \@mtc@placeinsLoaded@false
\newif\if@mtc@memoirLoaded@ \@mtc@memoirLoaded@false
\newif\if@mtc@memoirnew@ \@mtc@memoirnew@false
\newif\if@mtc@sectstyLoaded@ \@mtc@sectstyLoaded@false
\newif\if@mtc@sectstyLoaded@a@ \@mtc@sectstyLoaded@a@false
\newif\if@mtc@captionLoaded@ \@mtc@captionLoaded@false
\newif\if@mtc@captionLoaded@a@ \@mtc@captionLoaded@a@false
\newif\if@mtc@captionIILoaded@ \@mtc@captionIILoaded@false
\newif\if@mtc@captionIILoaded@a@ \@mtc@captionIILoaded@a@false
\newif\if@mtc@ccaptionLoaded@ \@mtc@ccaptionLoaded@false
\newif\if@mtc@ccaptionLoaded@a@ \@mtc@ccaptionLoaded@a@false
\newif\if@mtc@mcaptionLoaded@ \@mtc@mcaptionLoaded@false
\newif\if@mtc@mcaptionLoaded@a@ \@mtc@mcaptionLoaded@a@false
\newif\if@mtc@captcontLoaded@ \@mtc@captcontLoaded@false
\newif\if@mtc@captcontLoaded@a@ \@mtc@captcontLoaded@a@false
\newif\if@mtc@varsectsLoaded@ \@mtc@varsectsLoaded@false
\newif\if@mtc@varsectsLoaded@a@ \@mtc@varsectsLoaded@a@false
\newif\if@mtc@fncychapLoaded@ \@mtc@fncychapLoaded@false
\newif\if@mtc@fncychapLoaded@a@ \@mtc@fncychapLoaded@a@false
\newif\if@mtc@HgcLoaded@ \@mtc@HgcLoaded@false
\newif\if@mtc@HgcLoaded@a@ \@mtc@HgcLoaded@a@false
\newif\if@mtc@quotchapLoaded@ \@mtc@quotchapLoaded@false
\newif\if@mtc@quotchapLoaded@a@ \@mtc@quotchapLoaded@a@false
\newif\if@mtc@romannumLoaded@ \@mtc@romannumLoaded@false
\newif\if@mtc@romannumLoaded@a@ \@mtc@romannumLoaded@a@false
\newif\if@mtc@sfheadersLoaded@ \@mtc@sfheadersLoaded@false
\newif\if@mtc@sfheadersLoaded@a@ \@mtc@sfheadersLoaded@a@false
\newif\if@mtc@alnumsecLoaded@ \@mtc@alnumsecLoaded@false
\newif\if@mtc@alnumsecLoaded@a@ \@mtc@alnumsecLoaded@a@false
\newif\if@mtc@floatLoaded@ \@mtc@floatLoaded@false
\newif\if@mtc@floatrowLoaded@ \@mtc@floatrowLoaded@false
\newif\if@mtc@trivfloatLoaded@ \@mtc@trivfloatLoaded@false
\newif\if@mtc@rotfloatLoaded@ \@mtc@rotfloatLoaded@false
\newif\if@mtc@empty@parttoc@ \@mtc@empty@parttoc@false
\newif\if@mtc@empty@partlof@ \@mtc@empty@partlof@false
\newif\if@mtc@empty@partlot@ \@mtc@empty@partlot@false
\newif\if@mtc@empty@minitoc@ \@mtc@empty@minitoc@false
\newif\if@mtc@empty@minilof@ \@mtc@empty@minilof@false
\newif\if@mtc@empty@minilot@ \@mtc@empty@minilot@false
\newif\if@mtc@empty@secttoc@ \@mtc@empty@secttoc@false
\newif\if@mtc@empty@sectlof@ \@mtc@empty@sectlof@false
\newif\if@mtc@empty@sectlot@ \@mtc@empty@sectlot@false
\newif\if@mtc@part@def@ \@mtc@part@def@false
  \@ifundefined{part}{\@mtc@part@def@false}{\@mtc@part@def@true}
\newif\if@mtc@chapter@def@ \@mtc@chapter@def@false
  \@ifundefined{chapter}{\@mtc@chapter@def@false}{\@mtc@chapter@def@true}
\newif\if@mtc@section@def@ \@mtc@section@def@false
  \@ifundefined{section}{\@mtc@section@def@false}{\@mtc@section@def@true}
\newif\if@mtc@part@undef@ \@mtc@part@undef@true
   \@ifundefined{part}{\@mtc@part@undef@true}{\@mtc@part@undef@false}
\newif\if@mtc@chapter@undef@ \@mtc@chapter@undef@true
   \@ifundefined{chapter}{\@mtc@chapter@undef@true}{\@mtc@chapter@undef@false}
\newif\if@mtc@section@undef@ \@mtc@section@undef@true
   \@ifundefined{section}{\@mtc@section@undef@true}{\@mtc@section@undef@false}
\newif\if@parttoc@used@ \global\@parttoc@used@false
\newif\if@partlof@used@ \global\@partlof@used@false
\newif\if@partlot@used@ \global\@partlot@used@false
\newif\if@doparttoc@used@ \global\@doparttoc@used@false
\newif\if@dopartlof@used@ \global\@dopartlof@used@false
\newif\if@dopartlot@used@ \global\@dopartlot@used@false
\newif\if@minitoc@used@ \global\@minitoc@used@false
\newif\if@minilof@used@ \global\@minilof@used@false
\newif\if@minilot@used@ \global\@minilot@used@false
\newif\if@dominitoc@used@ \global\@dominitoc@used@false
\newif\if@dominilof@used@ \global\@dominilof@used@false
\newif\if@dominilot@used@ \global\@dominilot@used@false
\newif\if@secttoc@used@ \global\@secttoc@used@false
\newif\if@sectlof@used@ \global\@sectlof@used@false
\newif\if@sectlot@used@ \global\@sectlot@used@false
\newif\if@dosecttoc@used@ \global\@dosecttoc@used@false
\newif\if@dosectlof@used@ \global\@dosectlof@used@false
\newif\if@dosectlot@used@ \global\@dosectlot@used@false
\newif\if@firstpartis@used@ \global\@firstpartis@used@false
\newif\if@firstchapteris@used@ \global\@firstchapteris@used@false
\newif\if@firstsectionis@used@ \global\@firstsectionis@used@false
\newif\ifmtcsecondpart \mtcsecondpartfalse
\AtBeginDocument{%
  \ifmtcsecondpart
    \global\mtcsecondparttrue
  \else
    \global\mtcsecondpartfalse
  \fi}
\AtEndDocument{%
\ifnum\value{part}=2\relax
  \mtcsecondparttrue
\else
  \mtcsecondpartfalse
\fi
\if@filesw
  \ifmtcsecondpart
    \immediate\write\@mainaux
      {\string\global\string\mtcsecondparttrue}%
  \else
    \immediate\write\@mainaux
      {\string\global\string\mtcsecondpartfalse}%
  \fi
\fi}
\newif\if@mtc@notoccite@ \@mtc@notoccite@false
\@ifundefined{mtc@hook@beforeinputfile}%
   {\let\mtc@hook@beforeinputfile\relax}{}
\newif\iftightmtc \tightmtcfalse
\newif\ifktightmtc \ktightmtcfalse
\mtcPackageInfo[I0005]{minitoc}{compatible with hyperref\@gobble}
\newif\if@mtc@hyper@used@ \global\@mtc@hyper@used@false
\AtBeginDocument{%
  \@ifpackageloaded{hyperref}{%
    \global\@mtc@hyper@used@true
    \def\toclevel@xpart{1000}%
    \def\toclevel@xchapter{1000}%
    \def\toclevel@xsect{1000}%
    \let\toclevel@starpart\toclevel@part
    \let\toclevel@starchapter\toclevel@chapter
    \let\toclevel@starsection\toclevel@section
    \let\toclevel@starsubsection\toclevel@subsection
    \let\toclevel@starsubsubsection\toclevel@subsubsection
    \let\toclevel@starparagraph\toclevel@paragraph
    \let\toclevel@starsubparagraph\toclevel@subparagraph
  }{}}%
 \@ifpackageloaded{sectsty}{\@mtc@sectstyLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{sectsty}{\@mtc@sectstyLoaded@a@true}{}}%
 \@ifpackageloaded{varsects}%{\@mtc@varsectsLoaded@true}{}
 \AtBeginDocument{\@ifpackageloaded{varsects}{\@mtc@varsectsLoaded@a@true}{}}%
 \@ifpackageloaded{fncychap}{\@mtc@fncychapLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{fncychap}{\@mtc@fncychapLoaded@a@true}{}}%
 \@ifpackageloaded{hangcaption}{\@mtc@HgcLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{hangcaption}{\@mtc@HgcLoaded@a@true}{}}%
 \@ifpackageloaded{quotchap}{\@mtc@quotchapLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{quotchap}{\@mtc@quotchapLoaded@a@true}{}}%
 \@ifpackageloaded{romannum}{\@mtc@romannumLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{romannum}{\@mtc@romannumLoaded@a@true}{}}%
 \@ifpackageloaded{sfheaders}{\@mtc@sfheadersLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{sfheaders}{\@mtc@sfheadersLoaded@a@true}{}}%
 \@ifpackageloaded{alnumsec}{\@mtc@alnumsecLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{alnumsec}{\@mtc@alnumsecLoaded@a@true}{}}%
 \@ifpackageloaded{captcont}{\@mtc@captcontLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{captcont}{\@mtc@captcontLoaded@a@true}{}}%
 \@ifpackageloaded{caption}{\@mtc@captionLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{caption}{\@mtc@captionLoaded@a@true}{}}%
 \@ifpackageloaded{caption2}{\@mtc@captionIILoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{caption2}{\@mtc@captionIILoaded@a@true}{}}%
 \@ifpackageloaded{ccaption}{\@mtc@ccaptionLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{ccaption}{\@mtc@ccaptionLoaded@a@true}{}}%
 \@ifpackageloaded{mcaption}{\@mtc@mcaptionLoaded@true}{}%
 \AtBeginDocument{\@ifpackageloaded{mcaption}{\@mtc@mcaptionLoaded@a@true}{}}%
 \AtBeginDocument{\@ifpackageloaded{float}{\@mtc@floatLoaded@true}{}}%
 \AtBeginDocument{\@ifpackageloaded{floatrow}{\@mtc@floatrowLoaded@true}{}}%
 \AtBeginDocument{\@ifpackageloaded{trivfloat}{\@mtc@trivfloatLoaded@true}{}}%
 \AtBeginDocument{\@ifpackageloaded{rotfloat}{\@mtc@rotfloatLoaded@true}{}}%
\newif\if@mtcpatchmemoir@ \@mtcpatchmemoir@false
\@ifclassloaded{memoir}{\@mtc@memoirLoaded@true\relax%
                        \mtcPackageInfo[I0030]{minitoc}%
                        {the memoir class is loaded:
                         \MessageBreak
                         compatibility attempted\@gobble}}%
                       {\@mtc@memoirLoaded@false}
\if@mtc@memoirLoaded@
 \@ifundefined{@m@mchapter}%
   {\@mtc@memoirnew@false\mtcPackageInfo[I0020]{minitoc}%
      {old version of the memoir class\@gobble}}
   {\@mtc@memoirnew@true\mtcPackageInfo[I0027]{minitoc}%
      {recent version of the memoir class\@gobble}
      \mtcPackageInfo[I0032]{minitoc}%
         {This version of the memoir class uses
          \MessageBreak
          a version of \string\chapter\space which is
          \MessageBreak
          incompatible with the minitoc package.
          \MessageBreak
          We try to patch\@gobble}%
   \@mtcpatchmemoir@true}
\fi
\if@mtcpatchmemoir@
\IfFileExists{mtcpatchmem.sty}{%
   \@ifclasslater{memoir}{2005/09/25}{}{\RequirePackage{mtcpatchmem}}}{%
   \mtcPackageError[E0028]{minitoc}%
     {Unable to patch the memoir class}%
     {So it remains incompatible. Sorry.}}
\fi
\begingroup
\catcode`\Q=3
\long\gdef\mtc@ifmtarg#1{%
\mtc@xifmtarg#1QQ\@secondoftwo\@firstoftwo\@nil}
\long\gdef\mtc@xifmtarg#1#2Q#3#4#5\@nil{#4}
\endgroup
\let\mtc@EndWhile = \fi
\def\mtc@While #1#2#3\mtc@EndWhile{%
   \def\mtc@WhilePreCondition{#1}%
   \def\mtc@WhileCondition{#2}%
   \def\mtc@WhileBody{#3}%
   \mtc@@While
}
\def\mtc@@While{%
   \mtc@WhilePreCondition
   \mtc@WhileCondition
      \def\mtc@WhileNext{%
          \mtc@WhileBody
          \mtc@@While
      }%
   \else
      \def\mtc@WhileNext{}%
   \fi
   \mtc@WhileNext
}
\newif\if@mtc@LI\@mtc@LItrue
\newif\if@mtc@FE\@mtc@FEtrue
\newif\if@mtc@checkfiles\@mtc@checkfilestrue
\def\mtc@Body{\immediate\read\@inputcheck to \mtc@Rline\relax
  \ifeof\@inputcheck\relax\@mtc@LIfalse\fi
  \expandafter\ifx\mtc@Rline\par\relax
     \def\mtc@Rline{}
  \else
     \ifeof\@inputcheck\relax\global\@mtc@LIfalse\fi
     \mtc@ifmtarg{\mtc@Rline}{\relax}{\@mtc@FEfalse\@mtc@LIfalse}
  \fi}
\def\mtc@CkFile#1{%
  \@mtc@LItrue\@mtc@FEtrue
  \if@mtc@checkfiles
  \IfFileExists{#1}{%
    \immediate\openin\@inputcheck #1\relax
    \mtc@While{}{\if@mtc@LI\relax}{\mtc@Body}\mtc@EndWhile}%
   {\@mtc@FEtrue}%
  \else
   \@mtc@FEfalse%
  \fi}
\closein\@inputcheck\relax
\def\mtc@CkStr#1{%
  \immediate\openout\tf@mtc \jobname.mtc
  \immediate\write\tf@mtc{#1}%
  \immediate\closeout\tf@mtc
  \mtc@CkFile{\jobname.mtc}%
  \immediate\openout\tf@mtc \jobname.mtc
  \immediate\closeout\tf@mtc}
\def\mtc@onebackpart{\addtocounter{ptc}{-1}}
\def\mtc@onebackchap{\addtocounter{mtc}{-1}}
\def\mtc@onebacksect{\addtocounter{stc}{-1}}
\@ifundefined{part}{%
  \mtcPackageWarningNoLine[W0018]{minitoc}%
     {part level macros NOT available}
}{%% else undefined part (\part defined)
  \mtcPackageInfo[I0023]{minitoc}%
     {part level macros available\@gobble}
  \let\mtc@svspart\@spart
  \def\@spart{\stepcounter{ptc}\mtc@svspart}
  \let\mtc@svpart\@part
  \def\@part{\stepcounter{ptc}\mtc@svpart}
\newcommand{\mtcaddpart}[1][]{%
    \mtc@ifmtarg{#1}{\addcontentsline{toc}{xpart}{}}%
                    {\addcontentsline{toc}{part}{#1}}%
    \addcontentsline{lof}{xpart}{}%
    \addcontentsline{lot}{xpart}{}%
    \adjustptc}
}%
\@ifundefined{chapter}{\mtcPackageInfo[I0004]{minitoc}%
           {chapter level macros NOT available\@gobble}%
  \@ifundefined{section}{\mtcPackageInfo[I0029]{minitoc}%
           {section level macros NOT available\@gobble}%
    \mtcPackageWarningNoLine[W0017]{minitoc}%
       {no section or chapter level macros available
        \MessageBreak
        PLEASE VERIFY YOUR MAIN DOCUMENT CLASS}}%
  {\mtcPackageInfo[I0028]{minitoc}%
       {section level macros available\@gobble}%
    \let\mtcsv@tableofcontents\tableofcontents
    \let\mtcsv@listoffigures\listoffigures
    \let\mtcsv@listoftables\listoftables
    \def\tableofcontents{\mtcsv@tableofcontents\mtc@onebacksect}
    \def\listoffigures{\mtcsv@listoffigures\mtc@onebacksect}
    \def\listoftables{\mtcsv@listoftables\mtc@onebacksect}
     \let\mtc@svsection\section
     \def\section{\stepcounter{stc}\mtc@svsection}
     \let\mtc@svss\@ssect
\newcommand{\mtcaddsection}[1][]{%
    \mtc@ifmtarg{#1}{\addcontentsline{toc}{xsect}{}}%
                    {\addcontentsline{toc}{section}{#1}}%
    \addcontentsline{lof}{xsect}{}%
    \addcontentsline{lot}{xsect}{}%
    \adjuststc}
  }}{%
  \mtcPackageInfo[I0003]{minitoc}{chapter level macros available\@gobble}
\let\mtc@svchapter\@chapter \def\@chapter{\stepcounter{mtc}\mtc@svchapter}
\newcommand{\mtcaddchapter}[1][]{%
    \mtc@ifmtarg{#1}{\addcontentsline{toc}{xchapter}{}}%
                    {\addcontentsline{toc}{chapter}{#1}}%
    \addcontentsline{lof}{xchapter}{}%
    \addcontentsline{lot}{xchapter}{}%
    \adjustmtc}%
}%
\def\newread{\alloc@6\read\chardef\sixt@@n}
\newtoks\mtc@toks
\def\mtc@string{\relax}
\newbox\mtc@strutbox
\setbox\mtc@strutbox=\hbox{\rule[1.8ex]{\z@}{2.5ex}}
\def\mtc@strut{\relax\ifmmode\copy\mtc@strutbox
                     \else\unhcopy\mtc@strutbox\fi}
\newbox\mtc@hstrutbox
\setbox\mtc@hstrutbox=\hbox{\rule[1.ex]{\z@}{1.ex}}
\def\mtc@hstrut{\relax\ifmmode\copy\mtc@hstrutbox
                      \else\unhcopy\mtc@hstrutbox\fi}
\def\mtc@v{\leavevmode\mtc@strut}
\def\mtc@zrule{\rule[\z@]{\z@}{\z@}}
\def\mtc@BBR{\unpenalty\nopagebreak[4]}
\mtcPackageInfo[I0002]{minitoc}%
   {Autoconfiguration of extensions\@gobble}
\newif\if@mtc@longext@\@mtc@longext@false
\immediate\openout\tf@mtc \jobname.mtc0
\immediate\write\tf@mtc{\string\@mtc@longext@true}
\immediate\closeout\tf@mtc
\immediate\openout\tf@mtc \jobname.mtc
\immediate\write\tf@mtc{\string\@mtc@longext@false}
\immediate\closeout\tf@mtc
\input{\jobname.mtc0}
\if@mtc@longext@
 \mtcPackageInfo[I0012]{minitoc}%
   {Long extensions (Unix-like) will be used\@gobble}
 \mtcPackageInfo[I0031]{minitoc}%
 {==> this version is configured for UNIX-like
  \MessageBreak
  \space\space\space\space(long extensions) file names\@gobble}%
\else
 \mtcPackageWarningNoLine[W0019]{minitoc}%
   {Short extensions (MSDOS-like) will be used
    \MessageBreak
    ==> this version is configured for MSDOS-like
    \MessageBreak
    \space\space\space\space(8+3) file names}
\fi
\immediate\openout\tf@mtc \jobname.mtc
\immediate\closeout\tf@mtc
\immediate\openout\tf@mtc \jobname.mtc0
\immediate\closeout\tf@mtc
\@ifundefined{@inputcheck}%
  {\mtcPackageWarningNoLine[W0021]{minitoc}%
     {Your version of latex.tex is obsolete.
      \MessageBreak
      Trying to continue..}\newread\@inputcheck\relax}{}
\@ifundefined{reset@font}%
  {\mtcPackageWarningNoLine[W0022]{minitoc}%
     {Your version of latex.tex is very obsolete.
      \MessageBreak
      Trying to continue... crossing fingers}%
  \let\reset@font\relax}{}
\newif\ifundottedmtc\undottedmtcfalse
\def\@undottedtocline#1#2#3#4#5{%
  \ifnum #1>\c@tocdepth\relax \else
  \vskip \z@ plus.2\p@
  {\leftskip #2\relax \rightskip \@tocrmarg \parfillskip -\rightskip
   \parindent #2\relax\@afterindenttrue
   \interlinepenalty\@M
   \leavevmode
   \@tempdima #3\relax \advance\leftskip \@tempdima \hbox{}%
   \hskip -\leftskip
    #4\nobreak\hfill \nobreak
           \null\par}%
  \fi}
\if@mtc@memoirLoaded@
\def\mtcpagenumbers{%
  \cftpagenumberson{section}
  \cftpagenumberson{subsection}
  \cftpagenumberson{subsubsection}
  \cftpagenumberson{paragraph}
  \cftpagenumberson{subparagraph}}
\def\nomtcpagenumbers{%
  \cftpagenumbersoff{section}
  \cftpagenumbersoff{subsection}
  \cftpagenumbersoff{subsubsection}
  \cftpagenumbersoff{paragraph}
  \cftpagenumbersoff{subparagraph}}
\def\stcpagenumbers{%
  \cftpagenumberson{subsection}
  \cftpagenumberson{subsubsection}
  \cftpagenumberson{paragraph}
  \cftpagenumberson{subparagraph}}
\def\nostcpagenumbers{%
  \cftpagenumbersoff{subsection}
  \cftpagenumbersoff{subsubsection}
  \cftpagenumbersoff{paragraph}
  \cftpagenumbersoff{subparagraph}}
\def\ptcpagenumbers{%
  \cftpagenumberson{chapter}
  \cftpagenumberson{section}
  \cftpagenumberson{subsection}
  \cftpagenumberson{subsubsection}
  \cftpagenumberson{paragraph}
  \cftpagenumberson{subparagraph}}
\def\noptcpagenumbers{%
  \cftpagenumbersoff{chapter}
  \cftpagenumbersoff{section}
  \cftpagenumbersoff{subsection}
  \cftpagenumbersoff{subsubsection}
  \cftpagenumbersoff{paragraph}
  \cftpagenumbersoff{subparagraph}}
  \def\mlfpagenumbers{\cftpagenumberson{figure}}
  \def\nomlfpagenumbers{\cftpagenumbersoff{figure}}
  \def\slfpagenumbers{\cftpagenumberson{figure}}
  \def\noslfpagenumbers{\cftpagenumbersoff{figure}}
  \def\plfpagenumbers{\cftpagenumberson{figure}}
  \def\noplfpagenumbers{\cftpagenumbersoff{figure}}
  \def\mltpagenumbers{\cftpagenumberson{table}}
  \def\nomltpagenumbers{\cftpagenumbersoff{table}}
  \def\sltpagenumbers{\cftpagenumberson{table}}
  \def\nosltpagenumbers{\cftpagenumbersoff{table}}
  \def\pltpagenumbers{\cftpagenumberson{table}}
  \def\nopltpagenumbers{\cftpagenumbersoff{table}}
\else
 \def\mtcpagenumbers{\let\mtc@pgno\null}
 \def\nomtcpagenumbers{\let\mtc@pgno\relax}
 \def\stcpagenumbers{\let\stc@pgno\null}
 \def\nostcpagenumbers{\let\stc@pgno\relax}
 \def\ptcpagenumbers{\let\ptc@pgno\null}
 \def\noptcpagenumbers{\let\ptc@pgno\relax}
 \def\mlfpagenumbers{\let\mlf@pgno\null}
 \def\nomlfpagenumbers{\let\mlf@pgno\relax}
 \def\slfpagenumbers{\let\slf@pgno\null}
 \def\noslfpagenumbers{\let\slf@pgno\relax}
 \def\plfpagenumbers{\let\plf@pgno\null}
 \def\noplfpagenumbers{\let\plf@pgno\relax}
 \def\mltpagenumbers{\let\mlt@pgno\null}
 \def\nomltpagenumbers{\let\mlt@pgno\relax}
 \def\sltpagenumbers{\let\slt@pgno\null}
 \def\nosltpagenumbers{\let\slt@pgno\relax}
 \def\pltpagenumbers{\let\plt@pgno\null}
 \def\nopltpagenumbers{\let\plt@pgno\relax}
\fi
\ptcpagenumbers
\plfpagenumbers
\pltpagenumbers
\mtcpagenumbers
\mlfpagenumbers
\mltpagenumbers
\stcpagenumbers
\slfpagenumbers
\sltpagenumbers
\@ifundefined{chapter}{%
   \let\beforeparttoc\empty
   \let\beforepartlof\empty
   \let\beforepartlot\empty}%
   {\let\beforeparttoc\cleardoublepage
    \let\beforepartlof\cleardoublepage
    \let\beforepartlot\cleardoublepage}
\let\beforeminitoc\empty
\let\beforeminilof\empty
\let\beforeminilot\empty
\let\beforesecttoc\empty
\let\beforesectlof\empty
\let\beforesectlot\empty
\@ifundefined{chapter}{%
   \let\afterparttoc\empty
   \let\afterpartlof\empty
   \let\afterpartlot\empty}%
   {\let\afterparttoc\cleardoublepage
    \let\afterpartlof\cleardoublepage
    \let\afterpartlot\cleardoublepage}
\let\afterminitoc\empty
\let\afterminilof\empty
\let\afterminilot\empty
\let\aftersecttoc\empty
\let\aftersectlof\empty
\let\aftersectlot\empty
\let\openparttoc\empty
\let\openpartlof\empty
\let\openpartlot\empty
\let\openminitoc\empty
\let\openminilof\empty
\let\openminilot\empty
\let\opensecttoc\empty
\let\opensectlof\empty
\let\opensectlot\empty
\let\closeparttoc\empty
\let\closepartlof\empty
\let\closepartlot\empty
\let\closeminitoc\empty
\let\closeminilof\empty
\let\closeminilot\empty
\let\closesecttoc\empty
\let\closesectlof\empty
\let\closesectlot\empty
\@ifundefined{chapter}{%
 \def\thispageparttocstyle{\empty}
 \def\thispagepartlofstyle{\empty}
 \def\thispagepartlotstyle{\empty}}%
{\def\thispageparttocstyle{\thispagestyle{empty}}
 \def\thispagepartlofstyle{\thispagestyle{empty}}
 \def\thispagepartlotstyle{\thispagestyle{empty}}}
\def\thispageminitocstyle{\empty}
\def\thispageminilofstyle{\empty}
\def\thispageminilotstyle{\empty}
\def\thispagesecttocstyle{\empty}
\def\thispagesectlofstyle{\empty}
\def\thispagesectlotstyle{\empty}
\def\faketableofcontents{\fake@starttoc{toc}%
    \@ifundefined{c@ptc}{}{\setcounter{ptc}{0}}%
    \@ifundefined{c@mtc}{}{\setcounter{mtc}{0}}%
    \@ifundefined{c@stc}{}{\setcounter{stc}{0}}%
    }
\def\fakelistoffigures{\fake@starttoc{lof}}
\def\fakelistoftables{\fake@starttoc{lot}}
\def\fake@starttoc#1{\begingroup \makeatletter
  \if@filesw \expandafter\newwrite\csname tf@#1\endcsname
             \immediate\openout \csname tf@#1\endcsname
             \jobname.#1\relax \fi
  \global\@nobreakfalse \endgroup}
\AtBeginDocument{%
 \@ifundefined{c@lofdepth}{}%
   {\newcounter{minilofdepth}\setcounter{minilofdepth}{2}}%
 \@ifundefined{c@lotdepth}{}%
   {\newcounter{minilotdepth}\setcounter{minilotdepth}{2}}%
}%
\global\let\mtc@markboth\markboth
\global\let\@mkboth\markboth
\def\addst@rred#1#2{%
  \addcontentsline{toc}{star#1}{#2}%
  \@ifundefined{c@ptc}{}{%
    \expandafter\ifx\csname #1\endcsname\part\relax
      \stepcounter{ptc}%
    \fi
  }%
  \@ifundefined{c@mtc}{}{%
    \expandafter\ifx\csname #1\endcsname\chapter\relax
      \stepcounter{mtc}%
    \fi
    \expandafter\ifx\csname #1\endcsname\appendix\relax
      \stepcounter{mtc}%
    \fi
  }%
  \@ifundefined{c@stc}{}{%
    \expandafter\ifx\csname #1\endcsname\section\relax
%%      \@ifundefined{chapter}{\stepcounter{stc}}{}%
      \stepcounter{stc}%
    \fi
  }%
}%
\@ifundefined{chapter}{%
\gdef\addstarredsection#1{\addst@rred{section}{#1}}
}%
{%
\def\The@mtc{\arabic{mtc}}
\def\firstchapteris#1%
  {\mtcPackageWarning[W0003]{minitoc}%
     {\string\firstchapteris \space is an obsolete (ignored)
      \MessageBreak
      command}%
     \@firstchapteris@used@true}
\newcounter{mtc}
\setcounter{mtc}{0}
\newcommand{\adjustmtc}[1][1]{\addtocounter{mtc}{#1}}
\def\decrementmtc{\addtocounter{mtc}{-1}}
\def\incrementmtc{\addtocounter{mtc}{+1}}
\gdef\themtc{\arabic{mtc}}
\newcounter{minitocdepth}
\setcounter{minitocdepth}{2}
\def\mtc@rule{\kern-3\p@ \hrule \@width\columnwidth \kern2.6\p@}
\let\mlf@rule\mtc@rule
\let\mlt@rule\mtc@rule
\let\plf@rule\mtc@rule
\let\plt@rule\mtc@rule
\let\slf@rule\mtc@rule
\let\slt@rule\mtc@rule
\mtcindent=0\p@
\def\mtcfont{\fontsize{8}{10}\rmfamily\upshape\selectfont{}}
\def\mtcSfont{\fontsize{8}{10}\rmfamily\upshape\selectfont{}}
\let\mtcSSfont\mtcfont \let\mtcSSSfont\mtcfont
\let\mtcPfont\mtcfont  \let\mtcSPfont\mtcfont
\let\mlffont\mtcfont   \let\mlfSfont\mtcfont
\let\mltfont\mtcfont   \let\mltSfont\mtcfont
\def\mtifont{\sectionfont\rmfamily\upshape\bfseries}
\def\coffeefont{\footnotesize\rmfamily\slshape\mdseries}
\def\c@mti#1{\null\hfill #1\hfill\null}
\def\l@mti#1{\null #1\hfill\null}
\def\r@mti#1{\null\hfill #1\null}
\def\e@mti#1{\vspace{-\baselineskip}}
\def\n@mti#1{\vspace{-\baselineskip}}
\let\do@mtitc\l@mti
\let\df@mtitc\l@mti
\let\do@mtilf\l@mti
\let\df@mtilf\l@mti
\let\do@mtilt\l@mti
\let\df@mtilt\l@mti
\def\mtc@verse#1{\let\\=\@centercr
  \list{}{%
     \itemsep=\z@ \itemindent=\z@ \partopsep=\z@
     \listparindent=\itemindent \topsep=1ex
     \iftightmtc \parsep=\z@ \fi \ifktightmtc \parskip=\z@ \fi
     \leftmargin=\mtcindent \rightmargin=\leftmargin
     \addtolength{\leftmargin}{+#1}%
     \addtolength{\rightmargin}{-#1}%
  }%
  \item[]}
\def\endmtc@verse{\nopagebreak[4]\endlist}
\def\minitoc{\@ifnextchar[{\minitoc@}{\minitoc@[d]}}
\def\minitoc@[#1]{%
\global\@minitoc@used@true
\if@mtc@longext@
   \def\@tocfile{mtc\The@mtc}%
\else
   \def\@tocfile{M\The@mtc}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@minitoc@true
        \else
        \thispageminitocstyle
%%        \mtc@markboth{\MakeUppercase{\mtctitle}}{\MakeUppercase{\mtctitle}}%
        \beforeminitoc
        \relax\begin{samepage}%
        \if #1e\let\do@mtitc\e@mti
         \else\if #1n\let\do@mtitc\n@mti
         \else\if #1c\let\do@mtitc\c@mti
         \else\if #1l\let\do@mtitc\l@mti
         \else\if #1r\let\do@mtitc\r@mti
         \else\if #1d\let\do@mtitc\df@mtitc
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\mtctitle}\if@mtc@FE \let\do@mtitc\e@mti\relax\fi
        \raggedright
        \parskip=\z@%
        \reset@font\mtcfont%
        \parindent=\z@%
        \nopagebreak[4]%
        \nopagebreak[4]%
        \par\noindent %%
        \ifx\mtc@rule\relax
         \begin{tabular}{@{}p{\columnwidth}@{}}
         \reset@font\mtifont\do@mtitc{\mtc@v\mtctitle}\\
         \end{tabular}%
        \else
         \begin{tabular}{@{}p{\columnwidth}@{}}
         \reset@font\mtifont\do@mtitc{\mtc@v\mtctitle}\\\hline
         \end{tabular}%
        \fi
        \nopagebreak[4]
        \kern-0.8\baselineskip
        \nopagebreak[4]
        \null\leavevmode\mtc@zrule\\\mtc@BBR
        \leftmargin0pt \rightmargin\mtcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{mtc@verse}{\mtcoffset}%
        \c@tocdepth=\c@minitocdepth
        \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{mtc@pgno}%
  {\let\@dottedtocline\@undottedtocline}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \mtc@setform%
  \openminitoc \global\inminitoctrue
  \@input{\jobname.\@tocfile}%
  \global\inminitocfalse\closeminitoc
  \vspace{-1ex} \vspace{-\baselineskip}
  \leavevmode\mtc@strut
  \global\@nobreakfalse\endgroup
        \end{mtc@verse}%
        \kernafterminitoc
        \nopagebreak[4]\mtc@bottom@rule\null\leavevmode\\%
        \vskip-2.5\baselineskip\mtc@zrule\end{samepage}%
        \par\pagebreak[1]\vspace*{-1ex}\afterminitoc\fi}
\def\mtc@bottom@rule{%
  \ifx\mtc@rule\relax\relax\else
      \vskip -2.5ex
        \rule[2.4\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}\fi}
\def\minilof{\@ifnextchar[{\minilof@}{\minilof@[d]}}
\def\minilof@[#1]{%
\global\@minilof@used@true
\if@mtc@longext@%
   \def\@tocfile{mlf\The@mtc}%
\else
   \def\@tocfile{F\The@mtc}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@minilof@true
        \else
        \thispageminilofstyle
%%        \mtc@markboth{\MakeUppercase{\mlftitle}}{\MakeUppercase{\mlftitle}}%
        \beforeminilof
        \relax\begin{samepage}%
        \if #1e\let\do@mtilf\e@mti
        \else\if #1n\let\do@mtilf\n@mti
        \else\if #1c\let\do@mtilf\c@mti
        \else\if #1l\let\do@mtilf\l@mti
        \else\if #1r\let\do@mtilf\r@mti
        \else\if #1d\let\do@mtilf\df@mtilf
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\mlftitle}\if@mtc@FE \let\do@mtilf\e@mti\relax\fi
        \raggedright
        \parskip=\z@
        \reset@font\mlffont
        \parindent=\z@
        \nopagebreak[4]%
        \kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent
        \ifx\mlf@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\mtifont\do@mtilf{\mtc@v\mlftitle}\\
        \end{tabular}%
        \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\mtifont\do@mtilf{\mtc@v\mlftitle}\\\hline
        \end{tabular}%
        \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\\mtc@BBR
        \leftmargin0pt \rightmargin\mtcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{mtc@verse}{\mlfoffset}%
        \@ifundefined{c@lofdepth}{}%
          {\c@lofdepth=\c@minilofdepth
         \ifnum\c@lofdepth<1\relax\c@lofdepth=1\fi}
         \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{mlf@pgno}%
  {\let\@dottedtocline\@undottedtocline}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \mlf@setform
  \global\openminilof\inminiloftrue
  \@input{\jobname.\@tocfile}%
  \global\inminiloffalse\closeminilof
  \vspace{-1ex} \vspace{-\baselineskip}
  \leavevmode\mtc@strut
  \global\@nobreakfalse\endgroup
        \end{mtc@verse}%
        \kernafterminilof
        \nopagebreak[4]\mlf@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\pagebreak[1]\vspace*{-1ex}\afterminilof\fi}%
\def\minilot{\@ifnextchar[{\minilot@}{\minilot@[d]}}
\def\minilot@[#1]{%
\global\@minilot@used@true
\if@mtc@longext@%
   \def\@tocfile{mlt\The@mtc}%
\else
   \def\@tocfile{T\The@mtc}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@minilot@true
        \else
        \thispageminilotstyle
%%        \mtc@markboth{\MakeUppercase{\mlttitle}}{\MakeUppercase{\mlttitle}}%
        \beforeminilot
        \relax\begin{samepage}%
        \if #1e\let\do@mtilt\e@mti
        \else\if #1n\let\do@mtilt\n@mti
        \else\if #1c\let\do@mtilt\c@mti
        \else\if #1l\let\do@mtilt\l@mti
        \else\if #1r\let\do@mtilt\r@mti
        \else\if #1d\let\do@mtilt\df@mtilt
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\mlttitle}\if@mtc@FE \let\do@mtilt\e@mti\relax\fi
        \raggedright
        \parskip=\z@%
        \reset@font\mltfont%
        \parindent=\z@%
        \nopagebreak[4]%
        \kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent
        \ifx\mlt@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\mtifont\do@mtilt{\mtc@v\mlttitle}\\
        \end{tabular}%
      \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\mtifont\do@mtilt{\mtc@v\mlttitle}\\\hline
        \end{tabular}%
      \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\\mtc@BBR
        \leftmargin0pt \rightmargin\mtcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{mtc@verse}{\mltoffset}%
        \@ifundefined{c@lotdepth}{}%
        {\c@lotdepth=\c@minilotdepth
         \ifnum\c@lotdepth<1\relax\c@lotdepth=1\fi}
         \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{mlt@pgno}%
  {\let\@dottedtocline\@undottedtocline}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \mlt@setform
  \global\openminilot\inminilottrue
  \@input{\jobname.\@tocfile}%
  \global\inminilotfalse\closeminilot
  \vspace{-1ex} \vspace{-\baselineskip}
  \leavevmode\mtc@strut
  \global\@nobreakfalse\endgroup
        \end{mtc@verse}%
        \kernafterminilot
        \nopagebreak[4]\mlt@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\pagebreak[1]\vspace*{-1ex}\afterminilot\fi}%
\def\l@xchapter{\@dottedtocline{\@M}{1em}{2.3em}}
\def\xchapter{xchapter}
\let\sv@chapter\@chapter
\def\@chapter[#1]#2{\sv@chapter[{#1}]{#2}\relax%
   \addcontentsline{lof}{xchapter}{#1}%
   \addcontentsline{lot}{xchapter}{#1}%
   \ignorespaces}
\let\mtc@schapter\@schapter
\def\@schapter{\addtocontents{toc}{\protect\chapterend}\mtc@schapter}
\def\@schapter{\addtocontents{@@@}{\protect\chapterbegin}\mtc@schapter}
\let\chapterbegin\relax
\let\chapterend\relax
\@ifundefined{chapter}%
   {\@ifundefined{section}%
      {}{\def\addstarredsection#1{\addst@rred{section}{#1}}}}%
   {\def\addstarredchapter#1{\addst@rred{chapter}{#1}}}
\@ifundefined{part}%
   {}{\def\addstarredpart#1{\addst@rred{part}{#1}}}
\def\@Undottedtocline#1#2#3#4#5{%
  \ifnum #1>\c@tocdepth\relax \else
    \vskip \z@ \@plus.2\p@
    {\leftskip #2\relax \rightskip \@tocrmarg \parfillskip -\rightskip
     \parindent #2\relax\@afterindenttrue
     \interlinepenalty\@M
     \leavevmode
     \@tempdima #3\relax
     \advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
     {\coffeefont #4}\nobreak \nobreak\null
    \par}%
  \fi}
\def\@Undottedtoclinep#1#2#3#4#5{%
  \ifnum #1>\c@tocdepth\relax \else
    \vskip \z@ \@plus.2\p@
    {\leftskip #2\relax \rightskip \@tocrmarg \parfillskip -\rightskip
     \parindent #2\relax\@afterindenttrue
     \interlinepenalty\@M
     \leavevmode
     \@tempdima #3\relax
     \advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
     {#4}\nobreak \hfill \nobreak\null
     \hb@xt@\@pnumwidth{\hfil\normalfont \normalcolor #5}%
    \par}%
  \fi}
\@ifundefined{chapter}{}{%
   \let\sv@minitoc@\minitoc@
   \def\minitoc@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
      \sv@minitoc@[#1]}}%
   \let\sv@minilof@\minilof@
   \def\minilof@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
      \sv@minilof@[#1]}}%
   \let\sv@minilot@\minilot@
   \def\minilot@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
      \sv@minilot@[#1]}}}
\@ifundefined{part}{}{%
   \let\sv@parttoc@\parttoc@
   \def\parttoc@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
      \sv@parttoc@[#1]}}%
   \let\sv@partlof@\partlof@
   \def\partlof@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
      \sv@partlof@[#1]}}%
   \let\sv@partlot@\partlot@
   \def\partlot@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
      \sv@partlot@[#1]}}}
\@ifundefined{chapter}{%
   \@ifundefined{section}{}{%
      \let\sv@secttoc@\secttoc@
      \def\secttoc@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
         \sv@secttoc@[#1]}}%
      \let\sv@sectlof@\sectlof@
      \def\sectlof@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
         \sv@sectlof@[#1]}}%
      \let\sv@sectlot@\sectlot@
      \def\sectlot@[#1]{{\ifundottedmtc\let\@dottedtocline\@Undottedtoclinep\fi
         \sv@sectlot@[#1]}}}}{}
\def\@dominitoc#1{{%
  \makeatletter
  \setcounter{mtc}{0}
  \MTC@next#1.toc\relax\\}\setcounter{mtc}{0}}
\def\dominitoc{\@ifnextchar[{\dominitoc@}{\dominitoc@[l]}}
\def\@dominilof#1{{%
  \makeatletter
  \setcounter{mtc}{0}
  \MLF@next#1.lof\relax\\}\setcounter{mtc}{0}}
\def\dominilof{\@ifnextchar[{\dominilof@}{\dominilof@[l]}}
\def\@dominilot#1{{%
  \makeatletter
  \setcounter{mtc}{0}
  \MLT@next#1.lot\relax\\}\setcounter{mtc}{0}}
\def\dominilot{\@ifnextchar[{\dominilot@}{\dominilot@[l]}}
\def\dominitoc@[#1]{%
\if@mtc@hints@
   \if@dominitoc@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dominitoc \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dominitoc@used@true
\if #1e\let\df@mtitc\e@mti%
\else\if #1n\let\df@mtitc\n@mti%
\else\if #1c\let\df@mtitc\c@mti%
\else\if #1l\let\df@mtitc\l@mti%
\else\if #1r\let\df@mtitc\r@mti%
\fi\fi\fi\fi\fi%
\@@dominitoc}
\def\dominilof@[#1]{%
\if@mtc@hints@
   \if@dominilof@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dominilof \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dominilof@used@true
\if #1e\let\df@mtilf\e@mti%
\else\if #1n\let\df@mtilf\n@mti%
\else\if #1c\let\df@mtilf\c@mti%
\else\if #1l\let\df@mtilf\l@mti%
\else\if #1r\let\df@mtilf\r@mti%
\fi\fi\fi\fi\fi%
\@@dominilof}
\def\dominilot@[#1]{%
\if@mtc@hints@
   \if@dominilot@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dominilot \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dominilot@used@true
\if #1e\let\df@mtilt\e@mti%
\else\if #1n\let\df@mtilt\n@mti%
\else\if #1c\let\df@mtilt\c@mti%
\else\if #1l\let\df@mtilt\l@mti%
\else\if #1r\let\df@mtilt\r@mti%
\fi\fi\fi\fi\fi%
\@@dominilot}
\def\@@dominitoc{\@dominitoc{\jobname}\immediate\closeout\tf@mtc}
\def\@@dominilof{\@dominilof{\jobname}\immediate\closeout\tf@mtc}
\def\@@dominilot{\@dominilot{\jobname}\immediate\closeout\tf@mtc}
\def\MTC@next#1\relax#2\\{%
  \edef\MTC@list{#2}%
  \MTC@loop{#1}%
}
\def\MTC@toc{%
  \ifx\MTC@list\@empty\else\expandafter\MTC@explist\fi
}
\def\MTC@contentsline#1#2#3#4{%
  \gdef\themtc{\arabic{mtc}}%
  \expandafter\ifx\csname #1\endcsname\chapter
    \stepcounter{mtc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.mtc\themtc\@gobble}%
      \def\mtcname{\jobname.mtc\themtc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.M\themtc\@gobble}%
      \def\mtcname{\jobname.M\themtc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\mtcname
  \fi
  \expandafter\ifx\csname #1\endcsname\appendix
    \stepcounter{mtc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.mtc\themtc\@gobble}%
      \def\mtcname{\jobname.mtc\themtc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.M\themtc\@gobble}%
      \def\mtcname{\jobname.M\themtc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\mtcname
  \fi
  \mtc@toks{\noexpand\leavevmode #2}%
  \expandafter\ifx\csname #1\endcsname\section
    \MTC@WriteContentsline{#1}{mtcS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subsection
    \MTC@WriteContentsline{#1}{mtcSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subsubsection
    \MTC@WriteContentsline{#1}{mtcSSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\paragraph
    \MTC@WriteContentsline{#1}{mtcP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subparagraph
    \MTC@WriteContentsline{#1}{mtcSP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\coffee
    \MTC@WriteCoffeeline{#1}{#3}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starchapter
    \stepcounter{mtc}%
    \if@mtc@longext@
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.mtc\themtc\@gobble}%
      \def\mtcname{\jobname.mtc\themtc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.M\themtc\@gobble}%
      \def\mtcname{\jobname.M\themtc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\mtcname
  \fi
  \expandafter\ifx\csname #1\endcsname\starsection
    \MTC@WriteContentsline{#1}{mtcS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubsection
    \MTC@WriteContentsline{#1}{mtcSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubsubsection
    \MTC@WriteContentsline{#1}{mtcSSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starparagraph
    \MTC@WriteContentsline{#1}{mtcP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubparagraph
    \MTC@WriteContentsline{#1}{mtcSP}{#3}{#4}%
  \fi
}
\def\MTC@explist{\expandafter\MTC@next\MTC@list\\}
\def\MTC@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0010]{minitoc}%
       {No file #1.
        \MessageBreak
        MINITOCS NOT PREPARED}%
    \expandafter\MTC@toc
  \else
    \mtcPackageInfo[I0024]{minitoc}{PREPARING MINITOCS FROM #1}%
    \expandafter\MTC@read
  \fi
}
\def\MTC@read{%
  \read\@inputcheck to\MTC@line
  \expandafter\MTC@test\MTC@line.....\MTC@%
}%
\long\def\MTC@test#1#2#3#4#5#6\MTC@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \MTC@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
    \edef\MTC@list{\MTC@list#2\relax}%
  \else\ifx#1\chapterend
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\chapterbegin
    \addtocounter{mtc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck
    \expandafter\MTC@toc
  \else
    \expandafter\MTC@read
  \fi
}%
\def\MLF@next#1\relax#2\\{%
  \edef\MLF@list{#2}%
  \MLF@loop{#1}}
\def\MLF@lof{%
  \ifx\MLF@list\@empty\else\expandafter\MLF@explist\fi}
\def\MLF@contentsline#1#2#3#4{%
  \gdef\themtc{\arabic{mtc}}%
  \expandafter\ifx\csname #1\endcsname\xchapter
    \stepcounter{mtc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.mlf\themtc\@gobble}
      \def\mlfname{\jobname.mlf\themtc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.F\themtc\@gobble}
      \def\mlfname{\jobname.F\themtc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\mlfname
  \fi
  \expandafter\ifx\csname #1\endcsname\figure
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{mlf}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subfigure
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{mlfS}{#3}{#4}%
  \fi
}
\def\MLF@explist{\expandafter\MLF@next\MLF@list\\}
\def\MLF@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0008]{minitoc}%
       {No file #1.
        \MessageBreak
        MINILOFS NOT PREPARED}%
    \expandafter\MLF@lof
  \else
    \mtcPackageInfo[I0034]{minitoc}%
       {PREPARING MINILOFS FROM #1}%
    \expandafter\MLF@read\fi}
\def\MLF@read{%
  \read\@inputcheck to\MLF@line
  \expandafter\MLF@test\MLF@line.....\MLF@%
  }%
\long\def\MLF@test#1#2#3#4#5#6\MLF@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \MLF@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\MLF@list{\MLF@list#2\relax}%
  \else\ifx#1\chapterend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\chapterbegin
    \addtocounter{mtc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\MLF@lof
  \else\expandafter\MLF@read\fi}%
\def\MLT@next#1\relax#2\\{%
  \edef\MLT@list{#2}%
  \MLT@loop{#1}}
\def\MLT@lot{%
  \ifx\MLT@list\@empty\else\expandafter\MLT@explist\fi}
\def\MLT@contentsline#1#2#3#4{%
  \gdef\themtc{\arabic{mtc}}%
  \expandafter\ifx\csname #1\endcsname\xchapter
    \stepcounter{mtc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.mlt\themtc\@gobble}%
      \def\mltname{\jobname.mlt\themtc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.T\themtc\@gobble}%
      \def\mltname{\jobname.T\themtc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\mltname
  \fi
  \expandafter\ifx\csname #1\endcsname\table
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{mlt}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subtable
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{mltS}{#3}{#4}%
  \fi
}
\def\MLT@explist{\expandafter\MLT@next\MLT@list\\}
\def\MLT@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0009]{minitoc}%
       {No file #1.
        \MessageBreak
        MINILOTS NOT PREPARED}%
    \expandafter\MLT@lot
  \else
    \mtcPackageInfo[I0037]{minitoc}%
       {PREPARING MINILOTS FROM #1}%
    \expandafter\MLT@read\fi}
\def\MLT@read{%
  \read\@inputcheck to\MLT@line
  \expandafter\MLT@test\MLT@line.....\MLT@%
  }%
\long\def\MLT@test#1#2#3#4#5#6\MLT@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \MLT@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\MLT@list{\MLT@list#2\relax}%
  \else\ifx#1\chapterend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\chapterbegin
    \addtocounter{mtc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\MLT@lot
  \else\expandafter\MLT@read\fi}%
}%
\def\mtc@dot{.}
\def\MTC@WriteContentsline#1#2#3#4{%
  \def\mtc@param{#4}%
   \immediate\write\tf@mtc{%
    {\string\reset@font
     \expandafter\string\csname #2font\endcsname
     \string\mtc@string
     \string\contentsline{#1}%
     {\the\mtc@toks}%
     {\string\reset@font
      \expandafter\string\csname #2font\endcsname
      \space #3%
     }%
     \ifx\mtc@dot\mtc@param
     \else
       {#4}%
     \fi
    }%
  }%
}
\def\MTC@WriteCoffeeline#1#2#3{%
  \immediate\write\tf@mtc{%
    {\string\reset@font \string\coffeefont \string\mtc@string
     {\the\mtc@toks}%
     {\string\reset@font \string\coffeefont \space #3%
     }%
    }%
  }%
}
\AtBeginDocument{%
 \@ifundefined{c@lofdepth}{}%
   {\newcounter{partlofdepth}\setcounter{partlofdepth}{2}}%
 \@ifundefined{c@lotdepth}{}%
   {\newcounter{partlotdepth}\setcounter{partlotdepth}{2}}%
}%
\@ifundefined{part}{}%
{%
\def\xpart{xpart}
\def\Thepart{\arabic{ptc}}
\def\firstpartis#1%
  {\mtcPackageWarning[W0004]{minitoc}%
     {\string\firstpartis \space is an obsolete (ignored)
      \MessageBreak
      command}%
     \@firstpartis@used@true}
\newcounter{ptc}
\setcounter{ptc}{0}
\newcommand{\adjustptc}[1][1]{\addtocounter{ptc}{#1}}
\def\decrementptc{\addtocounter{ptc}{-1}}
\def\incrementptc{\addtocounter{ptc}{+1}}
\def\theptc{\arabic{ptc}}
\newcounter{parttocdepth}
\setcounter{parttocdepth}{2}
\@ifundefined{chapter}%
   {\def\ptc@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}}%
   {\let\ptc@rule\relax}
\newlength\ptcindent
\@ifundefined{chapter}{\ptcindent=24\p@}{\ptcindent=\z@}
\@ifundefined{chapter}{%
   \def\ptcfont{\footnotesize\rmfamily\upshape\mdseries} % the parttoc
   \def\ptcSfont{\footnotesize\rmfamily\upshape\bfseries}% (sections)
   \let\ptcSSfont\ptcfont     % (subsections)
   \let\ptcSSSfont\ptcfont    % (subsubsections)
   \let\ptcPfont\ptcfont      % (paragraphs)
   \let\ptcSPfont\ptcfont     % (subparagraphs)
   \let\plffont\ptcfont       % (figures)
   \let\plfSfont\ptcfont      % (subfigures)
   \let\pltfont\ptcfont       % (tables)
   \let\pltSfont\ptcfont      % (subtables)
   \def\ptifont{\Large\rmfamily\upshape\bfseries}% titles
}%
{%
   \def\ptcfont{\normalsize\rmfamily\upshape\mdseries} % the parttoc
   \def\ptcCfont{\normalsize\rmfamily\upshape\bfseries}% (chapters)
   \def\ptcSfont{\normalsize\rmfamily\upshape\mdseries}% (sections)
   \let\ptcSSfont\ptcfont     % (subsections)
   \let\ptcSSSfont\ptcfont    % (subsubsections)
   \let\ptcPfont\ptcfont      % (paragraphs)
   \let\ptcSPfont\ptcfont     % (subparagraphs)
   \let\plffont\ptcfont       % (figures)
   \let\plfSfont\ptcfont      % (subfigures)
   \let\pltfont\ptcfont       % (tables)
   \let\pltSfont\ptcfont      % (subtables)
   \def\ptifont{\LARGE\rmfamily\upshape\bfseries}% titles
}
\@ifundefined{chapter}{%
  \def\c@pti#1{\null\hfill #1\hfill\null}
  \def\l@pti#1{\null #1\hfill\null}
  \def\r@pti#1{\null\hfill #1\null}
  \def\e@pti#1{\vspace{-\baselineskip}}
  \def\n@pti#1{\vspace{-\baselineskip}}}%
{%
\def\e@pti#1{\vspace{-\baselineskip}} \def\n@pti#1{\vspace{-\baselineskip}}
\def\l@pti#1{\if@twocolumn \@topnewpage[\@makephead@l{#1}]%
    \else \@makephead@l{#1}\@afterheading \fi}
\def\@makephead@l#1{%
    \vspace*{\mtcgapbeforeheads}%
    {\parindent \z@ \raggedright \ptifont #1\par \nobreak
     \vskip \mtcgapafterheads\hbox{}
    }}
\def\r@pti#1{\if@twocolumn \@topnewpage[\@makephead@r{#1}]
    \else \@makephead@r{#1}\@afterheading \fi}
\def\@makephead@r#1{%
    \vspace*{\mtcgapbeforeheads}%
    {\parindent \z@ \raggedleft \ptifont #1\par \nobreak
     \vskip \mtcgapafterheads\hbox{}
    }}
\def\c@pti#1{\if@twocolumn \@topnewpage[\@makephead@c{#1}]%
    \else \@makephead@c{#1}\@afterheading \fi}
\def\@makephead@c#1{%
    \vspace*{\mtcgapbeforeheads}%
    {\parindent \z@ \centering \ptifont #1\par \nobreak
     \vskip \mtcgapafterheads\hbox{}
    }}%
}
\let\do@ptitc\l@pti \let\df@ptitc\l@pti
\let\do@ptilf\l@pti \let\df@ptilf\l@pti
\let\do@ptilt\l@pti \let\df@ptilt\l@pti
\def\ptc@verse#1{\let\\=\@centercr
  \list{}{%
     \topsep=1ex \itemsep=\z@   \itemindent=\z@
     \listparindent=\itemindent \partopsep=\z@
     \leftmargin=\ptcindent     \rightmargin=\leftmargin
     \iftightmtc \parsep=\z@ \fi
     \ifktightmtc \parskip=\z@ \fi
     \addtolength{\leftmargin}{+#1}
     \addtolength{\rightmargin}{-#1}
     }%
  \item[]}
\def\endptc@verse{\nopagebreak[4]\endlist}
\def\parttoc{\@ifnextchar[{\parttoc@}{\parttoc@[d]}}
\def\parttoc@[#1]{%
\global\@parttoc@used@true
\if@mtc@longext@%
   \def\@tocfile{ptc\Thepart}%
\else
   \def\@tocfile{P\Thepart}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@parttoc@true
        \else
        \beforeparttoc
        \@ifundefined{chapter}{}{%
        \global\let\mtc@markboth\markboth \global\let\@mkboth\markboth
        \thispageparttocstyle
        \mtc@markboth{\MakeUppercase{\ptctitle}}{\MakeUppercase{\ptctitle}}}%
        \relax\begin{samepage}%
        \if #1e\let\do@ptitc\e@pti
        \else\if #1n\let\do@ptitc\n@pti
        \else\if #1c\let\do@ptitc\c@pti
        \else\if #1l\let\do@ptitc\l@pti
        \else\if #1r\let\do@ptitc\r@pti
        \else\if #1d\let\do@ptitc\df@ptitc
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\ptctitle}\if@mtc@FE \let\do@ptitc\e@pti\relax\fi
        \raggedright \reset@font\ptcfont \parskip=\z@ \parindent=\z@%
        \nopagebreak[4]\kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent \nopagebreak[4]%
        \ifx\ptc@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\ptifont\do@ptitc{\mtc@v\ptctitle}\\
        \end{tabular}%
        \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\ptifont\do@ptitc{\mtc@v\ptctitle}\\\hline
        \end{tabular}%
        \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\*[-\baselineskip]\mtc@BBR
        \leftmargin\ptcindent \rightmargin\ptcindent
        \itemindent=\z@ \labelwidth=\z@ \labelsep=\z@ \listparindent=\z@%
        \begin{ptc@verse}{\ptcoffset}\c@tocdepth=\c@parttocdepth%
        \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{ptc@pgno}%
    {\let\@dottedtocline\@undottedtocline}{}
  \@ifundefined{ptc@pgno}%
    {\let\l@chapter@SVPN\l@chapter%
     \def\l@chapter##1##2{\l@chapter@SVPN{##1}{\hbox{}}}}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \ptc@setform
  \openparttoc\global\inparttoctrue
  \@input{\jobname.\@tocfile}%
  \global\inparttocfalse\closeparttoc
  \vspace{-1ex} \vspace{-1\baselineskip}
  \leavevmode\mtc@strut
  \global\@nobreakfalse\endgroup
        \end{ptc@verse}%
        \kernafterparttoc
        \nopagebreak[4]\ptc@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\@ifundefined{chapter}{\pagebreak[1]\vspace*{-1ex}}%
        \afterparttoc\fi}%
\def\partlof{\@ifnextchar[{\partlof@}{\partlof@[d]}}
\def\partlof@[#1]{%
\global\@partlof@used@true
\if@mtc@longext@%
   \def\@tocfile{plf\Thepart}%
\else
   \def\@tocfile{G\Thepart}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@partlof@true
        \else
        \beforepartlof
        \@ifundefined{chapter}{}%
        {\global\let\mtc@markboth\markboth
         \global\let\@mkboth\markboth
         \thispagepartlofstyle
         \mtc@markboth{\MakeUppercase{\plftitle}}{\MakeUppercase{\plftitle}}%
        }%
        \relax\begin{samepage}%
        \if #1e\let\do@ptilf\e@pti
        \else\if #1n\let\do@ptilf\n@pti
        \else\if #1c\let\do@ptilf\c@pti
        \else\if #1l\let\do@ptilf\l@pti
        \else\if #1r\let\do@ptilf\r@pti
        \else\if #1d\let\do@ptilf\df@ptilf
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\plftitle}\if@mtc@FE \let\do@ptilf\e@pti\relax\fi
        \raggedright
        \parskip=\z@%
        \reset@font\plffont%
        \parindent=\z@%
        \nopagebreak[4]%
        \kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent
        \ifx\plf@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\ptifont\do@ptilf{\mtc@v\plftitle}\\
        \end{tabular}%
        \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\ptifont\do@ptilf{\mtc@v\plftitle}\\\hline
        \mtc@hstrut\\
        \end{tabular}%
        \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\*[-\baselineskip]\mtc@BBR
        \leftmargin\ptcindent \rightmargin\ptcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{ptc@verse}{\plfoffset}%
        \@ifundefined{c@lofdepth}{}%
         {\c@lofdepth=\c@partlofdepth
          \ifnum\c@lofdepth<1\relax\c@lofdepth=1\fi}
        \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{plf@pgno}%
   {\let\@dottedtocline\@undottedtocline}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \plf@setform
  \openpartlof\global\inpartloftrue
  \@input{\jobname.\@tocfile}%
  \global\inpartloffalse\closepartlof
  \vspace{-1ex} \vspace{-1\baselineskip}
  \leavevmode\mtc@strut
  \global\@nobreakfalse\endgroup
        \end{ptc@verse}%
        \kernafterpartlof
        \nopagebreak[4]\plf@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\@ifundefined{chapter}{\pagebreak[1]\vspace*{-1ex}}%
        \afterpartlof\fi}
\def\partlot{\@ifnextchar[{\partlot@}{\partlot@[d]}}
\def\partlot@[#1]{%
\global\@partlot@used@true
\if@mtc@longext@%
   \def\@tocfile{plt\Thepart}%
\else
   \def\@tocfile{U\Thepart}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@partlof@true
        \else
        \beforepartlot
        \@ifundefined{chapter}{}{%
         \global\let\mtc@markboth\markboth
         \global\let\@mkboth\markboth
         \thispagepartlotstyle
         \mtc@markboth{\MakeUppercase{\plttitle}}{\MakeUppercase{\plttitle}}%
        }%
        \relax\begin{samepage}%
        \if #1e\let\do@ptilt\e@pti
        \else\if #1n\let\do@ptilt\n@pti
        \else\if #1c\let\do@ptilt\c@pti
        \else\if #1l\let\do@ptilt\l@pti
        \else\if #1r\let\do@ptilt\r@pti
        \else\if #1d\let\do@ptilt\df@ptilt
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\plttitle}\if@mtc@FE \let\do@ptilt\e@pti\relax\fi
        \raggedright
        \parskip=\z@%
        \reset@font\pltfont%
        \parindent=\z@%
        \nopagebreak[4]%
        \kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent
        \ifx\plt@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\ptifont\do@ptilt{\mtc@v\plttitle}\\
        \end{tabular}%
        \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\ptifont\do@ptilt{\mtc@v\plttitle}\\\hline
        \mtc@hstrut\\
        \end{tabular}%
        \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\*[-\baselineskip]\mtc@BBR
        \leftmargin\ptcindent \rightmargin\ptcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{ptc@verse}{\pltoffset}%
        \@ifundefined{c@lotdepth}{}%
        {\c@lotdepth=\c@partlotdepth
         \ifnum\c@lotdepth<1\relax\c@lotdepth=1\fi}
        \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{plt@pgno}%
   {\let\@dottedtocline\@undottedtocline}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \plt@setform
  \openpartlot\global\inpartlottrue
  \@input{\jobname.\@tocfile}%
  \global\inpartlotfalse\closepartlot
  \vspace{-1ex} \vspace{-1\baselineskip}
  \leavevmode\mtc@strut
  \global\@nobreakfalse\endgroup
        \end{ptc@verse}%
        \kernafterpartlot
        \nopagebreak[4]\plt@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\@ifundefined{chapter}{\pagebreak[1]\vspace*{-1ex}}%
        \afterpartlot\fi}
\def\l@xpart{\@dottedtocline{\@M}{1.0em}{2.3em}}
\def\l@pchapter{\@dottedtocline{1}{1.0em}{2.3em}}
\def\l@psect{\@dottedtocline{2}{1.0em}{2.3em}}
\def\pchapter{pchapter}
\def\psect{psect}
\let\sv@part\mtc@svpart
\def\@part[#1]#2{\sv@part[{#1}]{#2}\relax
\addcontentsline{lof}{xpart}{#1}%
\addcontentsline{lot}{xpart}{#1}%
\addcontentsline{toc}{xpart}{#1}%
\stepcounter{ptc}}
\let\sv@spart\@spart
\def\@spart{\stepcounter{ptc}\sv@spart}
\let\ptc@spart\@spart
\def\@spart{\addtocontents{toc}{\protect\partend}\ptc@spart}
\def\@spart{\addtocontents{toc}{\protect\partbegin}\ptc@spart}
\let\partend\relax
\let\partbegin\relax
\def\@doparttoc#1{{%
  \makeatletter
  \setcounter{ptc}{0}%
  \PTC@next#1.toc\relax\\}\setcounter{ptc}{0}}%
\def\@dopartlof#1{{%
  \makeatletter
  \setcounter{ptc}{0}%
  \PLF@next#1.lof\relax\\}\setcounter{ptc}{0}}%
\def\@dopartlot#1{{%
  \makeatletter
  \setcounter{ptc}{0}%
  \PLT@next#1.lot\relax\\}\setcounter{ptc}{0}}%
\def\doparttoc{\@ifnextchar[{\doparttoc@}{\doparttoc@[l]}}
\def\dopartlof{\@ifnextchar[{\dopartlof@}{\dopartlof@[l]}}
\def\dopartlot{\@ifnextchar[{\dopartlot@}{\dopartlot@[l]}}
\def\doparttoc@[#1]{%
\if@mtc@hints@
   \if@doparttoc@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\doparttoc \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@doparttoc@used@true
\if #1e\let\df@ptitc\e@pti%
\else\if #1n\let\df@ptitc\n@pti%
\else\if #1c\let\df@ptitc\c@pti%
\else\if #1l\let\df@ptitc\l@pti%
\else\if #1r\let\df@ptitc\r@pti%
\fi\fi\fi\fi\fi%
\@@doparttoc}
\def\dopartlof@[#1]{%
\if@mtc@hints@
   \if@dopartlof@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dopartlof \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dopartlof@used@true
\if #1e\let\df@ptilf\e@pti%
\else\if #1n\let\df@ptilf\n@pti%
\else\if #1c\let\df@ptilf\c@pti%
\else\if #1l\let\df@ptilf\l@pti%
\else\if #1r\let\df@ptilf\r@pti%
\fi\fi\fi\fi\fi%
\@@dopartlof}
\def\dopartlot@[#1]{%
\if@mtc@hints@
   \if@dopartlot@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dopartlot \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dopartlot@used@true
\if #1e\let\df@ptilt\e@pti%
\else\if #1n\let\df@ptilt\n@pti%
\else\if #1c\let\df@ptilt\c@pti%
\else\if #1l\let\df@ptilt\l@pti%
\else\if #1r\let\df@ptilt\r@pti%
\fi\fi\fi\fi\fi%
\@@dopartlot}
\def\@@doparttoc{\@doparttoc{\jobname}\immediate\closeout\tf@mtc}
\def\@@dopartlof{\@dopartlof{\jobname}\immediate\closeout\tf@mtc}
\def\@@dopartlot{\@dopartlot{\jobname}\immediate\closeout\tf@mtc}
\def\PTC@next#1\relax#2\\{%
  \edef\PTC@list{#2}%
  \PTC@loop{#1}}
\def\PTC@toc{%
  \ifx\PTC@list\@empty\else\expandafter\PTC@explist\fi}
\def\PTC@contentsline#1#2#3#4{%
  \expandafter\ifx\csname #1\endcsname\part
    \stepcounter{ptc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.ptc\theptc\@gobble}%
      \def\ptcname{\jobname.ptc\theptc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.P\theptc\@gobble}%
      \def\ptcname{\jobname.P\theptc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\ptcname
  \fi
  \expandafter\ifx\csname #1\endcsname\starpart\relax
    \stepcounter{ptc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.ptc\theptc}%
      \def\ptcname{\jobname.ptc\theptc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.P\theptc}%
      \def\ptcname{\jobname.P\theptc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\ptcname
  \fi
  \mtc@toks{\noexpand\leavevmode #2}%
  \expandafter\ifx\csname #1\endcsname\chapter
    \MTC@WriteContentsline{#1}{ptcC}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\appendix
    \MTC@WriteContentsline{#1}{ptcC}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\pchapter
    \MTC@WriteContentsline{#1}{ptcC}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\section
    \MTC@WriteContentsline{#1}{ptcS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\coffee
    \MTC@WriteCoffeeline{#1}{#3}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subsection
    \MTC@WriteContentsline{#1}{ptcSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subsubsection
    \MTC@WriteContentsline{#1}{ptcSSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\paragraph
    \MTC@WriteContentsline{#1}{ptcP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subparagraph
    \MTC@WriteContentsline{#1}{ptcSP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starchapter
    \MTC@WriteContentsline{#1}{ptcC}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsection
    \MTC@WriteContentsline{#1}{ptcS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubsection
    \MTC@WriteContentsline{#1}{ptcSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubsubsection
    \MTC@WriteContentsline{#1}{ptcSSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starparagraph
    \MTC@WriteContentsline{#1}{ptcP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubparagraph
    \MTC@WriteContentsline{#1}{ptcSP}{#3}{#4}%
  \fi
}
\def\PTC@explist{\expandafter\PTC@next\PTC@list\\}
\def\PTC@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0013]{minitoc}%
       {No file #1
        \MessageBreak
        PARTTOCS NOT PREPARED}%
    \expandafter\PTC@toc
  \else
    \mtcPackageInfo[I0025]{minitoc}%
       {PREPARING PARTTOCS FROM #1}%
    \expandafter\PTC@read\fi}
\def\PTC@read{%
  \read\@inputcheck to\PTC@line
  \expandafter\PTC@test\PTC@line.....\PTC@%
  }%
\long\def\PTC@test#1#2#3#4#5#6\PTC@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \PTC@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\PTC@list{\PTC@list#2\relax}%
  \else\ifx#1\partend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\partbegin
     \addtocounter{ptc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\PTC@toc
  \else\expandafter\PTC@read\fi}%
\def\PLF@next#1\relax#2\\{%
  \edef\PLF@list{#2}%
  \PLF@loop{#1}}
\def\PLF@lof{%
  \ifx\PLF@list\@empty\else\expandafter\PLF@explist\fi}
\def\PLF@contentsline#1#2#3#4{%
  \expandafter\ifx\csname #1\endcsname\xpart
    \stepcounter{ptc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.plf\theptc}%
      \def\plfname{\jobname.plf\theptc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.G\theptc}%
      \def\plfname{\jobname.G\theptc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\plfname
  \fi
  \expandafter\ifx\csname #1\endcsname\figure
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{plf}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subfigure
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{plfS}{#3}{#4}%
  \fi
}
\def\PLF@explist{\expandafter\PLF@next\PLF@list\\}
\def\PLF@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0011]{minitoc}%
       {No file #1
        \MessageBreak
        PARTLOFS NOT PREPARED}%
    \expandafter\PLF@lof
  \else
    \mtcPackageInfo[I0035]{minitoc}%
       {PREPARING PARTLOFS FROM #1}%
    \expandafter\PLF@read\fi}
\def\PLF@read{%
  \read\@inputcheck to\PLF@line
  \expandafter\PLF@test\PLF@line.....\PLF@%
  }%
\long\def\PLF@test#1#2#3#4#5#6\PLF@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \PLF@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\PLF@list{\PLF@list#2\relax}%
  \else\ifx#1\partend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\partbegin
     \addtocounter{ptc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\PLF@lof
  \else\expandafter\PLF@read\fi}%
\def\PLT@next#1\relax#2\\{%
  \edef\PLT@list{#2}%
  \PLT@loop{#1}}
\def\PLT@lot{%
  \ifx\PLT@list\@empty\else\expandafter\PLT@explist\fi}
\def\PLT@contentsline#1#2#3#4{%
  \expandafter\ifx\csname #1\endcsname\xpart
    \stepcounter{ptc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.plt\theptc}%
      \def\pltname{\jobname.plt\theptc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.U\theptc}%
      \def\pltname{\jobname.U\theptc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\pltname
  \fi
  \expandafter\ifx\csname #1\endcsname\table
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{plt}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subtable
    \mtc@toks{\noexpand\leavevmode#2}%
    \MTC@WriteContentsline{#1}{pltS}{#3}{#4}%
  \fi
}
\def\PLT@explist{\expandafter\PLT@next\PLT@list\\}
\def\PLT@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0012]{minitoc}%
       {No file #1
        \MessageBreak
        PARTLOTS NOT PREPARED}%
    \expandafter\PLT@lot
  \else
    \mtcPackageInfo[I0038]{minitoc}%
       {PREPARING PARTLOTS FROM #1}%
    \expandafter\PLT@read\fi}
\def\PLT@read{%
  \read\@inputcheck to\PLT@line
  \expandafter\PLT@test\PLT@line.....\PLT@%
  }%
\long\def\PLT@test#1#2#3#4#5#6\PLT@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \PLT@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\PLT@list{\PLT@list#2\relax}%
  \else\ifx#1\partend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\partbegin
     \addtocounter{ptc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\PLT@lot
  \else\expandafter\PLT@read\fi}%
}%
\AtBeginDocument{%
 \@ifundefined{c@lofdepth}{}%
   {\newcounter{sectlofdepth}\setcounter{sectlofdepth}{2}}%
 \@ifundefined{c@lotdepth}{}%
   {\newcounter{sectlotdepth}\setcounter{sectlotdepth}{2}}%
}%
\if@mtc@chapter@undef@ \if@mtc@section@def@
\def\firstsectionis#1{\mtcPackageWarning[W0005]{minitoc}%
     {\string\firstsectionis \space is an obsolete (ignored)
      \MessageBreak
      command}%
     \@firstsectionis@used@true}
\newcounter{stc}\setcounter{stc}{0}%
\newcommand{\adjuststc}[1][1]{\addtocounter{stc}{#1}}%
\def\decrementstc{\addtocounter{stc}{-1}}%
\def\incrementstc{\addtocounter{stc}{+1}}%
\newcounter{secttocdepth}\setcounter{secttocdepth}{2}%
\def\stc@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}%
\newlength\stcindent \stcindent=24\p@
\def\stcfont{\footnotesize\rmfamily\upshape\mdseries}    % secttoc
\def\stcSSfont{\footnotesize\rmfamily\upshape\bfseries}  % (subsections)
\let\stcSSSfont\stcfont    % (subsubsections)
\let\stcPfont\stcfont      % (paragraphs)
\let\stcSPfont\stcfont     % (subparagraphs)
\let\slffont\stcfont       % sectlof (figures)
\let\slfSfont\stcfont      % sectlof (subfigures)
\let\sltfont\stcfont       % sectlot (tables)
\let\sltSfont\stcfont      % sectlot (subtables)
\def\stifont{\large\rmfamily\upshape\bfseries}    % titles
\def\c@sti#1{\null\hfill #1\hfill\null}
\def\l@sti#1{\null #1\hfill\null}
\def\r@sti#1{\null\hfill #1\null}
\def\e@sti#1{\vspace{-\baselineskip}}
\def\n@sti#1{\vspace{-\baselineskip}}
\let\do@stitc\l@sti
\let\df@stitc\l@sti
\let\do@stilf\l@sti
\let\df@stilf\l@sti
\let\do@stilt\l@sti
\let\df@stilt\l@sti
\def\stc@verse#1{\let\\=\@centercr
  \list{}{%
    \itemsep=\z@ \itemindent=\z@ \topsep=1ex
    \listparindent=\itemindent \partopsep=\z@
    \iftightmtc \parsep=\z@ \fi
    \ifktightmtc \parskip=\z@ \fi
    \leftmargin=\stcindent \rightmargin=\leftmargin
    \addtolength{\leftmargin}{+#1}%
    \addtolength{\rightmargin}{-#1}%
    }%
  \item[]}%
\def\endstc@verse{\nopagebreak[4]\endlist}
\def\secttoc{\@ifnextchar[{\secttoc@}{\secttoc@[d]}}
\def\secttoc@[#1]{%
\global\@secttoc@used@true
\if@mtc@longext@%
   \def\@tocfile{stc\thestc}%
\else
   \def\@tocfile{S\thestc}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@secttoc@true
        \else
        \beforesecttoc
        \thispagesecttocstyle
%%      \mtc@markboth{\MakeUppercase{\stctitle}}{\MakeUppercase{\stctitle}}%
        \relax\begin{samepage}%
        \if #1e\let\do@stitc\e@sti
        \else\if #1n\let\do@stitc\n@sti
        \else\if #1c\let\do@stitc\c@sti
        \else\if #1l\let\do@stitc\l@sti
        \else\if #1r\let\do@stitc\r@sti
        \else\if #1d\let\do@stitc\df@stitc
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\stctitle}\if@mtc@FE \let\do@stitc\e@sti\relax\fi
        \raggedright
        \parskip=\z@%
        \reset@font\stcfont%
        \parindent=\z@%
        \nopagebreak[4]%
        \kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent
        \nopagebreak[4]%
        \ifx\stc@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\stifont\do@stitc{\mtc@v\stctitle}\\
        \end{tabular}%
        \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\stifont\do@stitc{\mtc@v\stctitle}\\\hline
        \end{tabular}%
        \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\\mtc@BBR
        \leftmargin\stcindent \rightmargin\stcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{stc@verse}{\stcoffset}\c@tocdepth=\c@secttocdepth%
        \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \stc@setform%
  \@ifundefined{stc@pgno}%
  {\let\@dottedtocline\@undottedtocline}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \stc@setform%
  \opensecttoc\global\insecttoctrue
  \@input{\jobname.\@tocfile}%
  \global\insecttocfalse\closesecttoc
  \vspace{-1ex} \vspace{-\baselineskip}
  \leavevmode\mtc@strut
  \global\@nobreakfalse\endgroup
        \end{stc@verse}%
        \kernaftersecttoc
        \nopagebreak[4]\stc@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\pagebreak[1]\vspace*{-1ex}\aftersecttoc\fi}%
\def\sectlof{\@ifnextchar[{\sectlof@}{\sectlof@[d]}}
\def\sectlof@[#1]{%
\global\@sectlof@used@true
\if@mtc@longext@%
   \def\@tocfile{slf\thestc}%
\else
   \def\@tocfile{H\thestc}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@sectlof@true
        \else
        \thispagesectlofstyle
%%        \mtc@markboth{\MakeUppercase{\slftitle}}{\MakeUppercase{\slftitle}}%
        \beforesectlof
        \relax\begin{samepage}%
        \if #1e\let\do@stilf\e@sti
        \else\if #1n\let\do@stilf\n@sti
        \else\if #1c\let\do@stilf\c@sti
        \else\if #1l\let\do@stilf\l@sti
        \else\if #1r\let\do@stilf\r@sti
        \else\if #1d\let\do@stilf\df@stilf
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\slftitle}\if@mtc@FE \let\do@stilf\e@sti\relax\fi
        \raggedright
        \parskip=\z@%
        \reset@font\slffont%
        \parindent=\z@%
        \nopagebreak[4]%
        \kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent
        \ifx\slf@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\stifont\do@stilf{\mtc@v\slftitle}\\
        \end{tabular}%
        \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \mtc@hstrut
        \reset@font\stifont\do@stilf{\mtc@v\slftitle}\\\hline
        \end{tabular}%
        \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\\mtc@BBR
        \leftmargin\stcindent \rightmargin\stcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{stc@verse}{\slfoffset}%
        \@ifundefined{c@lofdepth}{}%
          {\c@lofdepth=\c@sectlofdepth
           \ifnum\c@lofdepth<1\relax\c@lofdepth=1\fi}
        \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{slf@pgno}%
  {\let\@dottedtocline\@undottedtocline}{}
  \@fileswfalse\mtc@hook@beforeinputfile
  \slf@setform%
  \opensectlof\global\insectloftrue
  \@input{\jobname.\@tocfile}%
  \global\insectloffalse\closesectlof
  \global\@nobreakfalse\endgroup
        \end{stc@verse}%
        \kernaftersectlof
        \nopagebreak[4]\slf@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\pagebreak[1]\vspace*{-1ex}\aftersectlof\fi}%
\def\sectlot{\@ifnextchar[{\sectlot@}{\sectlot@[d]}}
\def\sectlot@[#1]{%
\global\@sectlot@used@true
\if@mtc@longext@%
   \def\@tocfile{slt\thestc}%
\else
   \def\@tocfile{I\thestc}%
\fi
        \mtc@CkFile{\jobname.\@tocfile}
        \if@mtc@FE
        \mtcPackageInfo[I0006]{minitoc}%
           {\jobname.\@tocfile\space is empty}
        \@mtc@empty@sectlot@true
        \else
        \thispagesectlotstyle
%%      \mtc@markboth{\MakeUppercase{\slttitle}}{\MakeUppercase{\slttitle}}%
        \beforesectlot
        \relax\begin{samepage}%
        \if #1e\let\do@stilt\e@sti
        \else\if #1n\let\do@stilt\n@sti
        \else\if #1c\let\do@stilt\c@sti
        \else\if #1l\let\do@stilt\l@sti
        \else\if #1r\let\do@stilt\r@sti
        \else\if #1d\let\do@stilt\df@stilt
        \fi\fi\fi\fi\fi\fi
        \mtc@CkStr{\slttitle}\if@mtc@FE \let\do@stilt\e@sti\relax\fi
        \raggedright
        \parskip=\z@%
        \reset@font\sltfont%
        \parindent=\z@%
        \nopagebreak[4]%
        \kern-0.8\baselineskip\nopagebreak[4]%
        \par\noindent
        \ifx\slt@rule\relax
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \reset@font\stifont\do@stilt{\mtc@v\slttitle}\\
        \end{tabular}%
        \else
        \begin{tabular}{@{}p{\columnwidth}@{}}
        \mtc@hstrut
        \reset@font\stifont\do@stilt{\mtc@v\slttitle}\\\hline
        \end{tabular}%
        \fi
        \nopagebreak[4]\null\leavevmode\mtc@zrule\\\mtc@BBR
        \leftmargin\stcindent \rightmargin\stcindent
        \itemindent=\z@\labelwidth=\z@%
        \labelsep=\z@\listparindent=\z@%
        \begin{stc@verse}{\sltoffset}%
        \@ifundefined{c@lotdepth}{}%
          {\c@lotdepth=\c@sectlotdepth
        \ifnum\c@lotdepth<1\relax\c@lotdepth=1\fi}
        \leavevmode\\\mtc@BBR\vskip -.5\baselineskip
\begingroup
  \makeatletter
  \@ifundefined{slt@pgno}%
  {\let\@dottedtocline\@undottedtocline}{}
   \gdef\thestc{\arabic{stc}}
  \@fileswfalse\mtc@hook@beforeinputfile
  \slt@setform%
  \opensectlot\global\insectlottrue
  \@input{\jobname.\@tocfile}%
  \global\insectlotfalse\closesectlot
  \global\@nobreakfalse\endgroup
        \end{stc@verse}%
        \kernaftersectlof
        \nopagebreak[4]\slt@rule\null\leavevmode\\%
        \vskip-1.0\baselineskip\mtc@zrule\end{samepage}%
        \par\pagebreak[1]\vspace*{-1ex}\aftersectlot\fi}%
\def\l@xsect{\@dottedtocline{\@M}{1.0em}{2.3em}}
\def\l@xsection{\@dottedtocline{\@M}{1.0em}{2.3em}}
\def\l@schapter{\@dottedtocline{1}{1.0em}{2.3em}}
\def\xsect{xsect} \def\schapter{schapter}
\let\sv@sect\@sect
\gdef\@sect#1#2#3#4#5#6[#7]#8{%
\ifnum #2=1\relax
   \addcontentsline{lof}{xsect}{#7}%
   \addcontentsline{lot}{xsect}{#7}%
\fi
\sv@sect{#1}{#2}{#3}{#4}{#4}{#5}{#6}[{#7}]{#8}}
\def\@sect#1#2#3#4#5#6[#7]#8{
\expandafter
\ifx\csname #1\endcsname\section\relax
   \addcontentsline{lof}{xsect}{#7}%
   \addcontentsline{lot}{xsect}{#7}%
\fi
\ifx\csname #1\endcsname\starsection\relax
   \addcontentsline{lof}{xsect}{#7}%
   \addcontentsline{lot}{xsect}{#7}%
\fi
\ifnum #2>\c@secnumdepth\relax
   \let\@svsec\@empty
\else
   \refstepcounter{#1}%
   \edef\@svsec{\csname the#1\endcsname\hskip 1em}%
\fi
\@tempskipa #5\relax
\ifdim \@tempskipa>\z@
   \begingroup #6\relax
      \@hangfrom{\hskip #3\relax\@svsec}%
         {\interlinepenalty \@M #8\par}%
   \endgroup
   \csname #1mark\endcsname{#7}\addcontentsline
   {toc}{#1}{\ifnum #2>\c@secnumdepth\relax
             \else
             \protect\numberline{\csname the#1\endcsname}%
             \fi
             #7}%
\else
   \def\@svsechd{#6\hskip #3\relax
   \@svsec #8\csname #1mark\endcsname
   {#7}\addcontentsline
   {toc}{#1}{\ifnum #2>\c@secnumdepth\relax
             \else
                \protect\numberline{\csname the#1\endcsname}
             \fi
   #7}}%
\fi
\@xsect{#5}}
\let\stc@sect\@sect
\def\@sect#1#2#3#4#5#6[#7]#8{%
   \ifnum #2<1 \relax
   \addtocontents{toc}{\protect\sectbegin}
   \fi
   \stc@sect{#1}{#2}{#3}{#4}{#5}{#6}[{#7}]{#8}}
\let\sectend\relax
\let\sectbegin\relax
\def\@dosecttoc#1{{%
  \makeatletter
  \setcounter{stc}{0}
  \STC@next#1.toc\relax\\}\setcounter{stc}{0}}
\def\@dosectlof#1{{%
  \makeatletter
  \setcounter{stc}{0}
  \SLF@next#1.lof\relax\\}\setcounter{stc}{0}}
\def\@dosectlot#1{{%
  \makeatletter
  \setcounter{stc}{0}
  \SLT@next#1.lot\relax\\}\setcounter{stc}{0}}
\def\dosecttoc{\@ifnextchar[{\dosecttoc@}{\dosecttoc@[l]}}
\def\dosectlof{\@ifnextchar[{\dosectlof@}{\dosectlof@[l]}}
\def\dosectlot{\@ifnextchar[{\dosectlot@}{\dosectlot@[l]}}
\def\dosecttoc@[#1]{%
\if@mtc@hints@
   \if@dosecttoc@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dosecttoc \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dosecttoc@used@true
\if #1e\let\df@stitc\e@sti%
\else\if #1n\let\df@stitc\n@sti%
\else\if #1c\let\df@stitc\c@sti%
\else\if #1l\let\df@stitc\l@sti%
\else\if #1r\let\df@stitc\r@sti%
\fi\fi\fi\fi\fi%
\@@dosecttoc}
\def\dosectlof@[#1]{%
\if@mtc@hints@
   \if@dosectlof@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dosectlof \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dosectlof@used@true
\if #1e\let\df@stilf\e@sti%
\else\if #1n\let\df@stilf\n@sti%
\else\if #1c\let\df@stilf\c@sti%
\else\if #1l\let\df@stilf\l@sti%
\else\if #1r\let\df@stilf\r@sti%
\fi\fi\fi\fi\fi%
\@@dosectlof}
\def\dosectlot@[#1]{%
\if@mtc@hints@
   \if@dosectlot@used@
   \mtcPackageInfo[I0045]{minitoc(hints)}%
        {The \string\dosectlot \space command
         \MessageBreak
         has been invoked more than once
         \MessageBreak}
   \global\@mtc@hints@given@true
   \fi
\fi
\global\@dosectlot@used@true
\if #1e\let\df@stilt\e@sti%
\else\if #1n\let\df@stilt\n@sti%
\else\if #1c\let\df@stilt\c@sti%
\else\if #1l\let\df@stilt\l@sti%
\else\if #1r\let\df@stilt\r@sti%
\fi\fi\fi\fi\fi%
\@@dosectlot}
\def\@@dosecttoc{\@dosecttoc{\jobname}\immediate\closeout\tf@mtc}
\def\@@dosectlof{\@dosectlof{\jobname}\immediate\closeout\tf@mtc}
\def\@@dosectlot{\@dosectlot{\jobname}\immediate\closeout\tf@mtc}
\def\STC@next#1\relax#2\\{%
  \edef\STC@list{#2}%
  \STC@loop{#1}}
\def\STC@toc{%
  \ifx\STC@list\@empty\else\expandafter\STC@explist\fi}
\def\STC@contentsline#1#2#3#4{%
  \gdef\thestc{\arabic{stc}}%
  \expandafter\ifx\csname #1\endcsname\section
    \stepcounter{stc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.stc\thestc}%
      \def\stcname{\jobname.stc\thestc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.S\thestc}%
      \def\stcname{\jobname.S\thestc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\stcname
  \fi
  \mtc@toks{\noexpand\leavevmode #2}%
  \expandafter\ifx\csname #1\endcsname\coffee
    \MTC@WriteCoffeeline{#1}{#3}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subsection
    \MTC@WriteContentsline{#1}{stcSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subsubsection
    \MTC@WriteContentsline{#1}{stcSSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\paragraph
    \MTC@WriteContentsline{#1}{stcP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subparagraph
    \MTC@WriteContentsline{#1}{stcSP}{#3}{#4}%
  \fi
  \ifx\csname #1\endcsname\starsection
    \stepcounter{stc}%
    \gdef\thestc{\arabic{stc}}
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.stc\thestc}%
      \def\stcname{\jobname.stc\thestc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.S\thestc}%
      \def\stcname{\jobname.S\thestc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\stcname
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubsection
    \MTC@WriteContentsline{#1}{stcSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubsubsection
    \MTC@WriteContentsline{#1}{stcSSS}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starparagraph
    \MTC@WriteContentsline{#1}{stcP}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\starsubparagraph
    \MTC@WriteContentsline{#1}{stcSP}{#3}{#4}%
  \fi
}
\def\STC@explist{\expandafter\STC@next\STC@list\\}
\def\STC@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0016]{minitoc}%
       {No file #1
        \MessageBreak
        SECTTOCS NOT PREPARED}%
    \expandafter\STC@toc
  \else
    \mtcPackageInfo[I0026]{minitoc}%
       {PREPARING SECTTOCS FROM #1}%
    \expandafter\STC@read\fi}
\def\STC@read{%
  \read\@inputcheck to\STC@line
  \expandafter\STC@test\STC@line.....\STC@%
  }%
\long\def\STC@test#1#2#3#4#5#6\STC@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \STC@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\STC@list{\STC@list#2\relax}%
  \else\ifx#1\sectend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\sectbegin
     \addtocounter{stc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\STC@toc
  \else\expandafter\STC@read\fi}%
\def\SLF@next#1\relax#2\\{%
  \edef\SLF@list{#2}%
  \SLF@loop{#1}}
\def\SLF@lof{%
  \ifx\SLF@list\@empty\else\expandafter\SLF@explist\fi}
\def\SLF@contentsline#1#2#3#4{%
  \gdef\thestc{\arabic{stc}}%
  \expandafter\ifx\csname #1\endcsname\xsect
    \stepcounter{stc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.slf\thestc}%
      \def\slfname{\jobname.slf\thestc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.H\thestc}%
      \def\slfname{\jobname.H\thestc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\slfname
  \fi
  \mtc@toks{\noexpand\leavevmode #2}%
  \expandafter\ifx\csname #1\endcsname\figure
    \MTC@WriteContentsline{#1}{slf}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subfigure
    \MTC@WriteContentsline{#1}{slfS}{#3}{#4}%
  \fi
}
\def\SLF@explist{\expandafter\SLF@next\SLF@list\\}
\def\SLF@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0014]{minitoc}%
       {No file #1
        \MessageBreak
        SECTLOFS NOT PREPARED}%
    \expandafter\SLF@lof
  \else
    \mtcPackageInfo[I0036]{minitoc}%
       {PREPARING SECTLOFS FROM #1}%
    \expandafter\SLF@read\fi}
\def\SLF@read{%
  \read\@inputcheck to\SLF@line
  \expandafter\SLF@test\SLF@line.....\SLF@%
  }%
\long\def\SLF@test#1#2#3#4#5#6\SLF@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \SLF@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\SLF@list{\SLF@list#2\relax}%
  \else\ifx#1\sectend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\sectbegin
     \addtocounter{stc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\SLF@lof
  \else\expandafter\SLF@read\fi}%
\def\SLT@next#1\relax#2\\{%
  \edef\SLT@list{#2}%
  \SLT@loop{#1}}
\def\SLT@lot{%
  \ifx\SLT@list\@empty\else\expandafter\SLT@explist\fi}
\def\SLT@contentsline#1#2#3#4{%
  \gdef\thestc{\arabic{stc}}%
  \expandafter\ifx\csname #1\endcsname\xsect
    \stepcounter{stc}%
    \if@mtc@longext@%
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.slt\thestc}%
      \def\sltname{\jobname.slt\thestc}%
    \else
      \mtcPackageInfo[I0033]{minitoc}%
         {Writing\space\jobname.V\thestc}%
      \def\sltname{\jobname.V\thestc}%
    \fi
    \immediate\closeout\tf@mtc
    \immediate\openout\tf@mtc=\sltname
  \fi
  \mtc@toks{\noexpand\leavevmode #2}%
  \expandafter\ifx\csname #1\endcsname\table
    \MTC@WriteContentsline{#1}{slt}{#3}{#4}%
  \fi
  \expandafter\ifx\csname #1\endcsname\subtable
    \MTC@WriteContentsline{#1}{sltS}{#3}{#4}%
  \fi
}
\def\SLT@explist{\expandafter\SLT@next\SLT@list\\}
\def\SLT@loop#1{\openin\@inputcheck#1\relax
  \ifeof\@inputcheck
    \mtcPackageWarning[W0015]{minitoc}%
       {No file #1
        \MessageBreak
        SECTLOTS NOT PREPARED}%
    \expandafter\SLT@lot
  \else
    \mtcPackageInfo[I0039]{minitoc}%
       {PREPARING SECTLOTS FROM #1}%
    \expandafter\SLT@read\fi}
\def\SLT@read{%
  \read\@inputcheck to\SLT@line
  \expandafter\SLT@test\SLT@line.....\SLT@%
  }%
\long\def\SLT@test#1#2#3#4#5#6\SLT@{%
  \ifx#1\contentsline
    \let\mtc@string\string
    \SLT@contentsline{#2}{#3}{#4}{#5}%
    \let\mtc@string\relax
  \else\ifx#1\@input
     \edef\SLT@list{\SLT@list#2\relax}%
  \else\ifx#1\sectend
     \immediate\closeout\tf@mtc
     \immediate\openout\tf@mtc=\jobname.mtc
  \else\ifx#1\sectbegin
     \addtocounter{stc}{-1}%
  \fi\fi\fi\fi
  \ifeof\@inputcheck\expandafter\SLT@lot
  \else\expandafter\SLT@read\fi}%
\fi% end of \if@mtc@section@def@
\fi% end of \if@mtc@chapter@undef@
\def\mtcprepare{\@ifnextchar[{\mtcprepare@}{\mtcprepare@[l]}}%
\def\mtcprepare@[#1]{%
\@ifundefined{part}{}{%
\IfFileExists{\jobname.toc}{\doparttoc[#1]}{}%
\IfFileExists{\jobname.lof}{\dopartlof[#1]}{}%
\IfFileExists{\jobname.lot}{\dopartlot[#1]}{}%
}%
\@ifundefined{chapter}{%
  \@ifundefined{section}{}%
  {%
\IfFileExists{\jobname.toc}{\dosecttoc[#1]}{}%
\IfFileExists{\jobname.lof}{\dosectlof[#1]}{}%
\IfFileExists{\jobname.lot}{\dosectlot[#1]}{}%
  }%
}{%
\IfFileExists{\jobname.toc}{\dominitoc[#1]}{}%
\IfFileExists{\jobname.lof}{\dominilof[#1]}{}%
\IfFileExists{\jobname.lot}{\dominilot[#1]}{}%
}%
\if@mtc@hints@
  \@mtc@hints@given@true
  \mtcPackageInfo[I0048]{minitoc(hints)}%
     {Using \string\mtcprepare\space may induce some
      \MessageBreak
      hints about the preparation commands,
      \MessageBreak
      because it invokes ALL the preparation
      \MessageBreak
      commands allowed by the document class,
      \MessageBreak
      without any previous check\@gobble}%
\fi
}
\def\gobbleopt@[#1]{\relax}
\AtBeginDocument{\if@filesw\relax\else
    \mtcPackageWarningNoLine[W0098]{minitoc}%
       {--- You have used the \string\nofiles\space command
        \MessageBreak
        in your preamble; all preparation commands
        \MessageBreak
        in the body of the document will be ignored}
\def\doparttoc{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dopartlof{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dopartlot{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dominitoc{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dominilof{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dominilot{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dosecttoc{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dosectlof{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\dosectlot{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\def\mtcprepare{\@ifnextchar[{\gobbleopt@}{\gobbleopt@[l]}}
\fi}
\@ifundefined{section}{}{\let\l@listof\l@section}
\@ifundefined{chapter}{}{\let\l@listof\l@chapter}
\@ifundefined{part}{}{\let\l@starpart\l@part}
\@ifundefined{chapter}{}{\let\l@starchapter\l@chapter}
\@ifundefined{section}{}{\let\l@starsection\l@section}
\@ifundefined{subsection}{}{\let\l@starsubsection\l@subsection}
\@ifundefined{subsubsection}{}{\let\l@starsubsubsection\l@subsubsection}
\@ifundefined{paragraph}{}{\let\l@starparagraph\l@paragraph}
\@ifundefined{subparagraph}{}{\let\l@starsubparagraph\l@subparagraph}
\def\noptcrule{\let\ptc@rule\relax}
\def\nomtcrule{\let\mtc@rule\relax}
\def\nostcrule{\let\stc@rule\relax}
\def\ptcrule{\def\ptc@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\mtcrule{\def\mtc@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\stcrule{\def\stc@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\ptc@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\mtc@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\stc@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\noplfrule{\let\plf@rule\relax}
\def\nomlfrule{\let\mlf@rule\relax}
\def\noslfrule{\let\slf@rule\relax}
\def\plfrule{\def\plf@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\mlfrule{\def\mlf@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\slfrule{\def\slf@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\plf@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\mlf@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\slf@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\nopltrule{\let\plt@rule\relax}
\def\nomltrule{\let\mlt@rule\relax}
\def\nosltrule{\let\slt@rule\relax}
\def\pltrule{\def\plt@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\mltrule{\def\mlt@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\sltrule{\def\slt@rule{\kern-3\p@ \hrule width \columnwidth \kern2.6\p@}}
\def\plt@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\mlt@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\def\slt@rule{\rule[3\p@]{\columnwidth}{.4\p@}\vspace*{2.6\p@}}
\@namedef{mtc@typetable@parttoc}{ptc}\def\mtc@typetable@parttoc{ptc}
\@namedef{mtc@typetable@partlof}{plf}\def\mtc@typetable@partlof{plf}
\@namedef{mtc@typetable@partlot}{plt}\def\mtc@typetable@partlot{plt}
\@namedef{mtc@typetable@minitoc}{mtc}\def\mtc@typetable@minitoc{mtc}
\@namedef{mtc@typetable@minilof}{mlf}\def\mtc@typetable@minilof{mlf}
\@namedef{mtc@typetable@minilot}{mlt}\def\mtc@typetable@minilot{mlt}
\@namedef{mtc@typetable@secttoc}{stc}\def\mtc@typetable@secttoc{stc}
\@namedef{mtc@typetable@sectlof}{slf}\def\mtc@typetable@sectlof{slf}
\@namedef{mtc@typetable@sectlot}{slt}\def\mtc@typetable@sectlot{slt}
\@namedef{mtc@typetitle@parttoc}{pti}\def\mtc@typetitle@parttoc{pti}
\@namedef{mtc@typetitle@partlof}{pti}\def\mtc@typetitle@partlof{pti}
\@namedef{mtc@typetitle@partlot}{pti}\def\mtc@typetitle@partlot{pti}
\@namedef{mtc@typetitle@minitoc}{mti}\def\mtc@typetitle@minitoc{mti}
\@namedef{mtc@typetitle@minilof}{mti}\def\mtc@typetitle@minilof{mti}
\@namedef{mtc@typetitle@minilot}{mti}\def\mtc@typetitle@minilot{mti}
\@namedef{mtc@typetitle@secttoc}{sti}\def\mtc@typetitle@secttoc{sti}
\@namedef{mtc@typetitle@sectlof}{sti}\def\mtc@typetitle@sectlof{sti}
\@namedef{mtc@typetitle@sectlot}{sti}\def\mtc@typetitle@sectlot{sti}
\@namedef{mtc@YN@off}{no}\def\mtc@YN@off{no}
\@namedef{mtc@YN@OFF}{no}\def\mtc@YN@OFF{no}
\@namedef{mtc@YN@no}{no}\def\mtc@YN@no{no}
\@namedef{mtc@YN@NO}{no}\def\mtc@YN@NO{no}
\@namedef{mtc@YN@n}{no}\def\mtc@YN@n{no}
\@namedef{mtc@YN@N}{no}\def\mtc@YN@N{no}
\@namedef{mtc@YN@false}{no}\def\mtc@YN@false{no}
\@namedef{mtc@YN@FALSE}{no}\def\mtc@YN@FALSE{no}
\@namedef{mtc@YN@faux}{no}\def\mtc@YN@faux{no}
\@namedef{mtc@YN@FAUX}{no}\def\mtc@YN@FAUX{no}
\@namedef{mtc@YN@f}{no}\def\mtc@YN@f{no}
\@namedef{mtc@YN@F}{no}\def\mtc@YN@F{no}
\@namedef{mtc@YN@NON}{no}\def\mtc@YN@NON{no}
\@namedef{mtc@YN@non}{no}\def\mtc@YN@non{no}
\@namedef{mtc@YN@0}{no}\expandafter\def\csname mtc@YN@0\endcsname{no}
\@namedef{mtc@YN@-}{no}\expandafter\def\csname mtc@YN@-\endcsname{no}
\@namedef{mtc@YN@on}{}\def\mtc@YN@on{}
\@namedef{mtc@YN@ON}{}\def\mtc@YN@ON{}
\@namedef{mtc@YN@yes}{}\def\mtc@YN@yes{}
\@namedef{mtc@YN@YES}{}\def\mtc@YN@YES{}
\@namedef{mtc@YN@y}{}\def\mtc@YN@y{}
\@namedef{mtc@YN@Y}{}\def\mtc@YN@Y{}
\@namedef{mtc@YN@true}{}\def\mtc@YN@true{}
\@namedef{mtc@YN@TRUE}{}\def\mtc@YN@TRUE{}
\@namedef{mtc@YN@t}{}\def\mtc@YN@t{}
\@namedef{mtc@YN@T}{}\def\mtc@YN@T{}
\@namedef{mtc@YN@vrai}{}\def\mtc@YN@vrai{}
\@namedef{mtc@YN@VRAI}{}\def\mtc@YN@VRAI{}
\@namedef{mtc@YN@v}{}\def\mtc@YN@v{}
\@namedef{mtc@YN@V}{}\def\mtc@YN@V{}
\@namedef{mtc@YN@OUI}{}\def\mtc@YN@OUI{}
\@namedef{mtc@YN@oui}{}\def\mtc@YN@oui{}
\@namedef{mtc@YN@O}{}\def\mtc@YN@O{}
\@namedef{mtc@YN@o}{}\def\mtc@YN@o{}
\@namedef{mtc@YN@1}{}\expandafter\def\csname mtc@YN@1\endcsname{}
\@namedef{mtc@YN@+}{}\expandafter\def\csname mtc@YN@+\endcsname{}
\@namedef{mtc@sectlevel@chapter}{C}\def\mtc@sectlevel@chapter{C}
\@namedef{mtc@sectlevel@section}{S}\def\mtc@sectlevel@section{S}
\@namedef{mtc@sectlevel@subsection}{SS}\def\mtc@sectlevel@subsection{SS}
\@namedef{mtc@sectlevel@subsubsection}{SSS}\def\mtc@sectlevel@subsubsection{SSS}
\@namedef{mtc@sectlevel@paragraph}{P}\def\mtc@sectlevel@paragraph{P}
\@namedef{mtc@sectlevel@subparagraph}{SP}\def\mtc@sectlevel@subparagraph{SP}
\@namedef{mtc@sectlevel@*}{}\expandafter\def\csname mtc@sectlevel@*\endcsname{}
\@namedef{mtc@sectlevel@figure}{}\def\mtc@sectlevel@figure{}
\@namedef{mtc@sectlevel@table}{}\def\mtc@sectlevel@table{}
\@namedef{mtc@sectlevel@subfigure}{S}\def\mtc@sectlevel@subfigure{S}
\@namedef{mtc@sectlevel@subtable}{S}\def\mtc@sectlevel@subtable{S}
\newif\if@mtc@setfont@\@mtc@setfont@true
\newcommand{\mtcsetfont}[3]{%
\def\mtc@mta@abbrev{X}
\@mtc@setfont@true
\expandafter\ifx\csname mtc@typetable@#1\endcsname\relax
   \@mtc@setfont@false
   \def\mtc@mta@abbrev{X}
   \mtcPackageError[E0013]{minitoc}%
      {\string\mtcsetfont \space has a wrong first argument
       \MessageBreak
       (#1).
       \MessageBreak
       It should be a mini-table type
       \MessageBreak
       (parttoc...sectlot)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@mta@abbrev{\@nameuse{mtc@typetable@#1}}
\fi
\def\mtc@level@abbrev{X}
\expandafter\ifx\csname mtc@sectlevel@#2\endcsname\relax
   \@mtc@setfont@false
   \def\mtc@level@abbrev{X}
   \mtcPackageError[E0014]{minitoc}%
      {\string\mtcsetfont \space has a wrong second argument
       \MessageBreak
       (#2).
       \MessageBreak
       It should be a sectionning level
       \MessageBreak
       (part...subparagraph) or * }%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@level@abbrev{\@nameuse{mtc@sectlevel@#2}}
\fi
\def\mtc@tmp@name{\mtc@mta@abbrev\mtc@level@abbrev font}
\def\parttoc@mtcqk{parttoc@mtcqk}
\def\minitoc@mtcqk{minitoc@mtcqk}
\def\secttoc@mtcqk{secttoc@mtcqk}
\def\partlof@mtcqk{partlof@mtcqk}
\def\minilof@mtcqk{minilof@mtcqk}
\def\sectlof@mtcqk{sectlof@mtcqk}
\def\partlot@mtcqk{partlot@mtcqk}
\def\minilot@mtcqk{minilot@mtcqk}
\def\sectlot@mtcqk{sectlot@mtcqk}
\def\part@mtcqk{part@mtcqk}
\def\chapter@mtcqk{chapter@mtcqk}
\def\appendix@mtcqk{appendix@mtcqk}
\def\section@mtcqk{section@mtcqk}
\def\subsection@mtcqk{subsection@mtcqk}
\def\subsubsection@mtcqk{subsubsection@mtcqk}
\def\paragraph@mtcqk{paragraph@mtcqk}
\def\subparagraph@mtcqk{subparagraph@mtcqk}
\def\figure@mtcqk{figure@mtcqk}
\def\table@mtcqk{table@mtcqk}
\def\subfigure@mtcqk{subfigure@mtcqk}
\def\subtable@mtcqk{subtable@mtcqk}
\@mtc@setfont@true
\expandafter\ifx\csname #1@mtcqk\endcsname\parttoc@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\figure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subfigure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\table@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subtable@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\partlof@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\table@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subtable@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\partlot@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\figure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subfigure@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\minitoc@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\part@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\chapter@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\appendix@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\figure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subfigure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\table@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subtable@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\minilof@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\part@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\chapter@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\appendix@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\table@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subtable@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\minilot@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\part@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\chapter@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\appendix@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\figure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subfigure@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\secttoc@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\part@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\chapter@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\appendix@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\section@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\figure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subfigure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\table@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subtable@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\sectlof@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\part@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\chapter@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\appendix@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\section@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\table@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subtable@mtcqk\relax\@mtc@setfont@false\fi
\fi
\expandafter\ifx\csname #1@mtcqk\endcsname\sectlot@mtcqk\relax
   \expandafter\ifx\csname #2@mtcqk\endcsname\part@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\chapter@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\appendix@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\section@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\figure@mtcqk\relax\@mtc@setfont@false\fi
   \expandafter\ifx\csname #2@mtcqk\endcsname\subfigure@mtcqk\relax\@mtc@setfont@false\fi
\fi
\if@mtc@setfont@
   \def\mtc@tmp@name{\mtc@mta@abbrev\mtc@level@abbrev font}
   \mtc@toks{#3}
   \mtcPackageInfo[I0015]{minitoc}%
      {\string\mtcsetfont\space redefines the macro
       \MessageBreak
       "\mtc@tmp@name" as "\the\mtc@toks"}%
   \expandafter\edef\csname\mtc@tmp@name\endcsname{\the\mtc@toks}%
\else
   \mtcPackageError[E0024]{minitoc}%
      {The macro \string\mtcsetfont\space has incompatible
       \MessageBreak
       first (#1) and second (#2) arguments}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\fi}
\newif\if@mtc@settitlefont@\@mtc@settitlefont@true
\newcommand{\mtcsettitlefont}[2]{%
\def\mtc@mtatf@abbrev{X}
\@mtc@settitlefont@true
\expandafter\ifx\csname mtc@typetitle@#1\endcsname\relax
   \@mtc@settitlefont@false
   \def\mtc@mtatf@abbrev{X}
   \mtcPackageError[E0022]{minitoc}%
      {\string\mtcsettitlefont \space has a wrong first argument
       \MessageBreak
       (#1).
       \MessageBreak
       It should be a mini-table type
       \MessageBreak
       (parttoc...sectlot)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@mtatf@abbrev{\@nameuse{mtc@typetitle@#1}}
\fi
\if@mtc@settitlefont@
   \def\mtc@tmptf@name{\mtc@mtatf@abbrev font}
   \mtc@toks{#2}%
   \mtcPackageInfo[I0018]{minitoc}%
      {\string\mtcsettitlefont\space redefines the macro
       \MessageBreak
       "\mtc@tmptf@name" as
       \MessageBreak
       "\the\mtc@toks"}%
   \expandafter\edef\csname\mtc@tmptf@name\endcsname{\the\mtc@toks}%
\else
   \mtcPackageError[E0034]{minitoc}%
      {The macro \string\\mtcsettitlefont\space uses
       \MessageBreak
       an illegal type of table (#1)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}{\relax}
\fi
}
\newif\if@mtc@settitle@\@mtc@settitle@true
\newcommand{\mtcsettitle}[2]{%
\def\mtc@mtati@abbrev{X}
\@mtc@settitle@true
\expandafter\ifx\csname mtc@typetable@#1\endcsname\relax
   \@mtc@settitle@false
   \def\mtc@mtati@abbrev{X}
   \mtcPackageError[E0021]{minitoc}%
      {\string\mtcsettitle \space has a wrong first argument
       \MessageBreak
       (#1).
       \MessageBreak
       It should be a mini-table type
       \MessageBreak
       (parttoc...sectlot)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@mtati@abbrev{\@nameuse{mtc@typetable@#1}}
\fi
\if@mtc@settitle@
   \def\mtc@tmpti@name{\mtc@mtati@abbrev title}%
   \mtc@toks{#2}%
   \mtcPackageInfo[I0017]{minitoc}%
      {\string\mtcsettitle\space redefines the macro
       \MessageBreak
       "\mtc@tmpti@name" as
       \MessageBreak
       "\the\mtc@toks"}%
   \expandafter\edef\csname\mtc@tmpti@name\endcsname{\the\mtc@toks}%
\else
   \mtcPackageError[E0033]{minitoc}%
      {The macro \string\mtcsettitle\space uses
       \MessageBreak
       an illegal type of table (#1)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}{\relax}
\fi
}
\@namedef{mtc@formatparam@dotinterval}{dotsep}%
\def\mtc@arg@dotinterval{dotsep}
\@namedef{mtc@formatparam@tocrightmargin}{tocrmarg}%
\def\mtc@arg@tocrightmargin{tocrightmargin}
\@namedef{mtc@formatparam@pagenumwidth}{pnumwidth}%
\def\mtc@arg@pagenumwidth{\mtc@arg@pagenumwidth}
%% \@namedef{mtc@arg@numwidth}{numwidth} %not yet available
%% \def\mtc@arg@numwidth{\mtc@arg@numwidth} %not yet available
\AtBeginDocument{%
\@ifundefined{ptcpnumwidth}{\let\ptcpnumwidth\@pnumwidth}{}%
\@ifundefined{stcpnumwidth}{\let\stcpnumwidth\@pnumwidth}{}%
\@ifundefined{mtcpnumwidth}{\let\mtcpnumwidth\@pnumwidth}{}%
\@ifundefined{plfpnumwidth}{\let\plfpnumwidth\@pnumwidth}{}%
\@ifundefined{mlfpnumwidth}{\let\mlfpnumwidth\@pnumwidth}{}%
\@ifundefined{slfpnumwidth}{\let\slfpnumwidth\@pnumwidth}{}%
\@ifundefined{pltpnumwidth}{\let\pltpnumwidth\@pnumwidth}{}%
\@ifundefined{mltpnumwidth}{\let\mltpnumwidth\@pnumwidth}{}%
\@ifundefined{sltpnumwidth}{\let\sltpnumwidth\@pnumwidth}{}%
\@ifundefined{ptctocrmarg}{\let\ptctocrmarg\@tocrmarg}{}%
\@ifundefined{mtctocrmarg}{\let\mtctocrmarg\@tocrmarg}{}%
\@ifundefined{stctocrmarg}{\let\stctocrmarg\@tocrmarg}{}%
\@ifundefined{plftocrmarg}{\let\plftocrmarg\@tocrmarg}{}%
\@ifundefined{mlftocrmarg}{\let\mlftocrmarg\@tocrmarg}{}%
\@ifundefined{slftocrmarg}{\let\slftocrmarg\@tocrmarg}{}%
\@ifundefined{plttocrmarg}{\let\plttocrmarg\@tocrmarg}{}%
\@ifundefined{mlttocrmarg}{\let\mlttocrmarg\@tocrmarg}{}%
\@ifundefined{slttocrmarg}{\let\slttocrmarg\@tocrmarg}{}%
\@ifundefined{ptcdotsep}{\let\ptcdotsep\@dotsep}{}%
\@ifundefined{mtcdotsep}{\let\mtcdotsep\@dotsep}{}%
\@ifundefined{stcdotsep}{\let\stcdotsep\@dotsep}{}%
\@ifundefined{plfdotsep}{\let\plfdotsep\@dotsep}{}%
\@ifundefined{mlfdotsep}{\let\mlfdotsep\@dotsep}{}%
\@ifundefined{slfdotsep}{\let\slfdotsep\@dotsep}{}%
\@ifundefined{pltdotsep}{\let\pltdotsep\@dotsep}{}%
\@ifundefined{mltdotsep}{\let\mltdotsep\@dotsep}{}%
\@ifundefined{sltdotsep}{\let\sltdotsep\@dotsep}{}%
}%
\def\ptc@setform{%
\let\@pnumwidth\ptcpnumwidth\relax
\let\@tocrmarg\ptctocrmarg\relax
\let\@dotsep\ptcdotsep\relax
}
\def\mtc@setform{%
\let\@pnumwidth\mtcpnumwidth\relax
\let\@tocrmarg\mtctocrmarg\relax
\let\@dotsep\mtcdotsep\relax
}
\def\stc@setform{%
\let\@pnumwidth\stcpnumwidth\relax
\let\@tocrmarg\stctocrmarg\relax
\let\@dotsep\stcdotsep\relax
}
\def\plf@setform{%
\let\@pnumwidth\plfpnumwidth\relax
\let\@tocrmarg\plftocrmarg\relax
\let\@dotsep\plfdotsep\relax
}
\def\mlf@setform{%
\let\@pnumwidth\mlfpnumwidth\relax
\let\@tocrmarg\mlftocrmarg\relax
\let\@dotsep\mlfdotsep\relax
}
\def\slf@setform{%
\let\@pnumwidth\slfpnumwidth\relax
\let\@tocrmarg\slftocrmarg\relax
\let\@dotsep\slfdotsep\relax
}
\def\plt@setform{%
\let\@pnumwidth\pltpnumwidth\relax
\let\@tocrmarg\plttocrmarg\relax
\let\@dotsep\pltdotsep\relax
}
\def\mlt@setform{%
\let\@pnumwidth\plfpnumwidth\relax
\let\@tocrmarg\plftocrmarg\relax
\let\@dotsep\plfdotsep\relax
}
\def\slt@setform{%
\let\@pnumwidth\plfpnumwidth\relax
\let\@tocrmarg\plftocrmarg\relax
\let\@dotsep\plfdotsep\relax
}
\newif\if@mtc@setformat@\@mtc@setformat@true
\newcommand{\mtcsetformat}[3]{%
\def\mtc@mtf@abbrev{X}
\def\mtc@fparam@abbrev{X}
\@mtc@setformat@true
\expandafter\ifx\csname mtc@typetable@#1\endcsname\relax
  \@mtc@setformat@false
  \def\mtc@mtf@abbrev{X}
  \mtcPackageError[E0015]{minitoc}%
     {\string\mtcsetformat \space has a wrong first argument
      \MessageBreak
      (#1).
      \MessageBreak
      It should be a mini-table type
      \MessageBreak
      (parttoc...sectlot)}%
     {Correct the source code.
      \MessageBreak
      Type <return> and rerun LaTeX}
\else \edef\mtc@mtf@abbrev{\@nameuse{mtc@typetable@#1}}
\fi
\expandafter\ifx\csname mtc@formatparam@#2\endcsname\relax
 \@mtc@setformat@false
  \def\mtc@fparam@abbrev{X}
  \mtcPackageError[E0016]{minitoc}%
     {\string\mtcsetformat \space has a wrong second argument
      \MessageBreak
      (#2).
      \MessageBreak
      It should be a formatting param choosen from:
      \MessageBreak
      pagenumwidth, tocrightmargin, dotinterval}%
     {Correct the source code.
      \MessageBreak
      Type <return> and rerun LaTeX}%
\else
  \edef\mtc@fparam@abbrev{\@nameuse{mtc@formatparam@#2}}%
\fi
\if@mtc@setformat@
  \mtc@toks{#3}%
  \def\mtc@tmpfm@name{\mtc@mtf@abbrev\mtc@fparam@abbrev}%
  \mtcPackageInfo[I0016]{minitoc}%
     {\string\mtcsetformat\space redefines the macro
      \MessageBreak
      "\mtc@tmpfm@name" as "\the\mtc@toks"}
  \expandafter\edef\csname\mtc@tmpfm@name\endcsname{\the\mtc@toks}%
\else
  \mtcPackageError[E0025]{minitoc}%
     {The macro \string\mtcsetformat\space has incompatible
      \MessageBreak
      first (#1) and second (#2) arguments}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}%
\fi
}
\newif\if@mtc@setpagenumbers@ \@mtc@setpagenumbers@false
\newif\if@mtc@spn@ok@
\newcommand{\mtcsetpagenumbers}[2]{%
   \expandafter\ifx\csname #1\endcsname\*\relax
     \@ifundefined{part}{}%
     {\mtcsetpagenumbers@{parttoc}{#2}
      \mtcsetpagenumbers@{partlof}{#2}
      \mtcsetpagenumbers@{partlot}{#2}}
     \@ifundefined{chapter}{}%
     {\mtcsetpagenumbers@{minitoc}{#2}
      \mtcsetpagenumbers@{minilof}{#2}
      \mtcsetpagenumbers@{minilot}{#2}}
     \@ifundefined{section}{}%
     {\mtcsetpagenumbers@{secttoc}{#2}
      \mtcsetpagenumbers@{sectlof}{#2}
      \mtcsetpagenumbers@{sectlot}{#2}}
   \else
   \mtcsetpagenumbers@{#1}{#2}%
  \fi
}
\newcommand{\mtcsetpagenumbers@}[2]{%
\def\mtc@mttpn@abbrev{X}
\@mtc@setpagenumbers@true
\def\mtc@pnsw@abbrev{}
\expandafter\ifx\csname mtc@typetable@#1\endcsname\relax
   \@mtc@setpagenumbers@false
   \def\mtc@pnsw@abbrev{X}
   \def\mtc@mttpn@abbrev{X}
   \mtcPackageError[E0017]{minitoc}%
      {\string\mtcsetpagenumbers \space has a wrong first
       \MessageBreak
       argument (#1)}%
      {It should be a mini-table type
       \MessageBreak
       (parttoc...sectlot)
       \MessageBreak
       Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@mttpn@abbrev{\@nameuse{mtc@typetable@#1}}
\fi
\@mtc@spn@ok@true
\expandafter\ifx\csname mtc@YN@#2\endcsname\relax
   \@mtc@spn@ok@false
   \def\mtc@pnsw@abbrev{X}
   \def\mtc@mttpn@abbrev{X}
   \@mtc@setpagenumbers@false
   \def\mtc@mttpn@abbrev{X}
   \mtcPackageError[E0018]{minitoc}%
      {\string\mtcsetpagenumbers \space has a wrong second
       \MessageBreak
       argument (#2)}%
      {It should be a boolean value (0/1, yes/no, on/off, ...)
       \MessageBreak
       Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@pnsw@abbrev{\@nameuse{mtc@YN@#2}}
   \def\mtc@pnsw@abbrevX{X}
   \def\mtc@noX{mtc@noX}
   \def\mtc@tmppn@name{\mtc@pnsw@abbrev\mtc@mttpn@abbrev pagenumbers}
   \expandafter\ifx\csname mtc@\mtc@pnsw@abbrev X\endcsname\mtc@noX
      \mtcPackageInfo[I0022]{minitoc}%
         {Page numbers are inhibited
          \MessageBreak
          for the #1s}
   \else
      \mtcPackageInfo[I0021]{minitoc}%
         {Page numbers are activated
          \MessageBreak for the #1s}
   \fi
   \csname\mtc@tmppn@name\endcsname{}
\fi
}
\newif\if@mtc@setrules@ \@mtc@setrules@false
\newif\if@mtc@sru@ok@
\newcommand{\mtcsetrules}[2]{%
   \expandafter\ifx\csname #1\endcsname\*\relax
     \@ifundefined{part}{}%
     {\mtcsetrules@{parttoc}{#2}
      \mtcsetrules@{partlof}{#2}
      \mtcsetrules@{partlot}{#2}}
     \@ifundefined{chapter}{}%
     {\mtcsetrules@{minitoc}{#2}
      \mtcsetrules@{minilof}{#2}
      \mtcsetrules@{minilot}{#2}}
     \@ifundefined{section}{}%
     {\mtcsetrules@{secttoc}{#2}
      \mtcsetrules@{sectlof}{#2}
      \mtcsetrules@{sectlot}{#2}}
   \else
   \mtcsetrules@{#1}{#2}%
  \fi
}
\newcommand{\mtcsetrules@}[2]{%
\def\mtc@mttru@abbrev{X}
\@mtc@setrules@true
\def\mtc@rusw@abbrev{}
\expandafter\ifx\csname mtc@typetable@#1\endcsname\relax
   \@mtc@setrules@false
   \def\mtc@rusw@abbrev{X}
   \def\mtc@mttru@abbrev{X}
   \mtcPackageError[E0019]{minitoc}%
      {\string\mtcsetrules \space has a wrong first argument
       \MessageBreak
       (#1)}%
      {It should be a mini-table type
       \MessageBreak
       (parttoc...sectlot)
       \MessageBreak
       Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@mttru@abbrev{\@nameuse{mtc@typetable@#1}}
\fi
\@mtc@sru@ok@true
\expandafter\ifx\csname mtc@YN@#2\endcsname\relax
   \@mtc@sru@ok@false
   \def\mtc@rusw@abbrev{X}
   \def\mtc@mttru@abbrev{X}
   \@mtc@setrules@false
   \mtcPackageError[E0020]{minitoc}%
      {\string\mtcsetrules \space has a wrong second argument
       \MessageBreak
       (#2)}%
      {It should be a boolean value (0/1, yes/no, on/off, ...)
       \MessageBreak
       Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@rusw@abbrev{\@nameuse{mtc@YN@#2}}
   \def\mtc@rusw@abbrevX{X}
   \def\mtc@noX{mtc@noX}
   \def\mtc@tmppn@name{\mtc@rusw@abbrev\mtc@mttru@abbrev rule}
   \expandafter\ifx\csname mtc@\mtc@rusw@abbrev X\endcsname\mtc@noX
      \mtcPackageInfo[I0008]{minitoc}%
         {Horizontal rules are inhibited
          \MessageBreak
          for the #1s}
   \else
      \mtcPackageInfo[I0007]{minitoc}%
         {Horizontal rules are activated
          \MessageBreak
          for the #1s}
   \fi
   \csname\mtc@tmppn@name\endcsname{}
\fi
}
\@namedef{mtc@ltypetable@parttoc}{parttoc}\def\mtc@ltypetable@parttoc{parttoc}
\@namedef{mtc@ltypetable@partlof}{partlof}\def\mtc@ltypetable@partlof{partlof}
\@namedef{mtc@ltypetable@partlot}{partlot}\def\mtc@ltypetable@partlot{partlot}
\@namedef{mtc@ltypetable@minitoc}{minitoc}\def\mtc@ltypetable@minitoc{minitoc}
\@namedef{mtc@ltypetable@minilof}{minilof}\def\mtc@ltypetable@minilof{minilof}
\@namedef{mtc@ltypetable@minilot}{minilot}\def\mtc@ltypetable@minilot{minilot}
\@namedef{mtc@ltypetable@secttoc}{secttoc}\def\mtc@ltypetable@secttoc{secttoc}
\@namedef{mtc@ltypetable@sectlof}{sectlof}\def\mtc@ltypetable@sectlof{sectlof}
\@namedef{mtc@ltypetable@sectlot}{sectlot}\def\mtc@ltypetable@sectlot{sectlot}
\@namedef{mtc@featureparam@before}{before}%
   \def\mtc@featureparam@before{before}
\@namedef{mtc@featureparam@after}{after}%
   \def\mtc@featureparam@after{after}
\@namedef{mtc@featureparam@open}{open}%
   \def\mtc@featureparam@open{open}
\@namedef{mtc@featureparam@close}{close}%
   \def\mtc@featureparam@close{close}
\@namedef{mtc@featureparam@pagestyle}{thispage}%
   \def\mtc@featureparam@pagestyle{thispage}
\@namedef{mtc@ft3@before}{}\expandafter\def\csname mtc@ft3@before\endcsname{}
\@namedef{mtc@ft3@after}{}\expandafter\def\csname mtc@ft3@after\endcsname{}
\@namedef{mtc@ft3@open}{}\expandafter\def\csname mtc@ft3@open\endcsname{}
\@namedef{mtc@ft3@close}{}\expandafter\def\csname mtc@ft3@close\endcsname{}
\@namedef{mtc@ft3@pagestyle}{style}%
    \expandafter\def\csname mtc@ft3@pagestyle\endcsname{style}
\newif\if@mtc@setfeature@\@mtc@setfeature@true
\newcommand{\mtcsetfeature}[3]{%
\def\mtc@mtfeat@abbrev{X}
\def\mtc@featparam@abbrev{X}
\@mtc@setfeature@true
\expandafter\ifx\csname mtc@ltypetable@#1\endcsname\relax
  \@mtc@setfeature@false
  \def\mtc@mtfeat@abbrev{X}
  \mtcPackageError[E0011]{minitoc}%
     {\string\mtcsetfeature \space has a wrong first argument
      \MessageBreak
      (#1).
      \MessageBreak
      It should be a mini-table type
      \MessageBreak
      (parttoc...sectlot)}%
     {Correct the source code.
      \MessageBreak
      Type <return> and rerun LaTeX}
\else
  \edef\mtc@mtfeat@abbrev{\@nameuse{mtc@ltypetable@#1}}
\fi
\expandafter\ifx\csname mtc@featureparam@#2\endcsname\relax
 \@mtc@setfeature@false
  \def\mtc@featparam@abbrev{X}
  \def\mtc@featparam@third{X}
  \mtcPackageError[E0012]{minitoc}%
     {\string\mtcsetfeature \space has a wrong second argument
      \MessageBreak
      (#2).
      \MessageBreak
      It should be a feature param
      \MessageBreak
      (before, after, open, close, pagestyle)}%
     {Correct the source code.
      \MessageBreak
      Type <return> and rerun LaTeX}
\else
  \edef\mtc@featparam@abbrev{\@nameuse{mtc@featureparam@#2}}
  \edef\mtc@featparam@third{\@nameuse{mtc@ft3@#2}}
\fi
\if@mtc@setfeature@
  \def\mtc@tmpfeat@name%
     {\mtc@featparam@abbrev\mtc@mtfeat@abbrev\mtc@featparam@third}%
     \mtc@toks{#3}%
  \mtcPackageInfo[I0014]{minitoc}%
     {\string\mtcsetfeature\space redefines the macro
      \MessageBreak
      "\csname mtc@tmpfeat@name\endcsname" as
      \MessageBreak
      "\the\mtc@toks"}%
  \expandafter\edef\csname\mtc@tmpfeat@name\endcsname{\the\mtc@toks}%
\else
  \mtcPackageError[E0023]{minitoc}%
     {The macro \string\mtcsetfeature\space has incompatible
      \MessageBreak
      first (#1) and second (#2) arguments}%
     {Correct the source code.
      \MessageBreak
      Type <return> and rerun LaTeX}
\fi}
\newif\if@mtc@setdepth@\@mtc@setdepth@true
\newcommand{\mtcsetdepth}[2]{%
\def\mtc@mtade@abbrev{X}
\@mtc@setdepth@true
\expandafter\ifx\csname mtc@ltypetable@#1\endcsname\relax
   \@mtc@setdepth@false
   \def\mtc@mtade@abbrev{X}
   \mtcPackageError[E0009]{minitoc}%
      {\string\mtcsetdepth \space has a wrong first argument
       \MessageBreak
       (#1).
       \MessageBreak
       It should be a mini-table type
       \MessageBreak
       (parttoc...sectlot)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@mtade@abbrev{\@nameuse{mtc@ltypetable@#1}}
\fi
\if@mtc@setdepth@
   \def\mtc@tmpde@name{\mtc@mtade@abbrev depth}
   \expandafter\noexpand\@ifundefined{c@\mtc@mtade@abbrev depth}%
      {\mtcPackageError[E0008]{minitoc}%
       {\string\mtcsetdepth \space attempts to use
        \MessageBreak
             an undefined counter (#1depth).}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}}{%
   \mtc@toks{#2} % trick for explicit message using \the.
   \mtcPackageInfo[I0013]{minitoc}%
      {\string\mtcsetdepth\space redefines the counter
       \MessageBreak
       "\mtc@tmpde@name" as "\the\mtc@toks"}%
    \expandafter\csname c@\mtc@tmpde@name\endcsname=#2}%
\else
   \mtcPackageError[E0010]{minitoc}%
      {\string\mtcsetdepth:\space Illegal type of table (#1)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}{\relax}%
\fi}% end of \mtcsetdepth
\newif\if@mtc@setoffset@\@mtc@setoffset@true
\newcommand{\mtcsetoffset}[2]{%
\def\mtc@mtaof@abbrev{X}
\@mtc@setoffset@true
\expandafter\ifx\csname mtc@typetable@#1\endcsname\relax
   \@mtc@setoffset@false
   \def\mtc@mtaof@abbrev{X}
   \mtcPackageError[E0042]{minitoc}%
      {\string\mtcsetoffset \space has a wrong first argument
       \MessageBreak
       (#1).
       \MessageBreak
       It should be a mini-table type
       \MessageBreak
       (parttoc...sectlot)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}
\else
   \edef\mtc@mtaof@abbrev{\@nameuse{mtc@typetable@#1}}
\fi
\if@mtc@setoffset@
   \def\mtc@tmpof@name{\mtc@mtaof@abbrev offset.}
   \expandafter\noexpand\@ifundefined{\mtc@mtaof@abbrev offset}%
      {\mtcPackageError[E0041]{minitoc}%
       {\string\mtcsetoffset \space attempts to use
        \MessageBreak
             an undefined offset (\mtc@mtaof@abbrev offset).}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}}{%
   \mtc@toks{#2} % trick for explicit message using \the.
   \mtcPackageInfo[I0052]{minitoc}%
      {\string\mtcsetoffset\space redefines
       \MessageBreak
       "\mtc@mtaof@abbrev offset" as "\the\mtc@toks"}%
    \expandafter\def\csname \mtc@mtaof@abbrev offset\endcsname{#2}}%
\else
   \mtcPackageError[E0043]{minitoc}%
      {\string\mtcsetoffset:\space Illegal type of table (#1)}%
      {Correct the source code.
       \MessageBreak
       Type <return> and rerun LaTeX}{\relax}%
\fi}% end of \mtcsetoffset
\DeclareRobustCommand{\mtcpolymtoc}[4]{%
      \ifinparttoc\relax{#1}%
      \else\ifinminitoc\relax{#2}%
           \else\ifinsecttoc\relax{#3}%
                \else\relax{#4}
                \fi
           \fi
      \fi}
\DeclareRobustCommand{\mtcpolymlof}[4]{%
      \ifinpartlof\relax{#1}%
      \else\ifinminilof\relax{#2}%
           \else\ifinsectlof\relax{#3}%
                \else\relax{#4}
                \fi
           \fi
      \fi}
\DeclareRobustCommand{\mtcpolymlot}[4]{%
      \ifinpartlot\relax{#1}%
      \else\ifinminilot\relax{#2}%
           \else\ifinsectlot\relax{#3}%
                \else\relax{#4}
                \fi
           \fi
      \fi}
\newif\if@mtc@Himtoc@ \@mtc@Himtoc@false
\newcommand{\mtc@savetocdepth}{\xdef\mtc@sv@tocdepth{\arabic{tocdepth}}}%
\newcommand{\mtc@restoretocdepth}{\setcounter{tocdepth}{\mtc@sv@tocdepth}}%
\newenvironment{mtchideinmaintoc}[1][-1]%
{\if@mtc@Himtoc@\mtcPackageError[E0005]{minitoc}%
    {Imbrication of mtchideinmaintoc environments}%
    {The hiding in main ToC could be incorrect}\fi
 \global\@mtc@Himtoc@true
 \addtocontents{toc}{\protect\mtc@savetocdepth}%
 \addtocontents{toc}{\protect\setcounter{tocdepth}{#1}}}%
{\if@mtc@Himtoc@\else\mtcPackageError[E0031]{minitoc}%
    {Unbalanced mtchideinmaintoc environment}%
    {The hiding in main ToC could be incorrect}\fi
 \global\@mtc@Himtoc@false
 \addtocontents{toc}{\protect\mtc@restoretocdepth}}%
\newif\if@mtc@Himlof@ \@mtc@Himlof@false
\AtBeginDocument{%
\@ifundefined{c@lofdepth}{%
   \providecommand{\mtc@savelofdepth}{\empty}
   \newenvironment{mtchideinmainlof}[1][-1]%
   {\if@mtc@Himlof@\mtcPackageError[E0003]{minitoc}%
       {Imbrication of mtchideinmainlof environments}%
       {The hiding in main LoF could be incorrect}\fi
    \global\@mtc@Himlof@true
    \def\mtc@sv@tocdepth{\arabic{tocdepth}}%
    \def\mtc@sv@lofdepth{\arabic{tocdepth}}%
    \addtocontents{lof}{\protect\mtc@savetocdepth}%
    \addtocontents{lof}{\protect\setcounter{tocdepth}{#1}}}%
   {\if@mtc@Himlof@\else\mtcPackageError[E0029]{minitoc}%
       {Unbalanced mtchideinmainlof environment}%
       {The hiding in main LoF could be incorrect}\fi
    \global\@mtc@Himlof@false
    \addtocontents{lof}{\protect\mtc@restoretocdepth}%
}}%
{%
   \newcommand{\mtc@savelofdepth}{\xdef\mtc@sv@lofdepth{\arabic{lofdepth}}}%
   \newcommand{\mtc@restorelofdepth}{\setcounter{lofdepth}{\mtc@sv@lofdepth}}%
   \newenvironment{mtchideinmainlof}[1][-1]%
   {\if@mtc@Himlof@\mtcPackageError[E0003]{minitoc}%
       {Imbrication of mtchideinmainlof environments}%
       {The hiding in main LoF could be incorrect}\fi
    \global\@mtc@Himlof@true
    \addtocontents{lof}{\protect\mtc@savelofdepth}%
    \addtocontents{lof}{\protect\setcounter{tocdepth}{#1}}}%
   {\if@mtc@Himlof@\else\mtcPackageError[E0029]{minitoc}%
       {Unbalanced mtchideinmainlof environment}%
       {The hiding in main LoF could be incorrect}\fi
    \global\@mtc@Himlof@false
    \addtocontents{lof}{\protect\mtc@restoretocdepth}}}}
\newif\if@mtc@Himlot@ \@mtc@Himlot@false
\AtBeginDocument{%
\@ifundefined{c@lotdepth}{%
   \providecommand{\mtc@savelotdepth}{\empty}
   \newenvironment{mtchideinmainlot}[1][-1]%
   {\if@mtc@Himlot@\mtcPackageError[E0004]{minitoc}%
       {Imbrication of mtchideinmainlot environments}%
       {The hiding in main LoT could be incorrect}\fi
    \global\@mtc@Himlot@true
    \def\mtc@sv@tocdepth{\arabic{tocdepth}}%
    \def\mtc@sv@lotdepth{\arabic{tocdepth}}%
    \addtocontents{lot}{\protect\mtc@savetocdepth}%
    \addtocontents{lot}{\protect\setcounter{tocdepth}{#1}}}%
   {\if@mtc@Himlot@\else\mtcPackageError[E0030]{minitoc}%
       {Unbalanced mtchideinmainlot environment}%
       {The hiding in main LoT could be incorrect}\fi
    \global\@mtc@Himlot@false
    \addtocontents{lot}{\protect\mtc@restoretocdepth}%
}}%
{%
   \newcommand{\mtc@savelotdepth}{\xdef\mtc@sv@lotdepth{\arabic{lotdepth}}}%
   \newcommand{\mtc@restorelotdepth}{\setcounter{lotdepth}{\mtc@sv@lotdepth}}%
   \newenvironment{mtchideinmainlot}[1][-1]%
   {\if@mtc@Himlot@\mtcPackageError[E0004]{minitoc}%
       {Imbrication of mtchideinmainlot environments}%
       {The hiding in main LoT could be incorrect}\fi
    \global\@mtc@Himlot@true
    \addtocontents{lot}{\protect\mtc@savelotdepth}%
    \addtocontents{lot}{\protect\setcounter{tocdepth}{#1}}}%
   {\if@mtc@Himlot@\else\mtcPackageError[E0030]{minitoc}%
       {Unbalanced mtchideinmainlot environment}%
       {The hiding in main LoT could be incorrect}\fi
    \global\@mtc@Himlot@false
    \addtocontents{lot}{\protect\mtc@restoretocdepth}}}}
\@ifundefined{chapter}{%
   \@ifundefined{section}%
      {\mtcPackageWarningNoLine[W0001]{minitoc}%
       {\string\chapter\space and \string\section\space are undefined.%
        \MessageBreak
        Cannot use \string\mtcfixglossary \space without
        \MessageBreak
        optional argument [part]}%
       \@ifundefined{part}%
         {\mtcPackageError[E0001]{minitoc}%
            {But \string\part\space is undefined}%
            {\string\mtcfixglossary\space not usable}}%
       {\mtcPackageWarningNoLine[W0006]{minitoc}%
          {\string\mtcfixglossary\space can only be used
           \MessageBreak
           with the [part] optional argument,
           \MessageBreak
           which becomes the default}%
        \def\mtc@glofix@level{part}%
       }}%
       {\def\mtc@glofix@level{section}}}%
{\def\mtc@glofix@level{chapter}}
\newif\if@mtcfixglossary@ \@mtcfixglossary@false
\newcommand{\mtcfixglossary}[1][\mtc@glofix@level]{%
   \@mtcfixglossary@false
   \expandafter%
    \ifx\csname #1\endcsname\part\relax\@mtcfixglossary@true\fi
   \expandafter%
    \ifx\csname #1\endcsname\chapter\relax\@mtcfixglossary@true\fi
   \expandafter%
    \ifx\csname #1\endcsname\section\relax\@mtcfixglossary@true\fi
   \if@mtcfixglossary@
   \addcontentsline{lof}{x\mtc@glofix@level}{}%
   \addcontentsline{lot}{x\mtc@glofix@level}{}%
   \csname mtcadd\mtc@glofix@level\endcsname\relax
   \else
   \mtcPackageError[E0026]{minitoc}%
      {The optional argument of \string\mtcfixglossary
       \MessageBreak
       is wrong}%
      {It must be omitted (\mtc@glofix@level), or be part, chapter or section}%
   \fi
}%
\@ifundefined{chapter}{%
   \@ifundefined{section}%
      {\mtcPackageWarningNoLine[W0002]{minitoc}%
       {\string\chapter\space and \string\section\space are undefined.%
        \MessageBreak
        Cannot use \string\mtcfixindex \space without
        \MessageBreak
        optional argument [part]}%
       \@ifundefined{part}%
         {\mtcPackageError[E0002]{minitoc}%
            {But \string\part\space is undefined}%
            {\string\mtcfixindex\space not usable}}%
       {\mtcPackageWarningNoLine[W0007]{minitoc}%
          {\string\mtcfixindex\space can only be used with
           \MessageBreak
           the [part] optional argument,
           \MessageBreak
           which becomes the default}%
        \def\mtc@ixfix@level{part}%
       }}%
       {\def\mtc@ixfix@level{section}}}%
{\def\mtc@ixfix@level{chapter}}
\newif\if@mtcfixindex@ \@mtcfixindex@false
\newcommand{\mtcfixindex}[1][\mtc@ixfix@level]{%
   \@mtcfixindex@false
   \expandafter%
    \ifx\csname #1\endcsname\part\relax\@mtcfixindex@true\fi
   \expandafter%
    \ifx\csname #1\endcsname\chapter\relax\@mtcfixindex@true\fi
   \expandafter%
    \ifx\csname #1\endcsname\section\relax\@mtcfixindex@true\fi
   \if@mtcfixindex@
   \addcontentsline{lof}{x\mtc@ixfix@level}{}%
   \addcontentsline{lot}{x\mtc@ixfix@level}{}%
   \csname mtcadd\mtc@ixfix@level\endcsname\relax
   \else
   \mtcPackageError[E0027]{minitoc}%
      {The optional argument of \string\mtcfixindex
       \MessageBreak
       is wrong}%
      {It must be omitted (\mtc@ixfix@level), or be part, chapter or section}%
   \fi
}%
\@ifundefined{chapter}{%
   \@ifundefined{section}%
      {\mtcPackageWarningNoLine[W0095]{minitoc}%
       {\string\chapter\space and \string\section\space are undefined.%
        \MessageBreak
        Cannot use \string\mtcfixnomenclature \space without
        \MessageBreak
        optional argument [part]}%
       \@ifundefined{part}%
         {\mtcPackageError[E0039]{minitoc}%
            {But \string\part\space is undefined}%
            {\string\mtcfixnomclature\space not usable}}%
       {\mtcPackageWarningNoLine[W0096]{minitoc}%
          {\string\mtcfixnomenclature\space can only be used with
           \MessageBreak
           the [part] optional argument,
           \MessageBreak
           which becomes the default}%
        \def\mtc@nomenclfix@level{part}%
       }}%
       {\def\mtc@nomenclfix@level{section}}}%
{\def\mtc@nomenclfix@level{chapter}}
\newif\if@mtcfixnomenclature@ \@mtcfixnomenclature@false
\newcommand{\mtcfixnomenclature}[1][\mtc@nomenclfix@level]{%
   \@mtcfixnomenclature@false
   \expandafter%
    \ifx\csname #1\endcsname\part\relax\@mtcfixnomenclature@true\fi
   \expandafter%
    \ifx\csname #1\endcsname\chapter\relax\@mtcfixnomenclature@true\fi
   \expandafter%
    \ifx\csname #1\endcsname\section\relax\@mtcfixnomenclature@true\fi
   \if@mtcfixnomenclature@
   \addcontentsline{lof}{x\mtc@nomenclfix@level}{}%
   \addcontentsline{lot}{x\mtc@nomenclfix@level}{}%
   \csname mtcadd\mtc@nomenclfix@level\endcsname\relax
   \else
   \mtcPackageError[E0040]{minitoc}%
      {The optional argument of \string\mtcfixnomenclature
       \MessageBreak
       is wrong}%
      {It must be omitted (\mtc@nomenclfix@level), or be part, chapter or section}%
   \fi
}%
\newif\if@mtc@insellang@ \@mtc@insellang@false
\def\mtcselectlanguage#1{%
     \@mtc@insellang@true
     \InputIfFileExists{#1.mld}%
       {\mtcPackageInfo[I0010]{minitoc}{The #1 language is selected.%
         \MessageBreak
         }}%
       {\mtcPackageError[E0006]{minitoc}%
          {#1 is not a known language,
           \MessageBreak
           #1.mld not found.
           \MessageBreak
           Command ignored}%
          {See the minitoc documentation.
           \MessageBreak
           Correct the source using a valid language name.
           \MessageBreak
           Press RETURN}}%
     \@mtc@insellang@false
}
\def\mtcloadmlo#1{%
     \if@mtc@insellang@
     \InputIfFileExists{#1.mlo}%
       {\mtcPackageInfo[I0011]{minitoc}%
          {#1 minitoc language object selected.
           \MessageBreak}}%
       {\mtcPackageError[E0007]{minitoc}%
          {#1 is not a known minitoc
           \MessageBreak
           language object file (.mlo),
           \MessageBreak
           #1.mlo not found.
           \MessageBreak
           Command ignored}%
          {See the minitoc documentation.
           \MessageBreak
           Correct the source using a valid language name.
           \MessageBreak
           Press RETURN}}%
     \else
       \mtcPackageError[E0032]{minitoc}%
           {You are using the \string\mtcloadmlo\space command
            \MessageBreak
            outside of a .mld file}%
           {It will be ignored}
       \@mtc@insellang@false
     \fi}
\def\addcoffeeline#1#2#3{%
  \addtocontents{#1}{\protect\coffeeline{#2}{#3}{\null}}}
\def\coffeeline#1{\csname l@#1\endcsname}
\newcommand*\l@coffee{\@Undottedtocline{1}{1.5em}{2.3em}}
\AtBeginDocument{%
\@ifundefined{c@ptc}{}{\setcounter{ptc}{0}}
\@ifundefined{c@mtc}{}{\setcounter{mtc}{0}}
\@ifundefined{c@stc}{}{\setcounter{stc}{0}}}
\DeclareOption{tight}{\tightmtctrue}
\DeclareOption{loose}{\tightmtcfalse} % default
\DeclareOption{k-tight}{\ktightmtctrue}
\DeclareOption{k-loose}{\ktightmtcfalse} % default
\DeclareOption{checkfiles}{\@mtc@checkfilestrue} % default
\DeclareOption{nocheckfiles}{\@mtc@checkfilesfalse}
\DeclareOption{undotted}{\undottedmtctrue}
\DeclareOption{dotted}{\undottedmtcfalse} % default
\DeclareOption{notoccite}{\@mtc@notoccite@true}
\DeclareOption{shortext}{%
   \@mtc@longext@false
   \mtcPackageWarningNoLine[W0020]{minitoc}%
      {You have forced the use of short extensions}}
\newif\if@mtc@ss@insection@ \@mtc@ss@insection@false
\@ifundefined{chapter}{%
   \@ifundefined{section}{\DeclareOption{insection}{%
   \mtcPackageError[E0035]{minitoc}%
      {You have used the `insection' option in
       \MessageBreak
       a document where chapters are defined.
       \MessageBreak
       This is not compatible: option ignored.}%
      {Remove this option.
       \MessageBreak
       Type <return> and rerun LaTeX}
                          }}%
                         {%
                          \DeclareOption{insection}%
                           {\@mtc@ss@insection@true}%
                         }%
}{}
\newif\if@mtc@listfiles@ \@mtc@listfiles@true
\DeclareOption{listfiles}{\@mtc@listfiles@true}
\DeclareOption{nolistfiles}{\@mtc@listfiles@false}
\def\@gobblethree#1#2#3{\empty}
\def\mtc@listmisslanguages{}
\def\mtc@addmisslanguage#1{%
    \let\mtc@LML\mtc@listmisslanguages
    \edef\mtc@listmisslanguages{\mtc@LML \MessageBreak #1}}
\newif\if@mtc@misslang\@mtc@misslangfalse
\newcommand{\mtc@setlangopt}[1]{%
   \IfFileExists{#1.mld}%
      {\DeclareOption{#1}{\mtcselectlanguage{#1}}}%
      {\@mtc@misslangtrue \mtc@addmisslanguage{#1.mld}
       \mtcPackageInfo[I0050]{minitoc}%
          {The required "#1.mld" file is missing.
           \MessageBreak
           The "#1" language option will not be available.
           \MessageBreak
           Please install it from a recent distribution
           \MessageBreak
           or from the CTAN archives\@gobble}}%
}%
\newcommand{\mtc@setlangopto}[1]{%
   \IfFileExists{#1.mlo}%
     {\mtc@setlangopt{#1}}%
     {\@mtc@misslangtrue \mtc@addmisslanguage{#1.mlo}
       \mtcPackageInfo[I0051]{minitoc}%
          {The required "#1.mlo" file is missing.
           \MessageBreak
           The "#1" language option will not be available.
           \MessageBreak
           Please install it from a recent distribution
           \MessageBreak
           or from the CTAN archives\@gobble}%
   \IfFileExists{#1.mld}{}%
       {\@mtc@misslangtrue
        \mtc@addmisslanguage{#1.mld}
       \mtcPackageInfo[I0050]{minitoc}%
          {The required "#1.mld" file is missing.
           \MessageBreak
           The "#1" language option will not be available.
           \MessageBreak
           Please install it from a recent distribution
           \MessageBreak
           or from the CTAN archives\@gobble}%
       }%
     }%
}%
\newcommand{\mtc@setlangoptm}[1]{%
   \IfFileExists{#1.mld}%
      {\DeclareOption{#1}{\mtcselectlanguage{#1}}}%
      {\@mtc@misslangtrue
       \mtc@addmisslanguage{#1.mld}
       \mtcPackageError[E0038]{minitoc}%
          {Your minitoc installation is incomplete.
           \MessageBreak
           A mandatory minitoc language object file,
           \MessageBreak
           #1.mld, is not found.
           \MessageBreak
           We will try to continue with
           \MessageBreak
           current/default values}%
          {See the minitoc documentation.
           \MessageBreak
           Please fix your minitoc installation.
           \MessageBreak
           Press <return> to continue}%
           \providecommand{\ptctitle}{Table of Contents}%
           \providecommand{\plftitle}{List of Figures}%
           \providecommand{\plttitle}{List of Tables}%
           \providecommand{\mtctitle}{Contents}%
           \providecommand{\mlftitle}{Figures}%
           \providecommand{\mlttitle}{Tables}%
           \providecommand{\stctitle}{Contents}%
           \providecommand{\slftitle}{Figures}%
           \providecommand{\slttitle}{Tables}%
}}%
\AtEndDocument{%
  \if@mtc@misslang
     \mtcPackageWarningNoLine[W0093]{minitoc}%
       {Some "*.mld" or "*.mlo" files are missing
        \MessageBreak
        in your installation.
        \MessageBreak
        Search for the I0050 and I0051 info messages
        \MessageBreak
        in the \string\jobname.log file.
        \MessageBreak
        The full list of the missing language files
        \MessageBreak
        is given in the W0094 warning message.
        \MessageBreak
        Please install the missing files from
        \MessageBreak
        a recent distribution
        \MessageBreak
        or from the CTAN archives}%
     \mtcPackageWarningNoLine[W0094]{minitoc}%
       {Missing minitoc language file(s)\string:
        \MessageBreak
        \mtc@listmisslanguages\@gobblethree}%
  \fi
}%
\mtc@setlangopt{acadian}%
\mtc@setlangopt{acadien}%
\mtc@setlangopt{afrikaan}%
\mtc@setlangopt{afrikaans}%
\mtc@setlangopt{albanian}%
\mtc@setlangopt{american}%
\mtc@setlangopt{arab}%
\mtc@setlangopt{arab2}%
\mtc@setlangopt{arabi}%
\mtc@setlangopt{arabic}%
\mtc@setlangopt{armenian}%
\mtc@setlangopt{australian}%
\mtc@setlangopt{austrian}%
\mtc@setlangopt{bahasa}%
\mtc@setlangopt{bahasai}%
\mtc@setlangopt{bahasam}%
\mtc@setlangopt{bangla}%
\mtc@setlangopt{basque}%
\mtc@setlangopt{bengali}%
\mtc@setlangopt{bicig}%
\mtc@setlangopt{bicig2}%
\mtc@setlangopt{bicig3}%
\mtc@setlangopt{bithe}%
\mtc@setlangopt{brazil}%
\mtc@setlangopt{brazilian}%
\mtc@setlangopt{breton}%
\mtc@setlangopt{british}%
\mtc@setlangopt{bulgarian}%
\mtc@setlangopt{bulgarianb}%
\mtc@setlangopt{buryat}%
\mtc@setlangopt{buryat2}%
\mtc@setlangopt{canadian}%
\mtc@setlangopt{canadien}%
\mtc@setlangopt{castillan}%
\mtc@setlangopt{castillian}%
\mtc@setlangopt{catalan}%
\mtc@setlangopto{chinese1}%
\mtc@setlangopto{chinese2}%
\mtc@setlangopt{croatian}%
\mtc@setlangopt{czech}%
\mtc@setlangopt{danish}%
\mtc@setlangopt{devanagari}%
\mtc@setlangopt{dutch}%
\mtc@setlangoptm{english}%
\mtc@setlangopt{english1}%
\mtc@setlangopt{english2}%
\mtc@setlangopt{esperant}%
\mtc@setlangopt{esperanto}%
\mtc@setlangopt{estonian}%
\mtc@setlangopt{ethiopia}%
\mtc@setlangopt{ethiopian}%
\mtc@setlangopt{ethiopian2}%
\mtc@setlangopto{farsi1}%
\mtc@setlangopto{farsi2}%
\mtc@setlangopt{farsi3}%
\mtc@setlangopt{finnish}%
\mtc@setlangopt{finnish2}%
\mtc@setlangopt{francais}%
\mtc@setlangopt{french}%
\mtc@setlangopt{french1}%
\mtc@setlangopt{french2}%
\mtc@setlangopt{frenchb}%
\mtc@setlangopt{frenchle}%
\mtc@setlangopt{frenchpro}%
\mtc@setlangopt{galician}%
\mtc@setlangopt{german}%
\mtc@setlangopt{germanb}%
\mtc@setlangopt{germanb2}%
\mtc@setlangopt{greek}%
\mtc@setlangopt{greek-mono}%
\mtc@setlangopt{greek-polydemo}%
\mtc@setlangopt{greek-polykatha}%
\mtc@setlangopt{guarani}%
\mtc@setlangopto{hangul1}%
\mtc@setlangopto{hangul2}%
\mtc@setlangopto{hangul3}%
\mtc@setlangopto{hangul4}%
\mtc@setlangopto{hangul-u8}%
\mtc@setlangopto{hanja1}%
\mtc@setlangopto{hanja2}%
\mtc@setlangopto{hanja-u8}%
\mtc@setlangopt{hebrew}%
\mtc@setlangopt{hebrew2}%
\mtc@setlangopt{hindi}%
\mtc@setlangopt{hindi-modern}%
\mtc@setlangopt{hungarian}%
\mtc@setlangopt{icelandic}%
\mtc@setlangopt{indon}%
\mtc@setlangopt{indonesian}%
\mtc@setlangopt{interlingua}%
\mtc@setlangopt{irish}%
\mtc@setlangopt{italian}%
\mtc@setlangopt{italian2}%
\mtc@setlangopto{japanese}%
\mtc@setlangopto{japanese2}%
\mtc@setlangopto{japanese3}%
\mtc@setlangopto{japanese4}%
\mtc@setlangopto{japanese5}%
\mtc@setlangopto{japanese6}%
\mtc@setlangopt{kannada}%
\mtc@setlangopt{khalkha}%
\mtc@setlangopt{latin}%
\mtc@setlangopt{latin2}%
\mtc@setlangopt{latinc}%
\mtc@setlangopt{latinc2}%
\mtc@setlangopt{latvian}%
\mtc@setlangopt{latvian2}%
\mtc@setlangopt{letton}%
\mtc@setlangopt{letton2}%
\mtc@setlangopt{lithuanian}%
\mtc@setlangopt{lithuanian2}%
\mtc@setlangopt{lowersorbian}%
\mtc@setlangopt{lsorbian}%
\mtc@setlangopt{magyar}%
\mtc@setlangopt{magyar2}%
\mtc@setlangopt{magyar3}%
\mtc@setlangopt{malay}%
\mtc@setlangopt{malayalam-b}%
\mtc@setlangopt{malayalam-keli}%
\mtc@setlangopt{malayalam-keli2}%
\mtc@setlangopt{malayalam-mr}%
\mtc@setlangopto{malayalam-omega}%
\mtc@setlangopt{malayalam-rachana}%
\mtc@setlangopt{malayalam-rachana2}%
\mtc@setlangopt{malayalam-rachana3}%
\mtc@setlangopt{manju}%
\mtc@setlangopt{mexican}%
\mtc@setlangopt{meyalu}%
\mtc@setlangopt{mongol}%
\mtc@setlangopt{mongolb}%
\mtc@setlangopt{mongolian}%
\mtc@setlangopt{naustrian}%
\mtc@setlangopt{ngerman}%
\mtc@setlangopt{newzealand}%
\mtc@setlangopt{ngermanb}%
\mtc@setlangopt{ngermanb2}%
\mtc@setlangopt{norsk}%
\mtc@setlangopt{norsk2}%
\mtc@setlangopt{nynorsk}%
\mtc@setlangopt{nynorsk2}%
\mtc@setlangopt{occitan}%
\mtc@setlangopt{occitan2}%
\mtc@setlangopt{polish}%
\mtc@setlangopt{polish2}%
\mtc@setlangopt{polski}%
\mtc@setlangopt{portuges}%
\mtc@setlangopt{portuguese}%
\mtc@setlangopt{romanian}%
\mtc@setlangopt{romanian2}%
\mtc@setlangopt{romanian3}%
\mtc@setlangopt{russian}%
\mtc@setlangopt{russianb}%
\mtc@setlangopt{russianc}%
\mtc@setlangopt{russian2m}%
\mtc@setlangopt{russian2o}%
\mtc@setlangopto{russian-cca}%
\mtc@setlangopto{russian-cca1}%
\mtc@setlangopto{russian-lh}%
\mtc@setlangopto{russian-lhcyralt}%
\mtc@setlangopto{russian-lhcyrkoi}%
\mtc@setlangopto{russian-lhcyrwin}%
\mtc@setlangopt{samin}%
\mtc@setlangopt{scottish}%
\mtc@setlangopt{serbian}%
\mtc@setlangopt{serbianc}%
\mtc@setlangopt{slovak}%
\mtc@setlangopt{slovene}%
\mtc@setlangopt{spanish}%
\mtc@setlangopt{spanish2}%
\mtc@setlangopt{spanish3}%
\mtc@setlangopt{spanish4}%
\mtc@setlangopt{swahili}%
\mtc@setlangopt{swedish}%
\mtc@setlangopt{swedish2}%
\mtc@setlangopto{thai}%
\mtc@setlangopt{turkish}%
\mtc@setlangopt{uighur}%
\mtc@setlangopt{uighur2}%
\mtc@setlangopt{uighur3}%
\mtc@setlangopt{UKenglish}%
\mtc@setlangopt{ukraineb}%
\mtc@setlangopt{ukrainian}%
\mtc@setlangopt{uppersorbian}%
\mtc@setlangopt{USenglish}%
\mtc@setlangopt{usorbian}%
\mtc@setlangopt{vietnam}%
\mtc@setlangopt{vietnamese}%
\mtc@setlangopt{welsh}%
\mtc@setlangopt{xalx}%
\mtc@setlangopt{xalx2}%
\mtc@setlangopt{xalx3}%
\DeclareOption{hints}{\@mtc@hints@true}
\DeclareOption{nohints}{\@mtc@hints@false}
\newif\if@mtc@abstract@loaded@ \@mtc@abstract@loaded@false
\newif\if@mtc@toc@used@ \global\@mtc@toc@used@false
\newif\if@mtc@lof@used@ \global\@mtc@lof@used@false
\newif\if@mtc@lot@used@ \global\@mtc@lot@used@false
\def\mtc@hints@begindoc{%
\mtcPackageInfo[I0049]{minitoc(hints)}%
   {==> You requested the hints option.
    \MessageBreak
    Some hints are eventually given below\@gobble}%
\@ifpackageloaded{alphanum}%
   {\@mtc@hints@given@true
    \mtcPackageWarningNoLine[W0025]{minitoc(hints)}%
       {--- The alphanum package is loaded.
        \MessageBreak
        It is incompatible
        \MessageBreak
        with the minitoc package}}{}%
\@ifpackageloaded{appendix}{%
\@mtc@hints@given@true
\mtcPackageInfo[I0042]{minitoc(hints)}%
   {--- The appendix package is loaded.
    \MessageBreak
    See the minitoc package documentation
    \MessageBreak
    for specific precautions\@gobble}}{}%
\@ifpackageloaded{tocbibind}%
   {\@mtc@hints@given@true
   \mtcPackageInfo[I0046]{minitoc(hints)}%
      {--- The tocbibind package is loaded.
       \MessageBreak
       See the minitoc package documentation
       \MessageBreak
       for specific precautions\@gobble}}{}%
\@ifclassloaded{scrbook}%
   {\@mtc@hints@given@true
   \mtcPackageInfo[I0043]{minitoc(hints)}%
      {--- The KOMAScript scrbook class is loaded.
       \MessageBreak
       See the minitoc package documentation
       \MessageBreak
       for specific precautions\@gobble}}{}%
\@ifclassloaded{scrreprt}%
   {\@mtc@hints@given@true
   \mtcPackageInfo[I0043]{minitoc(hints)}%
      {--- The KOMAScript scrreprt class is loaded.
       \MessageBreak
       See the minitoc package documentation
       \MessageBreak
       for specific precautions\@gobble}}{}%
\@ifclassloaded{scrartcl}%
   {\@mtc@hints@given@true
   \mtcPackageInfo[I0043]{minitoc(hints)}%
      {--- The KOMAScript scrartcl class is loaded.
       \MessageBreak
       See the minitoc package documentation
       \MessageBreak
       for specific precautions\@gobble}}{}%
\@ifpackageloaded{tocloft}%
   {\@mtc@hints@given@true
    \mtcPackageInfo[I0047]{minitoc(hints)}%
       {--- The tocloft package is loaded.
        \MessageBreak
        See the minitoc package documentation
        \MessageBreak
        for specific precautions\@gobble}}{}%
\@ifpackageloaded{titlesec}%
   {\@mtc@hints@given@true
    \mtcPackageWarningNoLine[W0099]{minitoc(hints)}%
       {--- The titlesec package is loaded.
        \MessageBreak
        It is incompatible
        \MessageBreak
        with the minitoc package}}{}%
\@ifpackageloaded{titletoc}%
   {\@mtc@hints@given@true
    \mtcPackageWarningNoLine[W0040]{minitoc(hints)}%
       {--- The titletoc package is loaded.
        \MessageBreak
        It is incompatible
        \MessageBreak
        with the minitoc package}}{}%
\@ifpackageloaded{placeins}%
   {\if@mtc@ss@insection@
    \@ifpackagewith{placeins}{section}{}%
       {\@mtc@hints@given@true
        \mtcPackageWarningNoLine[W0031]{minitoc(hints)}%
           {--- The placeins package is loaded
            \MessageBreak
            without the section option,
            \MessageBreak
            but minitoc used the insection option
            \MessageBreak
            which implies it. Try to inverse the
            \MessageBreak
            loading order and use consistent options.
            \MessageBreak
            You may have got a message
            \MessageBreak
    ! LaTeX Error: Option clash for package placeins}%
       }%
    \@ifpackagewith{placeins}{above}%
       {\@mtc@hints@given@true
        \mtcPackageWarningNoLine[W0084]{minitoc(hints)}%
           {--- The placeins package is loaded
            \MessageBreak
            with the above option,
            \MessageBreak
            but minitoc used the insection option
            \MessageBreak
            which is incompatible with it.
            \MessageBreak
            Try to remove the above option
            \MessageBreak
            and use consistent options}%
       }{}%
    \@ifpackagewith{placeins}{below}%
       {\@mtc@hints@given@true
        \mtcPackageWarningNoLine[W0085]{minitoc(hints)}%
           {--- The placeins package is loaded
            \MessageBreak
            with the below option,
            \MessageBreak
            but minitoc used the insection option
            \MessageBreak
            which is incompatible with it.
            \MessageBreak
            Try to remove the below option
            \MessageBreak
            and use consistent options}%
       }{}%
    \fi
   \@ifpackagelater{placeins}{2005/04/18}{}{%
      \@mtc@hints@given@true
      \mtcPackageWarningNoLine[W0032]{minitoc(hints)}%
         {--- The placeins package loaded is
          \MessageBreak
          too old. You should use a version
          \MessageBreak
          dated of 2005/04/18 at least}%
   }%
   }{}%
\@ifclassloaded{memoir}%
   {\@mtc@hints@given@true
    \mtcPackageInfo[I0044]{minitoc(hints)}%
       {--- The memoir class is loaded.
        \MessageBreak
        See the minitoc package documentation
        \MessageBreak
        for specific precautions\@gobble}{}%
   }{}%
\@ifclassloaded{amsart}%
   {\@mtc@hints@given@true
    \mtcPackageWarningNoLine[W0026]{minitoc(hints)}%
       {--- The amsart class is loaded.
        \MessageBreak
        It is incompatible
        \MessageBreak
        with the minitoc package}}{}%
\@ifclassloaded{amsproc}%
   {\@mtc@hints@given@true
    \mtcPackageWarningNoLine[W0027]{minitoc(hints)}%
       {--- The amsproc class is loaded.
        \MessageBreak
        It is incompatible
        \MessageBreak with the minitoc package}}{}%
\@ifclassloaded{amsbook}%
   {\@mtc@hints@given@true
    \mtcPackageInfo[I0041]{minitoc(hints)}%
       {--- The amsbook class is loaded.
        \MessageBreak
        See the minitoc package documentation
        \MessageBreak
        for specific precautions\@gobble}{}%
   }{}%
\@ifpackageloaded{abstract}%
   {\@mtc@abstract@loaded@true%
   \@ifpackagewith{abstract}{addtotoc}%
      {\@mtc@hints@given@true
       \mtcPackageInfo[I0040]{minitoc(hints)}%
          {The ``abstract'' package has been
           \MessageBreak
           loaded with the ``addtotoc'' option.
           \MessageBreak
           You need to look at the
           \MessageBreak
           documentation to adjust.
           \MessageBreak}
      }}{}
\@ifclassloaded{jura}%
   {\@mtc@hints@given@true
    \mtcPackageWarningNoLine[W0029]{minitoc(hints)}%
       {--- The jura class is loaded.
        \MessageBreak
        It is incompatible
        \MessageBreak with the minitoc package}}{}%
\@ifpackageloaded{flowfram}%
   {\@mtc@hints@given@true
    \mtcPackageWarningNoLine[W0097]{minitoc(hints)}%
       {--- The flowfram package is loaded.
        \MessageBreak
        It is incompatible
        \MessageBreak
        with the minitoc package}}{}%
\@mtc@hints@w@false
\@ifundefined{part}{}{\ifx\part\mtc@hints@part\relax
   \else\@mtc@hints@w@true\fi}
\@ifundefined{part}{}{\ifx\@part\mtc@hints@@part\relax
   \else\@mtc@hints@w@true\fi}
\@ifundefined{part}{}{\ifx\@spart\mtc@hints@@spart\relax
   \else\@mtc@hints@w@true\fi}
\if@mtc@hints@w@\@mtc@hints@given@true%
  \mtcPackageWarningNoLine[W0030]{minitoc(hints)}%
     {--- The \string\part\space command is altered
          \MessageBreak
          after minitoc}
  \if@mtc@hyper@used@
     \mtcPackageWarningNoLine[W0023]{minitoc(hints)}%
        {--- It may be the consequence
             \MessageBreak
             of loading the ``hyperref'' package}
  \fi
\fi
\@mtc@hints@w@false
\@ifundefined{chapter}{}{\ifx\chapter\mtc@hints@chapter\relax
   \else\@mtc@hints@w@true\fi}%
\@ifundefined{chapter}{}{\ifx\@chapter\mtc@hints@@chapter\relax
   \else\@mtc@hints@w@true\fi}%
\@ifundefined{chapter}{}{\ifx\@schapter\mtc@hints@@schapter\relax
   \else\@mtc@hints@w@true\fi}%
\if@mtc@hints@w@\@mtc@hints@given@true%
  \mtcPackageWarningNoLine[W0028]{minitoc(hints)}%
     {--- The \string\chapter\space command is altered
          \MessageBreak
          after minitoc}
  \if@mtc@hyper@used@
     \mtcPackageWarningNoLine[W0023]{minitoc(hints)}%
        {--- It may be the consequence
             \MessageBreak
             of loading the ``hyperref'' package}
  \fi
\fi
\@mtc@hints@w@false
\@ifundefined{chapter}%
   {\@ifundefined{section}{}{\ifx\section\mtc@hints@section\relax\else
      \@mtc@hints@w@true\fi}
   \@ifundefined{section}{}{\ifx\@sect\mtc@hints@@sect\relax\else
      \@mtc@hints@w@true\fi}
   \@ifundefined{section}{}{\ifx\@ssect\mtc@hints@@ssect\relax\else
      \@mtc@hints@w@true\fi}
\if@mtc@hints@w@\@mtc@hints@given@true%
  \mtcPackageWarningNoLine[W0039]{minitoc(hints)}%
     {--- The \string\section\space command is altered
          \MessageBreak
          after minitoc}
  \if@mtc@hyper@used@
     \mtcPackageWarningNoLine[W0023]{minitoc(hints)}%
        {--- It may be the consequence
             \MessageBreak
             of loading the ``hyperref'' package}
  \fi
  \relax\else\fi}{}%
\if@mtc@hints@
\global\@mtc@toc@used@false
\global\@mtc@lof@used@false
\global\@mtc@lot@used@false
\let\mtc@sv@tableofcontents\tableofcontents
\def\tableofcontents%
   {\global\@mtc@toc@used@true\mtc@sv@tableofcontents}
\let\mtc@sv@listoffigures\listoffigures
\def\listoffigures%
   {\global\@mtc@lof@used@true\mtc@sv@listoffigures}
\let\mtc@sv@listoftables\listoftables
\def\listoftables%
   {\global\@mtc@lot@used@true\mtc@sv@listoftables}
\let\mtc@sv@fktableofcontents\faketableofcontents
\def\faketableofcontents%
   {\global\@mtc@toc@used@true\mtc@sv@fktableofcontents}
\let\mtc@sv@fklistoffigures\fakelistoffigures
\def\fakelistoffigures%
   {\global\@mtc@lof@used@true\mtc@sv@fklistoffigures}
\let\mtc@sv@fklistoftables\fakelistoftables
\def\fakelistoftables%
   {\global\@mtc@lot@used@true\mtc@sv@fklistoftables}
\fi
}
\def\mtc@hints@enddoc{%
\if@dosectlof@used@\@mtc@sect@floats@true\fi
\if@dosectlot@used@\@mtc@sect@floats@true\fi
\if@sectlof@used@\@mtc@sect@floats@true\fi
\if@sectlot@used@\@mtc@sect@floats@true\fi
\if@mtc@section@def@
\if@mtc@placeinsLoaded@ \else
  \if@mtc@sect@floats@%
   \mtcPackageWarningNoLine[W0056]{minitoc(hints)}%
      {You are using \string\dosectlof\space and/or
       \MessageBreak
       \string\dosectlot, \string\sectlof\space and/or \string\sectlot,
       \MessageBreak
       hence the ``insection'' package
       \MessageBreak
       option is recommended}%
   \@mtc@hints@w@true \@mtc@hints@given@true
  \fi
\fi
\if@mtc@part@def@
 \if@parttoc@used@
   \if@doparttoc@used@\else
   \mtcPackageWarningNoLine[W0062]{minitoc(hints)}%
      {You have used \string\parttoc,
       \MessageBreak
       but not \string\doparttoc}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@partlof@used@
   \if@dopartlof@used@\else
   \mtcPackageWarningNoLine[W0060]{minitoc(hints)}%
      {You have used \string\partlof,
       \MessageBreak
       but not \string\dopartlof}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@partlot@used@
   \if@dopartlot@used@\else
   \mtcPackageWarningNoLine[W0061]{minitoc(hints)}%
      {You have used \string\partlot,
       \MessageBreak
       but not \string\dopartlot}
   \@mtc@hints@given@true
   \fi
 \fi
\fi
\if@mtc@chapter@def@
 \if@minitoc@used@
   \if@dominitoc@used@\else
   \mtcPackageWarningNoLine[W0059]{minitoc(hints)}%
      {You have used \string\minitoc,
       \MessageBreak
       but not \string\dominitoc}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@minilof@used@
   \if@dominilof@used@\else
   \mtcPackageWarningNoLine[W0057]{minitoc(hints)}%
      {You have used \string\minilof,
       \MessageBreak
       but not \string\dominilof}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@minilot@used@
   \if@dominilot@used@\else
   \mtcPackageWarningNoLine[W0058]{minitoc(hints)}%
      {You have used \string\minilot,
       \MessageBreak
       but not \string\dominilot}
   \@mtc@hints@given@true
   \fi
 \fi
\fi
\if@mtc@section@def@
 \if@secttoc@used@
   \if@dosecttoc@used@\else
   \mtcPackageWarningNoLine[W0065]{minitoc(hints)}%
      {You have used \string\secttoc,
       \MessageBreak
       but not \string\dosecttoc}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@sectlof@used@
   \if@dosectlof@used@\else
   \mtcPackageWarningNoLine[W0063]{minitoc(hints)}%
      {You have used \string\sectlof,
       \MessageBreak
       but not \string\dosectlof}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@sectlot@used@
   \if@dosectlot@used@\else
   \mtcPackageWarningNoLine[W0064]{minitoc(hints)}%
      {You have used \string\sectlot,
       \MessageBreak
       but not \string\dosectlot}
   \fi
 \fi
\fi
\if@mtc@part@def@
 \if@doparttoc@used@
   \if@parttoc@used@\else
   \mtcPackageWarningNoLine[W0075]{minitoc(hints)}%
      {You have used \string\doparttoc,
       \MessageBreak
       but not \string\parttoc}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@dopartlof@used@
   \if@partlof@used@\else
   \mtcPackageWarningNoLine[W0076]{minitoc(hints)}%
      {You have used \string\dopartlof,
       \MessageBreak
       but not \string\partlof}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@dopartlot@used@
   \if@partlot@used@\else
   \mtcPackageWarningNoLine[W0077]{minitoc(hints)}%
      {You have used \string\dopartlot,
       \MessageBreak
       but not \string\partlot}
   \@mtc@hints@given@true
   \fi
 \fi
\fi
\if@mtc@chapter@def@
 \if@dominitoc@used@
   \if@minitoc@used@\else
   \mtcPackageWarningNoLine[W0078]{minitoc(hints)}%
      {You have used \string\dominitoc,
       \MessageBreak
       but not \string\minitoc}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@dominilof@used@
   \if@minilof@used@\else
   \mtcPackageWarningNoLine[W0079]{minitoc(hints)}%
      {You have used \string\dominilof,
       \MessageBreak
       but not \string\minilof}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@dominilot@used@
   \if@minilot@used@\else
   \mtcPackageWarningNoLine[W0080]{minitoc(hints)}%
      {You have used \string\dominilot,
       \MessageBreak
       but not \string\minilot}
   \@mtc@hints@given@true
   \fi
 \fi
\fi
\if@mtc@section@def@
 \if@dosecttoc@used@
   \if@secttoc@used@\else
   \mtcPackageWarningNoLine[W0081]{minitoc(hints)}%
      {You have used \string\dosecttoc,
       \MessageBreak
       but not \string\secttoc}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@dosectlof@used@
   \if@sectlof@used@\else
   \mtcPackageWarningNoLine[W0082]{minitoc(hints)}%
      {You have used \string\dosectlof,
       \MessageBreak
       but not \string\sectlof}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@dosectlot@used@
   \if@sectlot@used@\else
   \mtcPackageWarningNoLine[W0083]{minitoc(hints)}%
      {You have used \string\dosectlot,
       \MessageBreak
       but not \string\sectlot}
   \fi
 \fi
\fi
\fi
\if@mtc@part@def@
 \if@parttoc@used@
   \if@mtc@toc@used@\else
   \mtcPackageWarningNoLine[W0071]{minitoc(hints)}%
      {You have used \string\parttoc\space but not
       \MessageBreak
       \string\tableofcontents
       \MessageBreak
       nor \string\faketableofcontents}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@partlof@used@
   \if@mtc@lof@used@\else
   \mtcPackageWarningNoLine[W0069]{minitoc(hints)}%
      {You have used \string\partlof\space but not
       \MessageBreak
       \string\listoffigures
       \MessageBreak
       nor \string\fakelistoffigures}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@partlot@used@
   \if@mtc@lot@used@\else
   \mtcPackageWarningNoLine[W0070]{minitoc(hints)}%
      {You have used \string\partlot\space but not
       \MessageBreak
       \string\listoftables
       \MessageBreak
       nor \string\fakelistoftables}
   \@mtc@hints@given@true
   \fi
 \fi
\fi
\if@mtc@chapter@def@
 \if@minitoc@used@
   \if@mtc@toc@used@\else
   \mtcPackageWarningNoLine[W0068]{minitoc(hints)}%
      {You have used \string\minitoc\space but not
       \MessageBreak
       \string\tableofcontents
       \MessageBreak
       nor \string\faketableofcontents}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@minilof@used@
   \if@mtc@lof@used@\else
   \mtcPackageWarningNoLine[W0066]{minitoc(hints)}%
      {You have used \string\minilof\space but not
       \MessageBreak
       \string\listoffigures
       \MessageBreak
       nor \string\fakelistoffigures}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@minilot@used@
   \if@mtc@lot@used@\else
   \mtcPackageWarningNoLine[W0067]{minitoc(hints)}%
      {You have used \string\minilot\space but not
       \MessageBreak
       \string\listoftables
       \MessageBreak
       nor \string\fakelistoftables}
   \@mtc@hints@given@true
   \fi
 \fi
\fi
\if@mtc@section@def@
 \if@secttoc@used@
   \if@mtc@toc@used@\else
   \mtcPackageWarningNoLine[W0074]{minitoc(hints)}%
      {You have used \string\secttoc\space but not
       \MessageBreak
       \string\tableofcontents
       \MessageBreak
       nor \string\faketableofcontents}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@sectlof@used@
   \if@mtc@lof@used@\else
   \mtcPackageWarningNoLine[W0072]{minitoc(hints)}%
      {You have used \string\sectlof\space but not
       \MessageBreak
       \string\listoffigures
       \MessageBreak
       nor \string\fakelistoffigures}
   \@mtc@hints@given@true
   \fi
 \fi
 \if@sectlot@used@
   \if@mtc@lot@used@\else
   \mtcPackageWarningNoLine[W0073]{minitoc(hints)}%
      {You have used \string\sectlot\space but not
       \MessageBreak
       \string\listoftables
       \MessageBreak
       nor \string\fakelistoftables}
   \@mtc@hints@given@true
   \fi
 \fi
\fi
\def\mtc@hints@checklongext{%
\if@mtc@longext@
\else
  \if@mtc@part@def@
    \ifnum 99 < \value{ptc}\relax \@mtc@hints@given@true
       \mtcPackageWarningNoLine[W0054]{minitoc(hints)}%
          {You have used short extensions
           \MessageBreak
           and more than 99 parts (\arabic{ptc})}
    \fi
  \fi
  \if@mtc@chapter@def@
    \ifnum 99 < \value{mtc}\relax \@mtc@hints@given@true
       \mtcPackageWarningNoLine[W0053]{minitoc(hints)}%
          {You have used short extensions
           \MessageBreak
           and more than 99 chapters (\arabic{mtc})}
    \fi
  \else
    \if@mtc@section@def@
      \ifnum 99 < \value{stc}\relax \@mtc@hints@given@true
         \mtcPackageWarningNoLine[W0055]{minitoc(hints)}%
            {You have used short extensions
             \MessageBreak
             and more than 99 sections (\arabic{stc})}
      \fi
    \fi
  \fi
\fi}
\mtc@hints@checklongext
\if@mtc@sectstyLoaded@\else
  \if@mtc@sectstyLoaded@a@
     \mtcPackageWarningNoLine[W0037]{minitoc(hints)}%
     {The sectsty package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@varsectsLoaded@\else
  \if@mtc@varsectsLoaded@a@
     \mtcPackageWarningNoLine[W0038]{minitoc(hints)}%
     {The varsects package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@fncychapLoaded@\else
  \if@mtc@fncychapLoaded@a@
     \mtcPackageWarningNoLine[W0086]{minitoc(hints)}%
     {The fncychap package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@HgcLoaded@\else
  \if@mtc@HgcLoaded@a@
     \mtcPackageWarningNoLine[W0092]{minitoc(hints)}%
     {The hangcaption package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@quotchapLoaded@\else
  \if@mtc@quotchapLoaded@a@
     \mtcPackageWarningNoLine[W0087]{minitoc(hints)}%
     {The quotchap package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@romannumLoaded@\else
  \if@mtc@romannumLoaded@a@
     \mtcPackageWarningNoLine[W0088]{minitoc(hints)}%
     {The romannum package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@sfheadersLoaded@\else
  \if@mtc@sfheadersLoaded@a@
     \mtcPackageWarningNoLine[W0089]{minitoc(hints)}%
     {The sfheaders package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@alnumsecLoaded@\else
  \if@mtc@alnumsecLoaded@a@
     \mtcPackageWarningNoLine[W0090]{minitoc(hints)}%
     {The alnumsec package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@captcontLoaded@\else
  \if@mtc@captcontLoaded@a@
     \mtcPackageWarningNoLine[W0091]{minitoc(hints)}%
     {The captcont package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@captionLoaded@\else
  \if@mtc@captionLoaded@a@
     \mtcPackageWarningNoLine[W0033]{minitoc(hints)}%
     {The caption package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@captionIILoaded@\else
  \if@mtc@captionIILoaded@a@
     \mtcPackageWarningNoLine[W0034]{minitoc(hints)}%
     {The caption2 package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@ccaptionLoaded@\else
  \if@mtc@ccaptionLoaded@a@
     \mtcPackageWarningNoLine[W0035]{minitoc(hints)}%
     {The ccaption package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@mcaptionLoaded@\else
  \if@mtc@mcaptionLoaded@a@
     \mtcPackageWarningNoLine[W0036]{minitoc(hints)}%
     {The mcaption package should be
      \MessageBreak
      loaded BEFORE the minitoc package}
     \@mtc@hints@given@true
  \fi
\fi
\if@mtc@floatLoaded@\
   \mtcPackageInfo[I0053]{minitoc(hints)}%
   {You have loaded the float package;
    \MessageBreak
    please be aware that the minitoc package
    \MessageBreak
    facilities can not be used for new types
    \MessageBreak
    of floats defined by the float package\@gobble}
   \@mtc@hints@given@true
\fi
\if@mtc@floatrowLoaded@\
   \mtcPackageInfo[I0053]{minitoc(hints)}%
   {You have loaded the floatrow package;
    \MessageBreak
    please be aware that the minitoc package
    \MessageBreak
    facilities can not be used for new types
    \MessageBreak
    of floats defined by the floatrow package\@gobble}
   \@mtc@hints@given@true
\fi
\if@mtc@trivfloatLoaded@\
   \mtcPackageInfo[I0053]{minitoc(hints)}%
   {You have loaded the trivfloat package;
    \MessageBreak
    please be aware that the minitoc package
    \MessageBreak
    facilities can not be used for new types
    \MessageBreak
    of floats defined by the trivfloat package\@gobble}
   \@mtc@hints@given@true
\fi
\if@mtc@rotfloatLoaded@\
   \mtcPackageInfo[I0053]{minitoc(hints)}%
   {You have loaded the rotfloat package;
    \MessageBreak
    please be aware that the minitoc package
    \MessageBreak
    facilities can not be used for new types
    \MessageBreak
    of floats defined by the rotfloat package\@gobble}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@parttoc@
   \mtcPackageWarningNoLine[W0046]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty parttocs}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@partlof@
   \mtcPackageWarningNoLine[W0044]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty partlofs}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@partlot@
   \mtcPackageWarningNoLine[W0045]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty partlots}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@minitoc@
   \mtcPackageWarningNoLine[W0043]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty minitocs}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@minilof@
   \mtcPackageWarningNoLine[W0041]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty minilofs}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@minilot@
   \mtcPackageWarningNoLine[W0042]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty minilots}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@secttoc@
   \mtcPackageWarningNoLine[W0049]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty secttocs}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@sectlof@
   \mtcPackageWarningNoLine[W0047]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty sectlofs}
   \@mtc@hints@given@true
\fi
\if@mtc@empty@sectlot@
   \mtcPackageWarningNoLine[W0048]{minitoc(hints)}%
   {You have attempted to insert
    \MessageBreak
    empty sectlots}
   \@mtc@hints@given@true
\fi
\if@firstpartis@used@
   \mtcPackageWarningNoLine[W0051]{minitoc(hints)}%
   {You have invoked an obsolete (ignored)
    \MessageBreak
    command: \string\firstpartis}
   \@mtc@hints@given@true
\fi
\if@firstchapteris@used@
   \mtcPackageWarningNoLine[W0050]{minitoc(hints)}%
   {You have invoked an obsolete (ignored)
    \MessageBreak
    command: \string\firstchapteris}
   \@mtc@hints@given@true
\fi
\if@firstsectionis@used@
   \mtcPackageWarningNoLine[W0052]{minitoc(hints)}%
   {You have invoked an obsolete (ignored)
    \MessageBreak
    command: \string\firstsectionis}
   \@mtc@hints@given@true
\fi
\if@mtc@hints@given@
   \mtcPackageWarningNoLine[W0024]{minitoc(hints)}%
      {Some hints have been written
       \MessageBreak
       in the \jobname.log file}
\else
   \mtcPackageInfo[I0019]{minitoc(hints)}%
      {No hints have been written
       \MessageBreak
       in the \jobname.log file.\@gobble}
\fi
}
     \InputIfFileExists{english.mld}%
       {\ExecuteOptions{english}}%
       {\mtcPackageError[E0036]{minitoc}%
          {Your minitoc installation is incomplete.
           \MessageBreak
           The minitoc language object file (.mld),
           \MessageBreak
           english.mld is not found.
           \MessageBreak
           We will try to continue with default values}%
          {See the minitoc documentation.
           \MessageBreak
           Please fix your minitoc installation.
           \MessageBreak
           Press <return> to continue}%
        \providecommand{\ptctitle}{Table of Contents}%
        \providecommand{\plftitle}{List of Figures}%
        \providecommand{\plttitle}{List of Tables}%
        \providecommand{\mtctitle}{Contents}%
        \providecommand{\mlftitle}{Figures}%
        \providecommand{\mlttitle}{Tables}%
        \providecommand{\stctitle}{Contents}%
        \providecommand{\slftitle}{Figures}%
        \providecommand{\slttitle}{Tables}%
      }%
\ProcessOptions*
\if@mtc@ss@insection@
   \RequirePackage{flafter}[2000/07/23]%
   \RequirePackage[section,verbose]{placeins}[2005/04/18]%
   \@ifpackageloaded{placeins}%
      {\@mtc@placeinsLoaded@true}{\@mtc@placeinsLoaded@false}%
\fi
\if@mtc@notoccite@
   \RequirePackage{notoccite}%
\fi
\def\mtc@maf{%
       \mtcPackageInfo[I0009]{minitoc}%
                      {Listing minitoc auxiliary files.
                       \MessageBreak
                       Creating the \jobname.maf file\@gobble}
       \immediate\closeout\tf@mtc
       \immediate\openout\tf@mtc \jobname.maf
       \if@mtc@longext@\mtc@maf@long\else\mtc@maf@short\fi
       \immediate\closeout\tf@mtc}
\def\mtc@addtomaf#1{%
  \IfFileExists{#1}{\immediate\write\tf@mtc{#1}}{}}
\def\mtc@maf@long{%
       \mtc@addtomaf{\jobname.mtc}
       \mtc@addtomaf{\jobname.mtc0}
\@ifundefined{c@ptc}{}{\loop\ifnum\c@ptc>\z@\relax
       \mtc@addtomaf{\jobname.ptc\arabic{ptc}}
       \mtc@addtomaf{\jobname.plf\arabic{ptc}}
       \mtc@addtomaf{\jobname.plt\arabic{ptc}}
       \advance\c@ptc\m@ne\repeat}
\@ifundefined{c@mtc}{}{%
       \loop\ifnum\c@mtc>\z@\relax
       \mtc@addtomaf{\jobname.mtc\arabic{mtc}}
       \mtc@addtomaf{\jobname.mlf\arabic{mtc}}
       \mtc@addtomaf{\jobname.mlt\arabic{mtc}}
       \advance\c@mtc\m@ne\repeat}
\@ifundefined{c@stc}{}{\loop\ifnum\c@stc>\z@\relax
       \mtc@addtomaf{\jobname.stc\arabic{stc}}
       \mtc@addtomaf{\jobname.slf\arabic{stc}}
       \mtc@addtomaf{\jobname.slt\arabic{stc}}
       \advance\c@stc\m@ne\repeat}}
\def\mtc@maf@short{%
       \mtc@addtomaf{\jobname.mtc}
\@ifundefined{c@ptc}{}{\loop\ifnum\c@ptc>\z@\relax
       \mtc@addtomaf{\jobname.P\arabic{ptc}}
       \mtc@addtomaf{\jobname.G\arabic{ptc}}
       \mtc@addtomaf{\jobname.U\arabic{ptc}}
       \advance\c@ptc\m@ne\repeat}
\@ifundefined{c@mtc}{}{\loop\ifnum\c@mtc>\z@\relax
       \mtc@addtomaf{\jobname.M\arabic{mtc}}
       \mtc@addtomaf{\jobname.F\arabic{mtc}}
       \mtc@addtomaf{\jobname.T\arabic{mtc}}
       \advance\c@mtc\m@ne\repeat}
\@ifundefined{c@stc}{}{\loop\ifnum\c@stc>\z@\relax
       \mtc@addtomaf{\jobname.S\arabic{stc}}
       \mtc@addtomaf{\jobname.H\arabic{stc}}
       \mtc@addtomaf{\jobname.V\arabic{stc}}
       \advance\c@stc\m@ne\repeat}}
\if@mtc@listfiles@{\AtEndDocument{\mtc@maf}}\else\fi
\if@mtc@hints@
   \AtBeginDocument{\mtc@hints@begindoc}%
   \AtEndDocument{\mtc@hints@enddoc}%
\fi
\@ifundefined{part}{}{\let\mtc@hints@part\part
                         \let\mtc@hints@@part\@part
                         \let\mtc@hints@@spart\@spart}
\@ifundefined{chapter}{}{\let\mtc@hints@chapter\chapter
                         \let\mtc@hints@@chapter\@chapter
                         \let\mtc@hints@@schapter\@schapter}
\@ifundefined{section}{}{\let\mtc@hints@section\section
                         \let\mtc@hints@@sect\@sect
                         \let\mtc@hints@@ssect\@ssect}
\def\mtc@classck#1{%
  \mtcPackageError[E0037]{minitoc}%
     {The \csname #1\endcsname\space command is incompatible
      \MessageBreak
      with the document class}%
     {Correct the source code.
      \MessageBreak
      Type <return> and rerun LaTeX}%
}%
\AtBeginDocument{%
 \providecommand{\doparttoc}[1][l]{\mtc@classck{doparttoc}}%
 \providecommand{\dopartlof}[1][l]{\mtc@classck{dopartlof}}%
 \providecommand{\dopartlot}[1][l]{\mtc@classck{dopartlot}}%
 \providecommand{\dominitoc}[1][l]{\mtc@classck{dominitoc}}%
 \providecommand{\dominilof}[1][l]{\mtc@classck{dominilof}}%
 \providecommand{\dominilot}[1][l]{\mtc@classck{dominilot}}%
 \providecommand{\dosecttoc}[1][l]{\mtc@classck{dosecttoc}}%
 \providecommand{\dosectlof}[1][l]{\mtc@classck{dosectlof}}%
 \providecommand{\dosectlot}[1][l]{\mtc@classck{dosectlot}}%
 \providecommand{\parttoc}[1][l]{\mtc@classck{parttoc}}%
 \providecommand{\partlof}[1][l]{\mtc@classck{partlof}}%
 \providecommand{\partlot}[1][l]{\mtc@classck{partlot}}%
 \providecommand{\minitoc}[1][l]{\mtc@classck{minitoc}}%
 \providecommand{\minilof}[1][l]{\mtc@classck{minilof}}%
 \providecommand{\minilot}[1][l]{\mtc@classck{minilot}}%
 \providecommand{\secttoc}[1][l]{\mtc@classck{secttoc}}%
 \providecommand{\sectlof}[1][l]{\mtc@classck{sectlof}}%
 \providecommand{\sectlot}[1][l]{\mtc@classck{sectlot}}%
}
%%
\endinput
%%
%% End of file `ws-minitoc.sty'.
