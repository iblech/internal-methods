\documentclass[10pt]{amsart}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{etex}
\usepackage{amsmath,amsthm,amssymb,stmaryrd,color,graphicx,multirow}
\usepackage{mathtools}
\usepackage{setspace}
\usepackage{bussproofs}
\usepackage{xspace}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}
\usepackage[protrusion=true,expansion=true]{microtype}
\usepackage[bookmarksdepth=2,pdfencoding=auto]{hyperref}
\usepackage[all]{xy}

\usepackage{tikz}
\usetikzlibrary{calc,shapes.callouts,shapes.arrows}
\newcommand{\hcancel}[5]{%
    \tikz[baseline=(tocancel.base)]{
        \node[inner sep=0pt,outer sep=0pt] (tocancel) {#1};
        \draw[red, line width=0.3mm] ($(tocancel.south west)+(#2,#3)$) -- ($(tocancel.north east)+(#4,#5)$);
    }%
}

\usepackage[natbib=true,style=numeric]{biblatex}
\usepackage[babel]{csquotes}
\bibliography{bibliography}

\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem{ex}[defn]{Example}

\theoremstyle{plain}

\newtheorem{prop}[defn]{Proposition}
\newtheorem{cor}[defn]{Corollary}
\newtheorem{lemma}[defn]{Lemma}
\newtheorem{thm}[defn]{Theorem}

\theoremstyle{remark}
\newtheorem{rem}[defn]{Remark}
\newtheorem{question}[defn]{Question}

\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\FF}{\mathbb{F}}
\renewcommand{\AA}{\mathbb{A}}
\newcommand{\A}{\mathcal{A}}
\renewcommand{\C}{\mathcal{C}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\F}{\mathcal{F}}
\renewcommand{\G}{\mathcal{G}}
\renewcommand{\H}{\mathcal{H}}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\K}{\mathcal{K}}
\newcommand{\N}{\mathcal{N}}
\newcommand{\M}{\mathcal{M}}
\renewcommand{\L}{\mathcal{L}}
\renewcommand{\P}{\mathcal{P}}
\newcommand{\R}{\mathcal{R}}
\newcommand{\T}{\mathcal{T}}
\newcommand{\I}{\mathcal{I}}
\newcommand{\J}{\mathcal{J}}
\renewcommand{\S}{\mathcal{S}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\GG}{\mathbb{G}}
\newcommand{\aaa}{\mathfrak{a}}
\newcommand{\ppp}{\mathfrak{p}}
\newcommand{\qqq}{\mathfrak{q}}
\newcommand{\mmm}{\mathfrak{m}}
\newcommand{\nnn}{\mathfrak{n}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\HOM}{\mathcal{H}\mathrm{om}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\placeholder}{\underline{\quad}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\Set}{\mathrm{Set}}
\newcommand{\Grp}{\mathrm{Grp}}
\newcommand{\Vect}{\mathrm{Vect}}
\newcommand{\Sh}{\mathrm{Sh}}
\newcommand{\PSh}{\mathrm{PSh}}
\newcommand{\Zar}{\mathrm{Zar}}
\newcommand{\Et}{\mathrm{\acute{E}t}}
\newcommand{\Sch}{\mathrm{Sch}}
\newcommand{\Mod}{\mathrm{Mod}}
\newcommand{\Alg}{\mathrm{Alg}}
\newcommand{\Ring}{\mathrm{Ring}}
\newcommand{\LRL}{\mathrm{LRL}}
\newcommand{\pt}{\mathrm{pt}}
\newcommand{\tors}{\mathrm{tors}}
\DeclareMathOperator{\Spec}{Spec}
\newcommand{\QcohSpec}[2]{\mathrm{Spec}^{\mathrm{qcoh}}_{#1}{#2}}
\newcommand{\RelSpec}[2]{\mathrm{RelSpec}_{#1}{#2}}
\newcommand{\op}{\mathrm{op}}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\Clos}{cl}
\DeclareMathOperator{\Kernel}{ker}
\DeclareMathOperator{\supp}{supp}
\newcommand{\Ass}{\mathrm{Ass}}
\newcommand{\Open}{\T}
\newcommand{\?}{\,{:}\,}
\renewcommand{\_}{\mathpunct{.}\,}
\newcommand{\speak}[1]{\ulcorner\text{\textnormal{#1}}\urcorner}
\newcommand{\Ll}{\vcentcolon\Longleftrightarrow}
\newcommand{\notat}[1]{{!#1}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\lhra}{\ensuremath{\lhook\joinrel\relbar\joinrel\rightarrow}}
\newcommand{\hra}{\hookrightarrow}
\newcommand{\brak}[1]{{\llbracket{#1}\rrbracket}}
\newcommand{\sdense}{{\widehat\Box}}
\newcommand{\sdenseother}{\Box}
\newcommand{\ie}{i.\,e.\@\xspace}
\newcommand{\eg}{e.\,g.\@\xspace}
\newcommand{\vs}{vs.\@\xspace}
\newcommand{\resp}{resp.\@\xspace}
\newcommand{\inv}{inv.\@}
\newcommand{\notnot}{\emph{not not}\xspace}
\newcommand{\affl}{\ensuremath{{\ul{\AA}^1_S}}\xspace}
\newcommand{\afflx}{\ensuremath{{\ul{\AA}^1_X}}\xspace}
\newcommand{\affla}{\ensuremath{{\ul{\AA}^1_{\Spec A}}}\xspace}
\newcommand{\xra}{\xrightarrow}

\newcommand{\XXX}[1]{\textbf{XXX: #1}}

\newcommand{\defeq}{\vcentcolon=}
\newcommand{\defequiv}{\vcentcolon\equiv}
\newcommand{\seq}[1]{\mathrel{\vdash\!\!\!_{#1}}}

\definecolor{gray}{rgb}{0.7,0.7,0.7}

\begin{document}

A basic concept in the functor-of-points approach to algebraic geometry is the
concept of an \emph{open subfunctor}. It is used to delimit schemes from more
general kinds of spaces: A functor is deemed to be a scheme if and only if it
admits a covering by open subfunctors which are representable.

The following definition is phrased in such a way as to apply to any of the
several ways to define the big Zariski topos~$\Zar(S)$. In particular, it
applies to the definition using the site consisting of affine schemes which are
locally of finite presentation over~$S$. If~$S$ is affine, the definition only
refers to affine schemes and open subschemes of affine schemes and is therefore
suitable if one wants to found the theory of schemes using the functorial
approach.

\begin{defn}[{\cite[DÃ©finition~I.1.3.6 on page~10]{demazure:gabriel},
\cite[Tag~01JI]{stacks-project}}]
A subfunctor~$U \hookrightarrow X$ in~$\Zar(S)$ is an \emph{open subfunctor} if
and only if for any object~$(T \to S)$ of the site used to define~$\Zar(S)$
and any~$x \in X(T)$ there exists an open subscheme~$T_0 \subseteq T$
such that for any object~$(T' \xra{f} T \to S)$ of the site used to
define~$\Zar(S)$ the map~$T' \to T$ factors over~$T_0$ if and only if~$X(f)(x)
\in U(T')$.
\end{defn}

From the point of view of the internal language of~$\Zar(S)$, a subfunctor~$U
\hookrightarrow X$ looks like the inclusion of a subset. The following
proposition answers the natural question how one can characterize those
inclusions which externally correspond to open subfunctors.

\begin{prop}\label{prop:characterization-open-subfunctor}
Let~$X \in \Zar(S)$ be a Zariski sheaf. A subfunctor~$U
\hookrightarrow X$ is open if and only if, from the internal point of view
of~$\Zar(S)$, it holds that for all~$x \? X$ there is an ideal~$J \subseteq
\affl$ such that~$\affl/J$ is quasicoherent and such that~$x \in U$ if and only
if~$1 \in J$. In formal language:
\begin{multline*}
  \qquad\qquad\Zar(S) \models
  \forall x\?X\_
  \exists J \subseteq \affl\_ \\
  \speak{$J$ is an ideal} \wedge
  \speak{$\affl/J$ is quasicoherent} \wedge
  (x \in U \Leftrightarrow 1 \in J). \end{multline*}
\end{prop}

The displayed condition is only meaningful in an intuitionistic context as
provided by the big Zariski topos. In classical logic, the condition would be
trivially satisfied for any subfunctor~$U \hookrightarrow X$: Classically, we
have~$(x \in U) \vee (x \not\in U)$. If~$x \in U$, we can pick~$J = (1)$, and
if~$x \not\in U$, we can pick~$J = (0)$ (whereby the quotient~$\affl/J$ is
isomorphic to~$\affl$, thus finitely presented and therefore in particular
quasicoherent).\footnote{Strictly speaking, incompability with classical
logical surfaces even earlier: in our internal quasicoherence condition. The
map~$E \otimes_\affl A \to [\Spec(A), E]$ which the condition demands to be
bijective has hardly any chance to be surjective if the law of excluded middle
is available to define maps~$\Spec(A) \to E$ by case distinction.}

\begin{cor}\label{cor:sufficient-criterion-open-subfunctor}
Let~$X \in \Zar(S)$ be a Zariski sheaf. Let~$U \hookrightarrow X$ be
a subfunctor. If
\[
  \Zar(S) \models
  \forall x\?X\_
  \bigvee_{n \geq 0} \exists f_1,\ldots,f_n\?\affl\_
  (x \in U \Leftrightarrow \bigvee_i \speak{$f_i$ \inv}),
\]
then the subfunctor is open.
\end{cor}

\begin{proof}[Proof of Corollary~\ref{cor:sufficient-criterion-open-subfunctor}]
We show that the assumption implies the displayed condition of
Proposition~\ref{prop:characterization-open-subfunctor} in the internal
language. Given elements~$f_1,\ldots,f_n$ as in the assumption, we
construct the ideal~$J \defeq (f_1,\ldots,f_n) \subseteq \affl$. The
quotient~$\affl/J$ is indeed quasicoherent, being finitely presented, and
the statement that~$1 \in J$ is equivalent to one of
the~$f_i$ being invertible by locality of~$\affl$.
\end{proof}

\begin{proof}[Proof of Proposition~\ref{prop:characterization-open-subfunctor}]
...
\end{proof}

\begin{rem}The radical~$\sqrt{J}$ of the ideal~$J$ appearing in
Proposition~\ref{prop:characterization-open-subfunctor} is unique:
It is equal to the radical ideal
\[ K \defeq \{ f\?\affl \,|\, \speak{$f$ \inv} \Rightarrow (x \in U) \}
\subseteq \affl. \]
It's obvious that~$J \subseteq K$ and therefore~$\sqrt{J} \subseteq K$.
For the converse direction, let~$f \in K$ be given. Since~$\affl/J$ is
quasicoherent, the canonical map
\[ (\affl/J)[f^{-1}] \longrightarrow [ \Spec(\affl[f^{-1}]), \affl/J ] \]
is bijective. Since~$\Spec(\affl[f^{-1}]) \cong \brak{\speak{$f$ \inv}}$, the image
of~$1$ is zero: If~$\Spec(\affl[f^{-1}])$ is inhabited, the element~$f$ is invertible and
therefore~$x$ is an element of~$U$. This implies that~$1 \in J$.
Thereby~$\affl/J = 0$. By injectivity of the canonical map, the
algebra~$(\affl/J)[f^{-1}]$ is zero. Therefore~$f^n \in J$ for some natural
number~$n$.\end{rem}

\begin{rem}In view of the previous remark, one might hope to be able to simplify the
condition in Proposition~\ref{prop:characterization-open-subfunctor} as
follows: ``For any~$x\?X$, the quotient~$\affl/K$ modulo the ideal~$K = \{
f\?\affl \,|\, \speak{$f$ \inv} \Rightarrow (x \in U) \}$ is quasicoherent.''
However, this doesn't work out.
This statement implies the condition in the proposition, but the converse
direction does not hold, since~$\affl/K \cong \affl/\sqrt{J}$ might fail to be
quasicoherent. For instance that's the case if~$U = \emptyset$; then~$K =
\sqrt{(0)}$ is not quasicoherent by Remark~\ref{rem:radical-not-qcoh}.\end{rem}

\begin{rem}In the internal language of toposes used to carry out synthetic
differential geometry, there is the concept of an \emph{Penon-open}
subset~\cite[Chapitre~III]{penon}: A subset~$U \subseteq X$ is Penon-open if
and only if
\[ \forall x \in U\_ \forall y\?X\_
  (x \neq y) \vee (y \in U). \]
This notion is not useful in synthetic algebraic geometry, since it is much too
weak: Any subset of the one-element set~$1$ is Penon-open. However, not every
subfunctor of the terminal functor in~$\Zar(S)$ is an open subfunctor.
\end{rem}

% negneg-stability
% definition of open truth values

\end{document}
